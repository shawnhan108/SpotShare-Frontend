{"version":3,"sources":["components/Layout/Layout.js","components/Backdrop/Backdrop.js","components/Toolbar/Toolbar.js","components/Navigation/MobileToggle/MobileToggle.js","components/Logo/Logo.js","components/Navigation/NavigationItems/NavigationItems.js","components/Navigation/MainNavigation/MainNavigation.js","components/Navigation/MobileNavigation/MobileNavigation.js","components/Button/Button.js","components/Modal/Modal.js","components/ErrorHandler/ErrorHandler.js","components/Loader/Loader.js","components/Feed/Post/Post.js","components/Form/Input/Input.js","components/Form/Input/FilePicker.js","components/Image/Image.js","util/validators.js","util/image.js","components/Map/map.js","components/Rating/Rating.js","components/Feed/FeedEdit/FeedEdit.js","components/Paginator/Paginator.js","components/Form/ReviewForm.js","pages/Feed/Feed.js","pages/Profile/Profile.js","pages/Ranking/Ranking.js","components/Pin/pin.js","pages/Map/Map.js","pages/Bucket/Bucket.js","components/View-map/view-map.js","components/Toast/Toast.js","pages/Feed/SinglePost/SinglePost.js","pages/Auth/Auth.js","pages/Auth/Login.js","pages/Auth/Signup.js","App.js","index.js"],"names":["layout","props","react_default","a","createElement","react","className","header","mobileNav","children","backdrop","open","join","onClick","toolbar","style","position","zIndex","mobileToggle","onOpen","logo","navItems","id","text","link","auth","navigationItems","state","_this","getUserName","userId","localStorage","getItem","token","fetch","method","headers","Authorization","then","res","status","Error","json","resData","setState","name","userObj","catch","err","console","log","this","loaded","_this2","isAuth","window","location","reload","concat","Object","toConsumableArray","filter","item","map","key","mobile","NavLink","to","exact","onChoose","Dropdown","Toggle","variant","Menu","Item","color","onLogout","Component","mainNavigation","MobileToggle_MobileToggle","onOpenMobileNav","Logo_Logo","NavigationItems_NavigationItems","isLoading","mobileNavigation","onChooseItem","button","Link","es_Button","design","mode","colorChange","disabled","loading","type","Modalmodel","setShow","React","useState","Fragment","es_Modal","show","onHide","Header","Title","title","Body","Footer","Button_Button","onCancelModal","onAcceptModal","acceptEnabled","errorHandler","error","Backdrop_Backdrop","onHandle","Modal_Modal","message","loader","post","bucketNum","postInBucket","btnTitle","bucketHandler","Content-Type","body","JSON","stringify","newBucketNum","openSocket","on","data","action","updateBucketNum","offBucket","catchError","onBucket","split","render","userBucket","includes","Loader_Loader","author","_id","date","taken_date","src","image","alt","Container","width","Row","onStartEdit","startReview","onDelete","input","label","Form","Label","htmlFor","control","Control","valid","touched","required","value","placeholder","onChange","e","target","files","onBlur","rows","filePicker","backgroundImage","imageUrl","backgroundSize","contain","backgroundPosition","left","trim","length","config","isValid","min","max","email","test","generateBase64FromImage","imageFile","reader","FileReader","promise","Promise","resolve","reject","onload","result","onerror","readAsDataURL","MAPBOX_TOKEN","Mapp","viewport","latitude","center","longitude","zoom","searchResultLayer","mapRef","createRef","handleViewportChange","objectSpread","handleGeocoderViewportChange","transitionDuration","handleOnResult","event","GeoJsonLayer","geometry","getFillColor","getRadius","pointRadiusMinPixels","pointRadiusMaxPixels","_this$state","height","esm","assign","ref","onViewportChange","mapboxApiAccessToken","mapStyle","index_m","onResult","inputValue","inputval","deckgl","layers","Rating","rating","nextValue","prevValue","fontSize","react_star_rating_component_default","starCount","onStarClick","bind","POST_FORM","validators","content","place_type","relevance","properties","place_name","context","ISO","shutter_speed","aperture","camera","lens","equipment","edit_soft","user_rate","FeedEdit","postForm","formIsValid","imagePreview","postInputChangeHandler","b64","prevState","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","validator","return","updatedForm","defineProperty","inputName","postLocationChangeHandler","postRatingChangeHandler","inputBlurHandler","cancelPostChangeHandler","onCancelEdit","acceptPostChangeHandler","onFinishEdit","prevProps","editing","selectedPost","imagePath","isNewPost","Input_Input","FilePicker","Image_Image","display","alignItems","justifyContent","Col","components_Rating_Rating","paginator","currentPage","onPrevious","lastPage","onNext","reviewForm","postReviewEditing","reviewIsValid","cancelReviewHandler","acceptReviewHandler","comment","postCommentHandler","Feed","isEditing","posts","totalPosts","editPost","postPage","postsLoading","editLoading","bucket","reviewPost","oldRating","ratingTouched","commentTouched","addPost","updatedPosts","pop","unshift","updatePost","updatedPostIndex","findIndex","p","loadPosts","direction","page","totalItems","searchString","i","toLowerCase","search","toString","push","statusUpdateHandler","preventDefault","newPostHandler","startEditPostHandler","postId","find","cancelEditHandler","finishEditHandler","postData","formData","FormData","append","url","statusInputChangeHandler","deletePostHandler","bucketPostHandler","bucketRemoveHandler","splice","startReviewHandler","ratings","_callee","Rez","new_rating","newRatingId","res2","res3","regenerator_default","wrap","_context","prev","sent","old_rating","abrupt","ratingId","newRating","t0","stop","clearSearchHandler","_callee2","_context2","_this3","ReviewForm","ErrorHandler","Feed_FeedEdit_FeedEdit","onSubmit","textAlign","marginTop","Paginator_Paginator","Math","ceil","Post_Post","creator","Date","createdAt","toLocaleDateString","show_post_limit","show_post_limit_region","posts_to_display","regionRatings","redirected","regions","forEach","len","regionKey","keys","region","avgRating","regionPosts","regionName","sum","num","rating_num","country","renderTopPostData","parse","sort","b","borderLeft","ratingHelper","renderTopRegionData","asyncToGenerator","mark","_callee3","_context3","Redirect","paddingTop","paddingBottom","paddingLeft","paddingRight","Table","striped","bordered","hover","padding","pin","cardReveal","Card","Img","Text","ButtonGroup","size","Map","spots","createMarkers","markers","offsetLeft","offsetTop","components_Pin_pin","viewMap","cancelViewMap","Toastt","_React$useState","_React$useState2","slicedToArray","showB","setShowB","Toast","onClose","animation","user","SinglePost","public_rate","loadComment","progressBarColorHandler","getRateAverage","Number","isNaN","getAllCommentsHandler","match","params","resData2","rating_copy","public_rate_data","view_map","maxHeight","es_Image","fluid","colSpan","ProgressBar","animated","now","rate","Toast_Toast","Login","loginForm","password","inputChangeHandler","Carousel","slide","Caption","Auth_Auth","onLogin","Signup","signupForm","onSignup","App","showBackdrop","showMobileNav","authLoading","navState","mobileNavHandler","isOpen","backdropClickHandler","logoutHandler","clear","loginHandler","authData","setItem","expiryDate","getTime","toISOString","setAutoLogout","signupHandler","history","replace","milliseconds","setTimeout","remainingMilliseconds","routes","Switch","Route","path","Auth_Login","Auth_Signup","Profile_Profile","Bucket_Bucket","pages_Map_Map","Ranking_Ranking","pages_Feed_Feed","Feed_SinglePost_SinglePost","Layout_Layout","Toolbar_Toolbar","MainNavigation_MainNavigation","MobileNavigation_MobileNavigation","withRouter","ReactDOM","BrowserRouter","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.ab462fac.chunk.js","sourcesContent":["import React, { Fragment } from 'react';\n\nimport './Layout.css';\n\nconst layout = props => (\n  <Fragment>\n    <header className=\"main-header\">{props.header}</header>\n    {props.mobileNav}\n    <main className=\"content\">{props.children}</main>\n  </Fragment>\n);\n\nexport default layout;\n","import React from 'react';\n\nimport './Backdrop.css';\n\nconst backdrop = props =>\n (<div\n  className={['backdrop', props.open ? 'open' : ''].join(' ')}\n  onClick={props.onClick}\n/>);\n\nexport default backdrop;\n","import React from 'react';\n\nimport './Toolbar.css';\n\nconst toolbar = props => (\n    <div className=\"toolbar\" style={{ position: 'relative', zIndex: '1' }}>\n       {props.children}\n    </div>\n);\n\nexport default toolbar;","import React from 'react';\n\nimport './MobileToggle.css';\n\nconst mobileToggle = props => (\n  <button className=\"mobile-toggle\" onClick={props.onOpen}>\n    <span className=\"mobile-toggle__bar\" />\n    <span className=\"mobile-toggle__bar\" />\n    <span className=\"mobile-toggle__bar\" />\n  </button>\n);\n\nexport default mobileToggle;\n","import React from 'react';\n\nimport './Logo.css';\n\nconst logo = props => <h1 className=\"logo\">SpotShare</h1>;\n\nexport default logo;\n","import React, {Component} from 'react';\nimport { NavLink } from 'react-router-dom';\nimport {Dropdown} from 'react-bootstrap';\n\nimport './NavigationItems.css';\n\nconst navItems = [\n  { id: 'feed', text: 'Feed', link: '/', auth: true },\n  { id: 'my-profile', text: 'Profile', link: '/posts', auth: true},\n  { id: 'my-bucket', text: 'Bucket', link: '/my-bucket', auth: true},\n  { id: 'my-map', text: 'Map', link: '/my-map', auth: true},\n  { id: 'rankings', text: 'Rank', link: '/rankings', auth: true},\n  { id: 'login', text: 'Login', link: '/', auth: false},\n  { id: 'signup', text: 'Signup', link: '/signup', auth: false}\n];\n\n\nclass navigationItems extends Component {\n  state = this.props.state;\n\n  getUserName = () => {\n    let userId = localStorage.getItem('userId');\n    let token = localStorage.getItem('token');\n    fetch('https://photography-spot-share.herokuapp.com/auth/user/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching user name failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({\n          name: resData.userObj.name\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n    }\n    \n  componentDidMount() {\n    const userId = localStorage.getItem('userId');\n    const token = localStorage.getItem('token');\n    if (userId && token){\n      this.setState({\n        loaded: true,\n        name:  this.getUserName()\n      })\n    }\n  }\n  \n  render () {\n    if (this.props.isAuth && (!this.state)){\n      window.location.reload();\n    } \n    return ([\n        ...navItems.filter(item => item.auth === this.props.isAuth).map(item => (\n          <li\n            key={item.id}\n            className={['navigation-item', this.props.mobile ? 'mobile' : ''].join(' ')}\n          >\n            <NavLink to={item.link} exact onClick={this.props.onChoose}>\n              {item.text}\n            </NavLink>\n          </li>\n        )),\n        this.props.isAuth && this.state && this.state.name && (\n          <li className=\"navigation-item\" key=\"logout\">\n            <Dropdown>\n              <Dropdown.Toggle variant=\"Warning\" id=\"dropdown-basic\">\n                Hello {this.state.name}!\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                <Dropdown.Item \n                  style={{color: \"green\"}} \n                  onClick={this.props.onLogout}>\n                  Logout\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n          </li>\n        )]);\n  }\n}\n\nexport default navigationItems;\n","import React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\n\nimport MobileToggle from '../MobileToggle/MobileToggle';\nimport Logo from '../../Logo/Logo';\nimport NavigationItems from '../NavigationItems/NavigationItems';\n\nimport './MainNavigation.css';\n\nclass mainNavigation extends Component {\n\n  render() {\n    return (\n      <nav className=\"main-nav\">\n        <MobileToggle onOpen={this.props.onOpenMobileNav} />\n        <div className=\"main-nav__logo\">\n          <NavLink to=\"/\">\n            <Logo />\n          </NavLink>\n        </div>\n        <div className=\"spacer\" />\n        <ul className=\"main-nav__items\">\n          <NavigationItems\n            isAuth={this.props.isAuth}\n            onLogout={this.props.onLogout}\n            isLoading={this.props.isLoading}\n            userId={this.props.userId}\n            token={this.props.token}\n            state={this.props.state}\n            name={this.props.name} />\n        </ul>\n      </nav>\n    );\n  }\n}\n\nexport default mainNavigation;\n","import React from 'react';\n\nimport NavigationItems from '../NavigationItems/NavigationItems';\nimport './MobileNavigation.css';\n\nconst mobileNavigation = props => (\n  <nav className={['mobile-nav', props.open ? 'open' : ''].join(' ')}>\n    <ul\n      className={['mobile-nav__items', props.mobile ? 'mobile' : ''].join(' ')}\n    >\n      <NavigationItems\n        mobile\n        onChoose={props.onChooseItem}\n        isAuth={props.isAuth}\n        onLogout={props.onLogout}\n      />\n    </ul>\n  </nav>\n);\n\nexport default mobileNavigation;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport './Button.css';\nimport { Button } from 'react-bootstrap';\n\nconst button = props =>\n  !props.link ? (\n    <Button\n      variant=\"outline-dark\"\n      className={[\n        'button',\n        `button--${props.design}`,\n        `button--${props.mode}`,\n        `button--${props.colorChange}`\n      ].join(' ')}\n      onClick={props.onClick}\n      disabled={props.disabled || props.loading}\n      type={props.type}\n    >\n      {props.loading ? 'Loading...' : props.children}\n    </Button>\n  ) : (\n      <Link to={props.link}>\n        <Button\n          variant=\"outline-dark\"\n          className={[\n            'button',\n            `button--${props.design}`,\n            `button--${props.mode}`,\n            `button--${props.colorChange}`\n          ].join(' ')}>\n          {props.children}\n        </Button>\n      </Link>\n    );\n\nexport default button;\n","import React from 'react';\n\nimport Button from '../Button/Button';\nimport './Modal.css';\nimport { Modal } from 'react-bootstrap';\n\nconst Modalmodel = props => {\n\n  const setShow = React.useState(false)[1];\n  const handleShow = () => setShow(true);\n  const showpair = true;\n  return (\n    <>\n      <Modal show={showpair} onHide={handleShow}>\n        <Modal.Header>\n          <Modal.Title>{props.title}</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"modal__content\">{props.children}</div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button design=\"danger\" mode=\"flat\" onClick={props.onCancelModal}>\n            Cancel\n          </Button>\n          <Button\n            mode=\"raised\"\n            onClick={props.onAcceptModal}\n            disabled={!props.acceptEnabled}\n            loading={props.isLoading}\n          >\n            Accept\n          </Button>\n        </Modal.Footer>\n      </Modal>\n    </>\n  );\n}\n\nexport default Modalmodel;\n","import React, { Fragment } from 'react';\n\nimport Backdrop from '../Backdrop/Backdrop';\nimport Modal from '../Modal/Modal';\n\nconst errorHandler = props => (\n  <Fragment>\n    {props.error && <Backdrop onClick={props.onHandle} />}\n    {props.error && (\n      <Modal\n        title=\"An Error Occurred\"\n        onCancelModal={props.onHandle}\n        onAcceptModal={props.onHandle}\n        acceptEnabled\n      >\n        <p>{props.error.message}</p>\n      </Modal>\n    )}\n  </Fragment>\n);\n\nexport default errorHandler;\n","import React from 'react';\n\nimport './Loader.css';\n\nconst loader = props => (\n  <div className=\"loader\">\n    <div />\n    <div />\n    <div />\n    <div />\n  </div>\n);\n\nexport default loader;\n","import React, { Component } from 'react';\nimport openSocket from 'socket.io-client';\n\nimport Button from '../../Button/Button';\nimport './Post.css';\nimport { Container, Row } from 'react-bootstrap';\nimport Loader from '../../Loader/Loader';\n\nclass post extends Component {\n  state = {\n    bucketNum: 0,\n    postInBucket: false,\n    btnTitle: 'Bucket!',\n    loading: 'true'\n  };\n\n  bucketHandler = () => {\n    if (!this.state.postInBucket) {\n      fetch('https://photography-spot-share.herokuapp.com/feed/bucket-num/' + this.props.id, {\n        method: 'PATCH',\n        headers: {\n          Authorization: 'Bearer ' + this.props.token,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          newBucketNum: this.state.bucketNum + 1\n        })\n      })\n      .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            throw new Error(\"Can't update bucket number!\");\n          }\n          return res.json();\n        })\n      .then(resData => {\n          this.setState({\n            postInBucket: true,\n            btnTitle: 'Unbucket!'\n          });\n          return this.props.onBucket();\n        })\n      .catch(this.catchError);     \n    }\n    else {\n      fetch('https://photography-spot-share.herokuapp.com/feed/bucket-num/' + this.props.id, {\n        method: 'PATCH',\n        headers: {\n          Authorization: 'Bearer ' + this.props.token,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          newBucketNum: this.state.bucketNum - 1\n        })\n      })\n      .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            throw new Error(\"Can't update bucket number!\");\n          }\n          return res.json();\n        })\n      .then(resData => {\n          this.setState({\n            postInBucket: false,\n            btnTitle: 'Bucket!'\n          });\n          const socket = openSocket('https://photography-spot-share.herokuapp.com');\n          socket.on('bucket', data => {\n            if (data.action === 'update') {\n              this.updateBucketNum(data.newBucketNum);\n            }\n          });\n          return this.props.offBucket();\n        })\n      .catch(this.catchError);\n    }\n  }\n\n  updateBucketNum = (newBucketNum) => {\n    this.setState({\n      btnTitle: this.state.btnTitle.split(\"(\")[0] + \"(\" + newBucketNum + \")\"\n    })\n    this.render();\n  }\n\n  componentDidMount() {\n    fetch('https://photography-spot-share.herokuapp.com/feed/bucket-num/' + this.props.id, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching bucket number failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({\n          bucketNum: resData.bucketNum\n        });\n        return resData;\n      })\n      .then(resData => {\n        if (this.props.userBucket.includes(this.props.id)) {\n          this.setState({\n            postInBucket: true,\n            btnTitle: 'Unbucket!(' + resData.bucketNum + ')'\n          });\n        }\n        else {\n          this.setState({\n            postInBucket: false,\n            btnTitle: 'Bucket!(' + resData.bucketNum + ')'\n          });\n        }\n        this.setState({\n          loading: 'false'\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  render() {\n    if (this.state.loading === 'true') {\n      return <Loader />\n    };\n    if (this.props.author._id === localStorage.getItem('userId')){\n      return (\n        <article className=\"post\">\n          <header className=\"post__header\">\n            <h1 className=\"post__title text-center\">{this.props.title}</h1>\n            <hr></hr>\n            <h3 className=\"post__infos\">\n              Posted by {this.props.author.name} on {this.props.date} ||  Shot at {this.props.location.text} on {this.props.taken_date}\n            </h3>\n          </header>\n          <div className=\"post__image\">\n            <img className=\"post_img\" src={'https://photography-spot-share.herokuapp.com/' + this.props.image} alt={this.props.title} />\n          </div>\n          <Container className=\"text-center buttonbar\" style={{width:'30rem'}}>\n            <Row className=\"text-center\">\n              <div className=\"button-pad pull-right\">\n                <Button mode=\"flat\" link={this.props.id}>\n                  View\n                </Button>\n              </div>\n              <div className=\"button-pad\">\n                <Button mode=\"flat\" onClick={this.props.onStartEdit}>\n                  Edit\n                </Button>\n              </div>\n              <div className=\"button-pad\">\n                <Button mode=\"flat\" onClick={this.props.startReview}>\n                  Review\n                </Button>\n              </div>\n              <div className=\"button-pad\">\n                <Button mode=\"flat\" design=\"danger\" colorChange=\"colorChange\" onClick={this.bucketHandler}>\n                  {this.state.btnTitle}\n                </Button>\n              </div>\n              <div className=\"button-pad\">\n                <Button mode=\"flat\" design=\"danger\" onClick={this.props.onDelete}>\n                  Delete\n                </Button>\n              </div>\n            </Row>\n          </Container>\n        </article>\n      )\n    } else{\n      return (\n        <article className=\"post\">\n          <header className=\"post__header\">\n            <h1 className=\"post__title text-center\">{this.props.title}</h1>\n            <hr></hr>\n            <h3 className=\"post__infos\">\n              Posted by {this.props.author.name} on {this.props.date} ||  Shot at {this.props.location.text} on {this.props.taken_date}\n            </h3>\n          </header>\n          <div className=\"post__image\">\n            <img className=\"post_img\" src={'https://photography-spot-share.herokuapp.com/' + this.props.image} alt={this.props.title} />\n          </div>\n          <Container className=\"text-center buttonbar\" style={{width:'20rem'}}>\n            <Row className=\"text-center\">\n              <div className=\"button-pad pull-right\">\n                <Button mode=\"flat\" link={this.props.id}>\n                  View\n                </Button>\n              </div>\n              <div className=\"button-pad\">\n                <Button mode=\"flat\" onClick={this.props.startReview}>\n                  Review\n                </Button>\n              </div>\n              <div className=\"button-pad\">\n                <Button mode=\"flat\" design=\"danger\" colorChange=\"colorChange\" onClick={this.bucketHandler}>\n                  {this.state.btnTitle}\n                </Button>\n              </div>\n            </Row>\n          </Container>\n        </article>\n      )\n    }\n    \n  }\n}\n\nexport default post;\n","import React from 'react';\nimport {Form} from 'react-bootstrap';\n\nimport './Input.css';\n\nconst input = props => (\n  <div className=\"input\">\n    {props.label && <Form.Label htmlFor={props.id}>{props.label}</Form.Label>}\n    {props.control === 'input' && (\n      <Form.Control\n        className={[\n          !props.valid ? 'invalid' : 'valid',\n          props.touched ? 'touched' : 'untouched'\n        ].join(' ')}\n        type={props.type}\n        id={props.id}\n        required={props.required}\n        value={props.value}\n        placeholder={props.placeholder}\n        onChange={e => props.onChange(props.id, e.target.value, e.target.files)}\n        onBlur={props.onBlur}\n      />\n    )}\n    {props.control === 'textarea' && (\n      <textarea\n        className={[\n          !props.valid ? 'invalid' : 'valid',\n          props.touched ? 'touched' : 'untouched'\n        ].join(' ')}\n        id={props.id}\n        rows={props.rows}\n        required={props.required}\n        value={props.value}\n        onChange={e => props.onChange(props.id, e.target.value)}\n        onBlur={props.onBlur}\n      />\n    )}\n  </div>\n);\n\nexport default input;\n","import React from 'react';\n\nimport './Input.css';\nimport {Form} from 'react-bootstrap';\n\nconst filePicker = props => (\n  <div className=\"input\">\n    <Form.Label htmlFor={props.id}>{props.label}</Form.Label>\n    <Form.Control\n      className={[\n        !props.valid ? 'invalid' : 'valid',\n        props.touched ? 'touched' : 'untouched'\n      ].join(' ')}\n      type=\"file\"\n      id={props.id}\n      onChange={e => props.onChange(props.id, e.target.value, e.target.files)}\n      onBlur={props.onBlur}\n    />\n  </div>\n);\n\nexport default filePicker;\n","import React from 'react';\n\nimport './Image.css';\n\nconst image = props => (\n  <div\n    className=\"image\"\n    style={{\n      backgroundImage: `url('${props.imageUrl}')`,\n      backgroundSize: props.contain ? 'contain' : 'cover',\n      backgroundPosition: props.left ? 'left' : 'center'\n    }}\n  />\n);\n\nexport default image;\n","export const required = value => value.trim() !== '';\n\nexport const length = config => value => {\n  let isValid = true;\n  if (config.min) {\n    isValid = isValid && value.trim().length >= config.min;\n  }\n  if (config.max) {\n    isValid = isValid && value.trim().length <= config.max;\n  }\n  return isValid;\n};\n\nexport const email = value =>\n  /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(\n    value\n  );\n","export const generateBase64FromImage = imageFile => {\n  const reader = new FileReader();\n  const promise = new Promise((resolve, reject) => {\n    reader.onload = e => resolve(e.target.result);\n    reader.onerror = err => reject(err);\n  });\n\n  reader.readAsDataURL(imageFile);\n  return promise;\n};\n","import \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";\nimport React, { Component } from \"react\";\nimport MapGL from \"react-map-gl\";\nimport DeckGL, { GeoJsonLayer } from \"deck.gl\";\nimport Geocoder from \"react-map-gl-geocoder\";\n\nconst MAPBOX_TOKEN = \"pk.eyJ1IjoieTI2MmhhbiIsImEiOiJjanozamU2bmkwMzJ5M2d0Nm84ZW5meHhzIn0.L1kW4Q7vNyX0fCJJEYI5PA\";\n\nclass Mapp extends Component {\n    state = {\n        viewport: {\n            latitude: this.props.value.center[1],\n            longitude: this.props.value.center[0],\n            zoom: 8\n        },\n        searchResultLayer: null\n    };\n\n    mapRef = React.createRef();\n\n    handleViewportChange = viewport => {\n        this.setState({\n            viewport: { ...this.state.viewport, ...viewport },\n        });\n    };\n\n    handleGeocoderViewportChange = viewport => {\n        const geocoderDefaultOverrides = { transitionDuration: 1000 };\n        return this.handleViewportChange({\n            ...viewport,\n            ...geocoderDefaultOverrides\n        });\n    };\n\n    handleOnResult = event => {\n        this.setState({\n            searchResultLayer: new GeoJsonLayer({\n                id: \"search-result\",\n                data: event.result.geometry,\n                getFillColor: [255, 0, 0, 128],\n                getRadius: 1000,\n                pointRadiusMinPixels: 10,\n                pointRadiusMaxPixels: 10\n            })\n        });\n        this.props.onChange(event.result);\n    };\n\n    render() {\n        const {viewport, searchResultLayer} = this.state;\n        return (\n            <div style={{ height: \"100%\" }}>\n                <MapGL\n                    ref={this.mapRef}\n                    {...viewport}\n                    width={this.props.width}\n                    height={this.props.height}\n                    onViewportChange={this.handleViewportChange}\n                    mapboxApiAccessToken={MAPBOX_TOKEN}\n                    mapStyle='mapbox://styles/y262han/cjz3kx9a80fby1cr3d8oydttt'\n                >\n                    <Geocoder\n                        mapRef={this.mapRef}\n                        onResult={this.handleOnResult}\n                        onViewportChange={this.handleGeocoderViewportChange}\n                        mapboxApiAccessToken={MAPBOX_TOKEN}\n                        position=\"top-left\"\n                        inputValue={this.props.inputval}\n                        onChange={e => this.props.onChange(e.target.value)}\n                    />\n                    <DeckGL {...viewport} layers={[searchResultLayer]} />\n                </MapGL>\n            </div>\n        );\n    }\n}\n\nexport default Mapp;","import React from 'react';\nimport StarRatingComponent from 'react-star-rating-component';\n \nclass Rating extends React.Component {\n  state = {\n    rating: this.props.value\n  };\n \n  onStarClick(nextValue, prevValue, name) {\n    this.setState({rating: nextValue});\n    this.props.onChange(nextValue);\n  }\n \n  render() {\n    const { rating } = this.state;\n    \n    return (\n        <div>\n            <p>{this.props.label}: {rating}</p>\n            <div style={{fontSize: \"2rem\"}}>\n                <StarRatingComponent \n                    name=\"rate1\" \n                    starCount={5}\n                    value={this.state.rating}\n                    onStarClick={this.onStarClick.bind(this)}\n                />\n            </div>\n        </div>                \n        \n    );\n  }\n}\n \nexport default Rating;","import React, { Component, Fragment } from 'react';\n\nimport Backdrop from '../../Backdrop/Backdrop';\nimport Modalmodel from '../../Modal/Modal';\nimport Input from '../../Form/Input/Input';\nimport FilePicker from '../../Form/Input/FilePicker';\nimport Image from '../../Image/Image';\nimport { required, length } from '../../../util/validators';\nimport { generateBase64FromImage } from '../../../util/image';\nimport { Form, Row, Col } from 'react-bootstrap';\nimport './FeedEdit.css';\nimport Mapp from '../../Map/map';\nimport Rating from '../../Rating/Rating';\nimport Loader from '../../Loader/Loader';\n\nconst POST_FORM = {\n  title: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required, length({ min: 5 })]\n  },\n  image: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  content: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required, length({ min: 5 })]\n  },\n  taken_date: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  location: {\n    value: {\n      id: \"\",\n      type: \"\",\n      place_type: [],\n      relevance: 0,\n      properties: {},\n      text: \"\",\n      place_name: \"\",\n      center: [-75.69, 45.421],\n      geometry: {},\n      context: []\n    },\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  ISO: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  shutter_speed: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  aperture: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  camera: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  lens: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  equipment: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  edit_soft: {\n    value: '',\n    valid: false,\n    touched: false,\n    validators: [required]\n  },\n  user_rate: {\n    value: 3,\n    valid: false,\n    touched: false,\n    validators: [required]\n  }\n};\n\nclass FeedEdit extends Component {\n  state = {\n    postForm: POST_FORM,\n    formIsValid: false,\n    imagePreview: null,\n    loading: 'true'\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      this.props.editing &&\n      prevProps.editing !== this.props.editing &&\n      prevProps.selectedPost !== this.props.selectedPost\n    ) {\n      const postForm = {\n        title: {\n          ...prevState.postForm.title,\n          value: this.props.selectedPost.title,\n          valid: true\n        },\n        image: {\n          ...prevState.postForm.image,\n          value: this.props.selectedPost.imagePath,\n          valid: true\n        },\n        content: {\n          ...prevState.postForm.content,\n          value: this.props.selectedPost.content,\n          valid: true\n        },\n        taken_date: {\n          ...prevState.postForm.taken_date,\n          value: this.props.selectedPost.taken_date,\n          valid: true\n        },\n        location: {\n          ...prevState.postForm.location,\n          value: this.props.selectedPost.location,\n          valid: true\n        },\n        ISO: {\n          ...prevState.postForm.ISO,\n          value: this.props.selectedPost.ISO,\n          valid: true\n        },\n        shutter_speed: {\n          ...prevState.postForm.shutter_speed,\n          value: this.props.selectedPost.shutter_speed,\n          valid: true\n        },\n        aperture: {\n          ...prevState.postForm.aperture,\n          value: this.props.selectedPost.aperture,\n          valid: true\n        },\n        camera: {\n          ...prevState.postForm.camera,\n          value: this.props.selectedPost.camera,\n          valid: true\n        },\n        lens: {\n          ...prevState.postForm.lens,\n          value: this.props.selectedPost.lens,\n          valid: true\n        },\n        equipment: {\n          ...prevState.postForm.equipment,\n          value: this.props.selectedPost.equipment,\n          valid: true\n        },\n        edit_soft: {\n          ...prevState.postForm.edit_soft,\n          value: this.props.selectedPost.edit_soft,\n          valid: true\n        },\n        user_rate: {\n          ...prevState.postForm.user_rate,\n          value: this.props.selectedPost.user_rate,\n          valid: true\n        }\n      };\n      this.setState({ postForm: postForm, formIsValid: true, loading: 'false' });\n    }\n  }\n\n  postInputChangeHandler = (input, value, files) => {\n    if (files) {\n      generateBase64FromImage(files[0])\n        .then(b64 => {\n          this.setState({ imagePreview: b64 });\n        })\n        .catch(e => {\n          this.setState({ imagePreview: null });\n        });\n    }\n    this.setState(prevState => {\n      let isValid = true;\n      for (const validator of prevState.postForm[input].validators) {\n        isValid = isValid && validator(value);\n      }\n      const updatedForm = {\n        ...prevState.postForm,\n        [input]: {\n          ...prevState.postForm[input],\n          valid: isValid,\n          value: files ? files[0] : value\n        }\n      };\n      let formIsValid = true;\n      for (const inputName in updatedForm) {\n        formIsValid = formIsValid && updatedForm[inputName].valid;\n      }\n      return {\n        postForm: updatedForm,\n        formIsValid: formIsValid\n      };\n    });\n  };\n\n  postLocationChangeHandler = (value) => {\n    this.setState(prevState => {\n      const updatedForm = {\n        ...prevState.postForm,\n        location: {\n          ...prevState.postForm.location,\n          valid: true,\n          value: value\n        }\n      };\n      return {\n        postForm: updatedForm,\n        formIsValid: true\n      };\n    });\n  };\n\n  postRatingChangeHandler = (value) => {\n    this.setState(prevState => {\n      const updatedForm = {\n        ...prevState.postForm,\n        user_rate: {\n          ...prevState.postForm.user_rate,\n          valid: true,\n          value: value\n        }\n      };\n      return {\n        postForm: updatedForm,\n        formIsValid: true\n      };\n    });\n  };\n\n  inputBlurHandler = input => {\n    this.setState(prevState => {\n      return {\n        postForm: {\n          ...prevState.postForm,\n          [input]: {\n            ...prevState.postForm[input],\n            touched: true\n          }\n        }\n      };\n    });\n  };\n\n  cancelPostChangeHandler = () => {\n    this.setState({\n      postForm: POST_FORM,\n      formIsValid: false,\n      loading: 'true'\n    });\n    this.props.onCancelEdit();\n  };\n\n  acceptPostChangeHandler = () => {\n    const post = {\n      title: this.state.postForm.title.value,\n      image: this.state.postForm.image.value,\n      content: this.state.postForm.content.value,\n      taken_date: this.state.postForm.taken_date.value,\n      location: this.state.postForm.location.value,\n      ISO: this.state.postForm.ISO.value,\n      shutter_speed: this.state.postForm.shutter_speed.value,\n      aperture: this.state.postForm.aperture.value,\n      camera: this.state.postForm.camera.value,\n      lens: this.state.postForm.lens.value,\n      equipment: this.state.postForm.equipment.value,\n      edit_soft: this.state.postForm.edit_soft.value,\n      user_rate: this.state.postForm.user_rate.value\n    };\n    this.props.onFinishEdit(post);\n    this.setState({\n      postForm: POST_FORM,\n      formIsValid: false,\n      imagePreview: null, \n      loading: 'true'\n    });\n  };\n\n  render() {\n    if (!this.props.editing){\n      return null;\n    }\n    if (this.state.loading === 'true' && (!this.props.isNewPost)){\n      return <Loader />\n    }\n    return this.props.editing ? (\n      <Fragment>\n        <Backdrop onClick={this.cancelPostChangeHandler} />\n        <Modalmodel\n          title=\"New Post\"\n          acceptEnabled={this.state.formIsValid}\n          onCancelModal={this.cancelPostChangeHandler}\n          onAcceptModal={this.acceptPostChangeHandler}\n          isLoading={this.props.loading}\n        >\n          <Form>\n            <div className=\"input-padding\">\n              <Input\n                id=\"title\"\n                label=\"Title\"\n                control=\"input\"\n                onChange={this.postInputChangeHandler}\n                onBlur={this.inputBlurHandler.bind(this, 'title')}\n                valid={this.state.postForm['title'].valid}\n                touched={this.state.postForm['title'].touched}\n                value={this.state.postForm['title'].value}\n              />\n            </div>\n            <div className=\"input-padding\">\n              <FilePicker\n                id=\"image\"\n                label=\"Image\"\n                control=\"input\"\n                onChange={this.postInputChangeHandler}\n                onBlur={this.inputBlurHandler.bind(this, 'image')}\n                valid={this.state.postForm['image'].valid}\n                touched={this.state.postForm['image'].touched}\n              />\n              <div className=\"new-post__preview-image\">\n                {!this.state.imagePreview && <p>Please choose an image.</p>}\n                {this.state.imagePreview && (\n                  <Image imageUrl={this.state.imagePreview} contain left />\n                )}\n              </div>\n            </div>\n            <div className=\"input-padding\">\n              <Input\n                id=\"content\"\n                label=\"Content\"\n                control=\"textarea\"\n                rows=\"5\"\n                onChange={this.postInputChangeHandler}\n                onBlur={this.inputBlurHandler.bind(this, 'content')}\n                valid={this.state.postForm['content'].valid}\n                touched={this.state.postForm['content'].touched}\n                value={this.state.postForm['content'].value}\n              />\n            </div>\n            <div className=\"input-padding\">\n              <Input\n                id=\"taken_date\"\n                label=\"Date photo was taken\"\n                control=\"input\"\n                onChange={this.postInputChangeHandler}\n                onBlur={this.inputBlurHandler.bind(this, 'taken_date')}\n                valid={this.state.postForm['taken_date'].valid}\n                touched={this.state.postForm['taken_date'].touched}\n                value={this.state.postForm['taken_date'].value}\n              />\n            </div>\n            <div className=\"input-padding\">\n              <div>\n                <p>Location</p>\n                <div className=\"location-div\">\n                  <p>{this.state.postForm['location'].value.text}</p>\n                </div>\n              </div>\n            </div>\n            <div>\n              <p>Please select a location: </p>\n            </div>\n            <div className=\"map-div\" style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }}>\n              <Mapp\n                id=\"location\"\n                width=\"450px\"\n                height=\"250px\"\n                inputval={this.state.postForm['location'].value.text}\n                value={this.state.postForm['location'].value}\n                onChange={this.postLocationChangeHandler}\n              />\n            </div>\n            <div className=\"input-padding\">\n              <Row>\n                <Col>\n                  <Input\n                    id=\"ISO\"\n                    label=\"ISO\"\n                    control=\"input\"\n                    onChange={this.postInputChangeHandler}\n                    onBlur={this.inputBlurHandler.bind(this, 'ISO')}\n                    valid={this.state.postForm['ISO'].valid}\n                    touched={this.state.postForm['ISO'].touched}\n                    value={this.state.postForm['ISO'].value}\n                  />\n                </Col>\n                <Col>\n                  <Input\n                    id=\"shutter_speed\"\n                    label=\"Shutter Speed\"\n                    control=\"input\"\n                    onChange={this.postInputChangeHandler}\n                    onBlur={this.inputBlurHandler.bind(this, 'shutter_speed')}\n                    valid={this.state.postForm['shutter_speed'].valid}\n                    touched={this.state.postForm['shutter_speed'].touched}\n                    value={this.state.postForm['shutter_speed'].value}\n                  />\n                </Col>\n                <Col>\n                  <Input\n                    id=\"aperture\"\n                    label=\"Aperture\"\n                    control=\"input\"\n                    onChange={this.postInputChangeHandler}\n                    onBlur={this.inputBlurHandler.bind(this, 'aperture')}\n                    valid={this.state.postForm['aperture'].valid}\n                    touched={this.state.postForm['aperture'].touched}\n                    value={this.state.postForm['aperture'].value}\n                  />\n                </Col>\n              </Row>\n            </div>\n            <div className=\"input-padding\">\n              <Input\n                id=\"camera\"\n                label=\"Camera/Device\"\n                control=\"input\"\n                onChange={this.postInputChangeHandler}\n                onBlur={this.inputBlurHandler.bind(this, 'camera')}\n                valid={this.state.postForm['camera'].valid}\n                touched={this.state.postForm['camera'].touched}\n                value={this.state.postForm['camera'].value}\n              />\n            </div>\n            <div className=\"input-padding\">\n              <Input\n                id=\"lens\"\n                label=\"Lens\"\n                control=\"input\"\n                onChange={this.postInputChangeHandler}\n                onBlur={this.inputBlurHandler.bind(this, 'lens')}\n                valid={this.state.postForm['lens'].valid}\n                touched={this.state.postForm['lens'].touched}\n                value={this.state.postForm['lens'].value}\n              />\n            </div>\n            <div className=\"input-padding\">\n              <Input\n                id=\"equipment\"\n                label=\"Equipments\"\n                control=\"input\"\n                onChange={this.postInputChangeHandler}\n                onBlur={this.inputBlurHandler.bind(this, 'equipment')}\n                valid={this.state.postForm['equipment'].valid}\n                touched={this.state.postForm['equipment'].touched}\n                value={this.state.postForm['equipment'].value}\n              />\n            </div>\n            <div className=\"input-padding\">\n              <Input\n                id=\"edit_soft\"\n                label=\"Post-Editing Softwares\"\n                control=\"input\"\n                onChange={this.postInputChangeHandler}\n                onBlur={this.inputBlurHandler.bind(this, 'edit_soft')}\n                valid={this.state.postForm['edit_soft'].valid}\n                touched={this.state.postForm['edit_soft'].touched}\n                value={this.state.postForm['edit_soft'].value}\n              />\n            </div>\n            <Rating\n              id=\"user_rate\"\n              label=\"Author Rating for Location\"\n              onChange={this.postRatingChangeHandler}\n              value={this.state.postForm['user_rate'].value}\n            />\n          </Form>\n        </Modalmodel>\n      </Fragment>\n    ) : null;\n  }\n}\n\nexport default FeedEdit;\n","import React from 'react';\n\nimport './Paginator.css';\n\nconst paginator = props => (\n  <div className=\"paginator\">\n    {props.children}\n    <div className=\"paginator__controls\">\n      {props.currentPage > 1 && (\n        <button className=\"paginator__control\" onClick={props.onPrevious}>\n          Previous\n        </button>\n      )}\n      {props.currentPage < props.lastPage && (\n        <button className=\"paginator__control\" onClick={props.onNext}>\n          Next\n        </button>\n      )}\n    </div>\n  </div>\n);\n\nexport default paginator;\n","import React, {Component} from 'react';\nimport {Form} from 'react-bootstrap';\nimport Modalmodal from '../Modal/Modal';\nimport Rating from '../Rating/Rating';\n\nclass reviewForm extends Component {\n    render(){\n        return this.props.postReviewEditing ? (\n            <Modalmodal\n              title=\"Review this post\"\n              acceptEnabled={this.props.reviewIsValid}\n              onCancelModal={this.props.cancelReviewHandler}\n              onAcceptModal={this.props.acceptReviewHandler}\n              isLoading={false}>\n              <Form>\n                <Rating\n                  id=\"Rating\"\n                  label=\"Rate this location\"\n                  onChange={this.props.postRatingChangeHandler}\n                  value={this.props.rating}\n                />\n                <textarea\n                    rows={5}\n                    required={true}\n                    value={this.props.comment}\n                    onChange={e => this.props.postCommentHandler(e.target.value)}>\n                </textarea>\n              </Form>\n            </Modalmodal>) : null\n    };\n}\n\nexport default reviewForm;","import React, { Component, Fragment } from 'react';\nimport openSocket from 'socket.io-client';\n\nimport Post from '../../components/Feed/Post/Post';\nimport Button from '../../components/Button/Button';\nimport FeedEdit from '../../components/Feed/FeedEdit/FeedEdit';\nimport Input from '../../components/Form/Input/Input';\nimport Paginator from '../../components/Paginator/Paginator';\nimport Loader from '../../components/Loader/Loader';\nimport ErrorHandler from '../../components/ErrorHandler/ErrorHandler';\nimport './Feed.css';\nimport ReviewForm from '../../components/Form/ReviewForm';\n\nclass Feed extends Component {\n  state = {\n    isEditing: false,\n    posts: [],\n    totalPosts: 0,\n    editPost: null,\n    status: '',\n    postPage: 1,\n    postsLoading: true,\n    editLoading: false,\n    bucket:[],\n    reviewPost: false,\n    rating: 3,\n    oldRating: 3,\n    comment:'',\n    ratingTouched: false,\n    commentTouched: false,\n    reviewIsValid: false\n  };\n\n  componentDidMount() {\n    fetch('https://photography-spot-share.herokuapp.com/auth/status', {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Failed to fetch user status.');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({\n          status: resData.status\n        });\n      })\n      .catch(this.catchError);\n    \n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket', {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching bucket posts failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({\n          bucket: resData.bucket\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n    this.loadPosts();\n    const socket = openSocket('https://photography-spot-share.herokuapp.com');\n    socket.on('posts', data => {\n      if (data.action === 'delete') {\n        this.loadPosts();\n      } else if (data.action === 'update') {\n        this.updatePost(data.post);\n      }\n    });\n  }\n\n  addPost = post => {\n    this.setState(prevState => {\n      const updatedPosts = [...prevState.posts];\n      if (prevState.postPage === 1) {\n        if (prevState.posts.length >= 2) {\n          updatedPosts.pop();\n        }\n        updatedPosts.unshift(post);\n      }\n      return {\n        posts: updatedPosts,\n        totalPosts: prevState.totalPosts + 1\n      };\n    });\n  };\n\n  updatePost = post => {\n    this.setState(prevState => {\n      const updatedPosts = [...prevState.posts];\n      const updatedPostIndex = updatedPosts.findIndex(p => p._id === post._id);\n      if (updatedPostIndex > -1) {\n        updatedPosts[updatedPostIndex] = post;\n      }\n      return {\n        posts: updatedPosts\n      };\n    });\n  };\n\n  loadPosts = direction => {\n    if (direction) {\n      this.setState({ postsLoading: true, posts: [] });\n    }\n    let page = this.state.postPage;\n    if (direction === 'next') {\n      page++;\n      this.setState({ postPage: page });\n    }\n    if (direction === 'previous') {\n      page--;\n      this.setState({ postPage: page });\n    }\n    fetch('https://photography-spot-share.herokuapp.com/feed/posts?page=' + page, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Failed to fetch posts.');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        if (this.state.status === ''){\n          this.setState({\n            posts: resData.posts.map(post => {\n              return {\n                ...post,\n                imagePath: post.imageUrl\n              };\n            }),\n            totalPosts: resData.totalItems,\n            postsLoading: false\n          });\n        } else{\n          const posts = resData.posts.map(post => {\n            return {\n              ...post,\n              imagePath: post.imageUrl\n            };\n          });\n          const result = [];\n          const searchString = this.state.status;\n          for (var i = 0; i < posts.length; i++){\n            const post = posts[i];\n            if (post.title.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.content.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.location.text.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.location.place_name.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.ISO.toString().toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.shutter_speed.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.aperture.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.camera.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.lens.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.equipment.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.edit_soft.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n          }\n          this.setState({\n            posts: result,\n            totalPosts: result.length,\n            postsLoading: false\n          })\n        }\n        \n      })\n      .catch(this.catchError);\n  };\n\n  statusUpdateHandler = event => {\n    if (event !== undefined){\n      event.preventDefault();\n    };\n    fetch('https://photography-spot-share.herokuapp.com/auth/status', {\n      method: 'PATCH',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        status: this.state.status\n      })\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Can't update status!\");\n        }\n        return res.json();\n      })\n      .then(res => {\n        this.loadPosts();\n      })\n      .catch(this.catchError);\n  };\n\n  newPostHandler = () => {\n    this.setState({ isEditing: true });\n  };\n\n  startEditPostHandler = postId => {\n    this.setState(prevState => {\n      const loadedPost = { ...prevState.posts.find(p => p._id === postId) };\n\n      return {\n        isEditing: true,\n        editPost: loadedPost\n      };\n    });\n  };\n\n  cancelEditHandler = () => {\n    this.setState({ isEditing: false, editPost: null });\n  };\n\n  finishEditHandler = postData => {\n    this.setState({\n      editLoading: true\n    });\n    const formData = new FormData();\n    formData.append('title', postData.title);\n    formData.append('content', postData.content);\n    formData.append('image', postData.image);\n    formData.append('taken_date', postData.taken_date);\n    formData.append('location', JSON.stringify(postData.location));\n    formData.append('ISO', postData.ISO);\n    formData.append('shutter_speed', postData.shutter_speed);\n    formData.append('aperture', postData.aperture);\n    formData.append('camera', postData.camera);\n    formData.append('lens', postData.lens);\n    formData.append('equipment', postData.equipment);\n    formData.append('edit_soft', postData.edit_soft);\n    formData.append('user_rate', postData.user_rate);\n\n    let url = 'https://photography-spot-share.herokuapp.com/feed/posts';\n    let method = 'POST';\n    if (this.state.editPost) {\n      url = 'https://photography-spot-share.herokuapp.com/feed/post/' + this.state.editPost._id;\n      method = 'PUT';\n    }\n    fetch(url, {\n      method: method,\n      body: formData,\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Creating or editing a post failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState(prevState => {\n          return {\n            isEditing: false,\n            editPost: null,\n            editLoading: false\n          };\n        });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          isEditing: false,\n          editPost: null,\n          editLoading: false,\n          error: err\n        });\n      });\n  };\n\n  statusInputChangeHandler = (input, value) => {\n    this.setState({ status: value });\n  };\n\n  deletePostHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/feed/post/' + postId, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Deleting a post failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.loadPosts();\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ postsLoading: false });\n      });\n  };\n\n  bucketPostHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket/' + postId, {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Adding a post to bucket failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.loadPosts();\n        this.state.bucket.push(postId);\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ \n          postsLoading: false\n         });\n      });\n  };\n\n  bucketRemoveHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket/' + postId, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Deleting a post from bucket failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.loadPosts();\n        for (var i = 0; i < this.state.bucket.length; i++){\n          if (this.state.bucket[i] === postId){\n            this.state.bucket.splice(i, 1);\n          }\n        }\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ postsLoading: false });\n      });\n  };\n\n  errorHandler = () => {\n    this.setState({ error: null });\n  };\n\n  catchError = error => {\n    this.setState({ error: error });\n  };\n\n  startReviewHandler = postId => {\n    const userId = localStorage.getItem('userId');\n    fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n      method: 'GET',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching ratings failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        for (var i = 0; i < resData.ratings.length; i++){\n          if (resData.ratings[i].post === postId){\n            this.setState({\n              rating: resData.ratings[i].rating,\n              oldRating: resData.ratings[i].rating,\n              comment: resData.ratings[i].comment,\n              reviewIsValid: true,\n              ratingTouched: true,\n              commentTouched: true\n            });\n            break;\n          }\n        }\n      })\n      .then(res => {\n        this.setState({\n          reviewPost: postId\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  postCommentHandler = (value) => {\n    this.setState({\n      comment: value,\n      commentTouched: true,\n      reviewIsValid: this.state.ratingTouched\n    });\n  };\n  \n  postRatingChangeHandler = (value) => {\n    this.setState({\n      rating: value,\n      ratingTouched: true,\n      reviewIsValid: this.state.commentTouched\n    });\n  };\n\n  cancelReviewHandler = () => {\n    this.setState({\n      rating: 3,\n      ratingTouched: false,\n      commentTouched: false,\n      reviewIsValid: false,\n      reviewPost: false\n    });\n  };\n\n  acceptReviewHandler = async () => {\n    const userId = localStorage.getItem('userId');\n    this.setState({ postsLoading: true });\n    try{\n    const res = await fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        postId: this.state.reviewPost,\n        rating: this.state.rating,\n        comment: this.state.comment\n      })\n    })\n    if (res.status !== 200 && res.status !== 201) {\n      throw new Error('Adding a review failed!');\n    }\n    const Rez = await res.json();\n    const new_rating = !Rez.old_rating;\n    var newRatingId;\n    const res2 = await fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + this.props.token\n        }\n      })\n    if (res2.status !== 200 && res2.status !== 201) {\n        throw new Error('Fetching ratings failed!');\n    }\n    const resData = await res2.json();\n    console.log(resData);\n    for (var i = 0; i < resData.ratings.length; i++){\n      if (resData.ratings[i].post === this.state.reviewPost){\n        newRatingId = resData.ratings[i]._id;\n        break;\n      }\n    }\n    const res3 = await fetch('https://photography-spot-share.herokuapp.com/feed/rating/' + this.state.reviewPost, {\n          method: 'PATCH',\n          headers: {\n            Authorization: 'Bearer ' + this.props.token,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId: userId,\n            ratingId: newRatingId,\n            oldRating: this.state.oldRating,\n            newRating: new_rating,\n            value: this.state.rating\n          })\n        })\n    if (res3.status !== 200 && res3.status !== 201) {\n          throw new Error(\"Can't update review!\");\n    }\n    this.setState({\n      postsLoading: false,\n      rating: 3,\n      ratingTouched: false,\n      comment: '',\n      commentTouched: false,\n      reviewIsValid: false,\n      reviewPost: false\n    });\n    }catch (err){\n      console.log(err);\n      this.setState({ \n        postsLoading: false\n       });\n    }\n  }\n\n  clearSearchHandler = async () => {\n    await this.setState({\n      status: ''\n    });\n    this.statusUpdateHandler();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ReviewForm\n          reviewIsValid={this.state.reviewIsValid}\n          cancelReviewHandler={this.cancelReviewHandler}\n          acceptReviewHandler={this.acceptReviewHandler}\n          postRatingChangeHandler={this.postRatingChangeHandler}\n          rating={this.state.rating}\n          postReviewEditing={this.state.reviewPost}\n          comment={this.state.comment}\n          postCommentHandler={this.postCommentHandler}\n        />\n        <ErrorHandler error={this.state.error} onHandle={this.errorHandler} />\n        <FeedEdit\n          editing={this.state.isEditing}\n          selectedPost={this.state.editPost}\n          loading={this.state.editLoading}\n          onCancelEdit={this.cancelEditHandler}\n          onFinishEdit={this.finishEditHandler}\n        />\n        <section className=\"feed__status\">\n          <form onSubmit={this.statusUpdateHandler}>\n            <Input\n              type=\"text\"\n              placeholder=\"search for keywords...\"\n              control=\"input\"\n              onChange={this.statusInputChangeHandler}\n              value={this.state.status}\n            />\n            <Button mode=\"flat\" type=\"submit\">\n              Search!\n            </Button>\n            <Button mode=\"flat\" onClick={this.clearSearchHandler}>\n              Clear\n            </Button>\n          </form>\n        </section>\n        <section className=\"feed\">\n          {this.state.postsLoading && (\n            <div style={{ textAlign: 'center', marginTop: '2 rem' }}>\n              <Loader />\n            </div>\n          )}\n          {this.state.posts.length <= 0 && !this.state.postsLoading ? (\n            <p style={{ textAlign: 'center' }}>No posts found.</p>\n          ) : null}\n          {!this.state.postsLoading && (\n            <Paginator\n              onPrevious={this.loadPosts.bind(this, 'previous')}\n              onNext={this.loadPosts.bind(this, 'next')}\n              lastPage={Math.ceil(this.state.totalPosts / 2)}\n              currentPage={this.state.postPage}\n            >\n              {this.state.posts.map(post => (\n                <Post\n                  key={post._id}\n                  id={post._id}\n                  author={post.creator}\n                  date={new Date(post.createdAt).toLocaleDateString('en-US')}\n                  title={post.title}\n                  image={post.imageUrl}\n                  content={post.content}\n                  taken_date={post.taken_date}\n                  location={post.location}\n                  ISO={post.ISO}\n                  shutter_speed={post.shutter_speed}\n                  aperture={post.aperture}\n                  camera={post.camera}\n                  lens={post.lens}\n                  equipment={post.equipment}\n                  edit_soft={post.edit_soft}\n                  user_rate={post.user_rate}\n                  onStartEdit={this.startEditPostHandler.bind(this, post._id)}\n                  onDelete={this.deletePostHandler.bind(this, post._id)}\n                  onBucket={this.bucketPostHandler.bind(this, post._id)}\n                  offBucket={this.bucketRemoveHandler.bind(this, post._id)}\n                  userBucket={this.state.bucket}\n                  token={this.props.token}\n                  startReview={this.startReviewHandler.bind(this, post._id)}\n                />\n              ))}\n            </Paginator>\n          )}\n        </section>\n      </Fragment>\n    );\n  }\n}\n\nexport default Feed;\n","import React, { Component, Fragment } from 'react';\nimport openSocket from 'socket.io-client';\n\nimport Post from '../../components/Feed/Post/Post';\nimport Button from '../../components/Button/Button';\nimport FeedEdit from '../../components/Feed/FeedEdit/FeedEdit';\nimport Input from '../../components/Form/Input/Input';\nimport Paginator from '../../components/Paginator/Paginator';\nimport Loader from '../../components/Loader/Loader';\nimport ErrorHandler from '../../components/ErrorHandler/ErrorHandler';\nimport './Profile.css';\nimport ReviewForm from '../../components/Form/ReviewForm';\n\nclass Feed extends Component {\n  state = {\n    isEditing: false,\n    posts: [],\n    totalPosts: 0,\n    editPost: null,\n    status: '',\n    postPage: 1,\n    postsLoading: true,\n    editLoading: false,\n    bucket:[],\n    isNewPost: false,\n    reviewPost: false,\n    rating: 3,\n    oldRating: 3,\n    comment:'',\n    ratingTouched: false,\n    commentTouched: false,\n    reviewIsValid: false\n  };\n\n  componentDidMount() {\n    fetch('https://photography-spot-share.herokuapp.com/auth/status', {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Failed to fetch user status.');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({ \n          status: resData.status });\n      })\n      .catch(this.catchError);\n    \n      fetch('https://photography-spot-share.herokuapp.com/auth/bucket', {\n        headers: {\n          Authorization: 'Bearer ' + this.props.token\n        }\n      })\n        .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            throw new Error('Fetching bucket posts failed!');\n          }\n          return res.json();\n        })\n        .then(resData => {\n          this.setState({\n            bucket: resData.bucket\n          });\n        })\n        .catch(err => {\n          console.log(err);\n        });  \n    this.loadPosts();\n    const socket = openSocket('https://photography-spot-share.herokuapp.com');\n    socket.on('posts', data => {\n      if (data.action === 'create') {\n        this.addPost(data.post);\n      } else if (data.action === 'update') {\n        this.updatePost(data.post);\n      } else if (data.action === 'delete') {\n        this.loadPosts();\n      }\n    });\n  }\n\n  addPost = post => {\n    this.setState(prevState => {\n      const updatedPosts = [...prevState.posts];\n      if (prevState.postPage === 1) {\n        if (prevState.posts.length >= 2) {\n          updatedPosts.pop();\n        }\n        updatedPosts.unshift(post);\n      }\n      return {\n        posts: updatedPosts,\n        totalPosts: prevState.totalPosts + 1\n      };\n    });\n  };\n\n  updatePost = post => {\n    this.setState(prevState => {\n      const updatedPosts = [...prevState.posts];\n      const updatedPostIndex = updatedPosts.findIndex(p => p._id === post._id);\n      if (updatedPostIndex > -1) {\n        updatedPosts[updatedPostIndex] = post;\n      }\n      return {\n        posts: updatedPosts\n      };\n    });\n  };\n\n  loadPosts = direction => {\n    if (direction) {\n      this.setState({ postsLoading: true, posts: [] });\n    }\n    let page = this.state.postPage;\n    if (direction === 'next') {\n      page++;\n      this.setState({ postPage: page });\n    }\n    if (direction === 'previous') {\n      page--;\n      this.setState({ postPage: page });\n    }\n    fetch('https://photography-spot-share.herokuapp.com/feed/posts?page=' + page, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Failed to fetch posts.');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        return {\n            ...resData,\n            posts: resData.posts.filter(\n                post => this.props.userId === post.creator._id\n              )\n        }\n    })\n      .then(resData => {\n        if (this.state.status === ''){\n          this.setState({\n            posts: resData.posts.map(post => {\n              return {\n                ...post,\n                imagePath: post.imageUrl\n              };\n            }),\n            totalPosts: resData.totalItems,\n            postsLoading: false\n          });\n        }else{\n          const posts = resData.posts.map(post => {\n            return {\n              ...post,\n              imagePath: post.imageUrl\n            };\n          });\n          const result = [];\n          const searchString = this.state.status;\n          for (var i = 0; i < posts.length; i++){\n            const post = posts[i];\n            if (post.title.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.content.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.location.text.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.location.place_name.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.ISO.toString().toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.shutter_speed.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.aperture.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.camera.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.lens.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.equipment.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.edit_soft.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n          }\n          this.setState({\n            posts: result,\n            totalPosts: result.length,\n            postsLoading: false\n          })\n        }\n      })\n      .catch(this.catchError);\n  };\n\n  statusUpdateHandler = event => {\n    if (event !== undefined){\n      event.preventDefault();\n    };\n    fetch('https://photography-spot-share.herokuapp.com/auth/status', {\n      method: 'PATCH',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        status: this.state.status\n      })\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Can't update status!\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.loadPosts();      })\n      .catch(this.catchError);\n  };\n\n  newPostHandler = () => {\n    this.setState({ \n      isNewPost: true,\n      isEditing: true });\n  };\n\n  startEditPostHandler = postId => {\n    this.setState(prevState => {\n      const loadedPost = { ...prevState.posts.find(p => p._id === postId) };\n\n      return {\n        isEditing: true,\n        editPost: loadedPost\n      };\n    });\n  };\n\n  cancelEditHandler = () => {\n    this.setState({ isEditing: false, editPost: null });\n  };\n\n  bucketPostHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket/' + postId, {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Adding a post to bucket failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.loadPosts();\n        this.state.bucket.push(postId);\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ \n          postsLoading: false\n         });\n      });\n  };\n\n  bucketRemoveHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket/' + postId, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Deleting a post from bucket failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.loadPosts();\n        for (var i = 0; i < this.state.bucket.length; i++){\n          if (this.state.bucket[i] === postId){\n            this.state.bucket.splice(i, 1);\n          }\n        }\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ postsLoading: false });\n      });\n  };\n\n  finishEditHandler = postData => {\n    this.setState({\n      editLoading: true\n    });\n    const formData = new FormData();\n    formData.append('title', postData.title);\n    formData.append('content', postData.content);\n    formData.append('image', postData.image);\n    formData.append('taken_date', postData.taken_date);\n    formData.append('location', JSON.stringify(postData.location));\n    formData.append('ISO', postData.ISO);\n    formData.append('shutter_speed', postData.shutter_speed);\n    formData.append('aperture', postData.aperture);\n    formData.append('camera', postData.camera);\n    formData.append('lens', postData.lens);\n    formData.append('equipment', postData.equipment);\n    formData.append('edit_soft', postData.edit_soft);\n    formData.append('user_rate', postData.user_rate);\n    \n    let url = 'https://photography-spot-share.herokuapp.com/feed/posts';\n    let method = 'POST';\n    if (this.state.editPost) {\n      url = 'https://photography-spot-share.herokuapp.com/feed/post/' + this.state.editPost._id;\n      method = 'PUT';\n    }\n\n    fetch(url, {\n      method: method,\n      body: formData,\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Creating or editing a post failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState(prevState => {\n          return {\n            isEditing: false,\n            editPost: null,\n            editLoading: false\n          };\n        });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          isEditing: false,\n          editPost: null,\n          editLoading: false,\n          error: err\n        });\n      });\n  };\n\n  statusInputChangeHandler = (input, value) => {\n    this.setState({ status: value });\n  };\n\n  deletePostHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/feed/post/' + postId, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Deleting a post failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.loadPosts();\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ postsLoading: false });\n      });\n  };\n\n  errorHandler = () => {\n    this.setState({ error: null });\n  };\n\n  catchError = error => {\n    this.setState({ error: error });\n  };\n\n\n  startReviewHandler = postId => {\n    const userId = localStorage.getItem('userId');\n    fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n      method: 'GET',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching ratings failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        for (var i = 0; i < resData.ratings.length; i++){\n          if (resData.ratings[i].post === postId){\n            this.setState({\n              rating: resData.ratings[i].rating,\n              oldRating: resData.ratings[i].rating,\n              comment: resData.ratings[i].comment,\n              reviewIsValid: true,\n              ratingTouched: true,\n              commentTouched: true\n            });\n            break;\n          }\n        }\n      })\n      .then(res => {\n        this.setState({\n          reviewPost: postId\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  postCommentHandler = (value) => {\n    this.setState({\n      comment: value,\n      commentTouched: true,\n      reviewIsValid: this.state.ratingTouched\n    });\n  };\n  \n  postRatingChangeHandler = (value) => {\n    this.setState({\n      rating: value,\n      ratingTouched: true,\n      reviewIsValid: this.state.commentTouched\n    });\n  };\n\n  cancelReviewHandler = () => {\n    this.setState({\n      rating: 3,\n      ratingTouched: false,\n      commentTouched: false,\n      reviewIsValid: false,\n      reviewPost: false\n    });\n  };\n\n  acceptReviewHandler = async () => {\n    const userId = localStorage.getItem('userId');\n    this.setState({ postsLoading: true });\n    try{\n    const res = await fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        postId: this.state.reviewPost,\n        rating: this.state.rating,\n        comment: this.state.comment\n      })\n    })\n    if (res.status !== 200 && res.status !== 201) {\n      throw new Error('Adding a review failed!');\n    }\n    const Rez = await res.json();\n    const new_rating = !Rez.old_rating;\n    var newRatingId;\n    const res2 = await fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + this.props.token\n        }\n      })\n    if (res2.status !== 200 && res2.status !== 201) {\n        throw new Error('Fetching ratings failed!');\n    }\n    const resData = await res2.json();\n    for (var i = 0; i < resData.ratings.length; i++){\n      if (resData.ratings[i].post === this.state.reviewPost){\n        newRatingId = resData.ratings[i]._id;\n        break;\n      }\n    }\n    const res3 = await fetch('https://photography-spot-share.herokuapp.com/feed/rating/' + this.state.reviewPost, {\n          method: 'PATCH',\n          headers: {\n            Authorization: 'Bearer ' + this.props.token,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId: userId,\n            ratingId: newRatingId,\n            oldRating: this.state.oldRating,\n            newRating: new_rating,\n            value: this.state.rating\n          })\n        })\n    if (res3.status !== 200 && res3.status !== 201) {\n          throw new Error(\"Can't update review!\");\n    }\n    this.setState({\n      postsLoading: false,\n      rating: 3,\n      ratingTouched: false,\n      comment: '',\n      commentTouched: false,\n      reviewIsValid: false,\n      reviewPost: false\n    });\n    }catch (err){\n      console.log(err);\n      this.setState({ \n        postsLoading: false\n       });\n    }\n  }\n\n  clearSearchHandler = async () => {\n    await this.setState({\n      status: ''\n    });\n    this.statusUpdateHandler();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ReviewForm\n          reviewIsValid={this.state.reviewIsValid}\n          cancelReviewHandler={this.cancelReviewHandler}\n          acceptReviewHandler={this.acceptReviewHandler}\n          postRatingChangeHandler={this.postRatingChangeHandler}\n          rating={this.state.rating}\n          postReviewEditing={this.state.reviewPost}\n          comment={this.state.comment}\n          postCommentHandler={this.postCommentHandler}\n        />\n        <ErrorHandler error={this.state.error} onHandle={this.errorHandler} />\n        <FeedEdit\n          editing={this.state.isEditing}\n          selectedPost={this.state.editPost}\n          loading={this.state.editLoading}\n          onCancelEdit={this.cancelEditHandler}\n          onFinishEdit={this.finishEditHandler}\n          isNewPost={this.state.isNewPost}\n        />\n        <section className=\"feed__status\">\n          <form onSubmit={this.statusUpdateHandler}>\n            <Input\n              type=\"text\"\n              placeholder=\"search for keywords...\"\n              control=\"input\"\n              onChange={this.statusInputChangeHandler}\n              value={this.state.status}\n            />\n            <Button mode=\"flat\" type=\"submit\">\n              Search!\n            </Button>\n            <Button mode=\"flat\" onClick={this.clearSearchHandler}>\n              Clear\n            </Button>\n          </form>\n        </section>\n        <section className=\"feed__control\">\n          <Button mode=\"raised\" design=\"accent\" onClick={this.newPostHandler}>\n            New Post\n          </Button>\n        </section>\n        <section className=\"feed\">\n          {this.state.postsLoading && (\n            <div style={{ textAlign: 'center', marginTop: '2 rem' }}>\n              <Loader />\n            </div>\n          )}\n          {this.state.posts.length <= 0 && !this.state.postsLoading ? (\n            <p style={{ textAlign: 'center' }}>No posts found.</p>\n          ) : null}\n          {!this.state.postsLoading && (\n            <Paginator\n              onPrevious={this.loadPosts.bind(this, 'previous')}\n              onNext={this.loadPosts.bind(this, 'next')}\n              lastPage={Math.ceil(this.state.totalPosts / 2)}\n              currentPage={this.state.postPage}\n            >\n              {this.state.posts.map(post => (\n                <Post\n                  key={post._id}\n                  id={post._id}\n                  author={post.creator}\n                  date={new Date(post.createdAt).toLocaleDateString('en-US')}\n                  title={post.title}\n                  image={post.imageUrl}\n                  content={post.content}\n                  taken_date={post.taken_date}\n                  location={post.location}\n                  ISO={post.ISO}\n                  shutter_speed={post.shutter_speed}\n                  aperture={post.aperture}\n                  camera={post.camera}\n                  lens={post.lens}\n                  equipment={post.equipment}\n                  edit_soft={post.edit_soft}\n                  user_rate={post.user_rate}\n                  onStartEdit={this.startEditPostHandler.bind(this, post._id)}\n                  onDelete={this.deletePostHandler.bind(this, post._id)}\n                  onBucket={this.bucketPostHandler.bind(this, post._id)}\n                  offBucket={this.bucketRemoveHandler.bind(this, post._id)}\n                  userBucket={this.state.bucket}\n                  token={this.props.token}\n                  startReview={this.startReviewHandler.bind(this, post._id)}\n                />\n              ))}\n            </Paginator>\n          )}\n        </section>\n      </Fragment>\n    );\n  }\n}\n\nexport default Feed;\n","import React, { Component } from 'react';\nimport openSocket from 'socket.io-client';\nimport {Redirect} from 'react-router-dom';\n\nimport Button from '../../components/Button/Button';\nimport Input from '../../components/Form/Input/Input';\nimport './Ranking.css';\nimport {Table} from 'react-bootstrap';\nimport { Link } from 'react-router-dom';\nimport Loader from '../../components/Loader/Loader';\n\nclass Feed extends Component {\n  state = {\n    isEditing: false,\n    posts: [],\n    totalPosts: 0,\n    editPost: null,\n    status: '',\n    postPage: 1,\n    postsLoading: true,\n    editLoading: false,\n    bucket:[],\n    reviewPost: false,\n    rating: 3,\n    comment:'',\n    ratingTouched: false,\n    commentTouched: false,\n    reviewIsValid: false,\n    show_post_limit: 3,\n    show_post_limit_region: 3,\n    posts_to_display: [],\n    regionRatings: [],\n    redirected: false\n  };\n\n  componentDidMount() {\n    fetch('https://photography-spot-share.herokuapp.com/auth/status', {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Failed to fetch user status.');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({\n          status: resData.status\n        });\n      })\n      .catch(this.catchError);\n    \n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket', {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching bucket posts failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({\n          bucket: resData.bucket\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n    this.loadPosts();\n    const socket = openSocket('https://photography-spot-share.herokuapp.com');\n    socket.on('posts', data => {\n      if (data.action === 'create') {\n        this.addPost(data.post);\n      } else if (data.action === 'update') {\n        this.updatePost(data.post);\n      } else if (data.action === 'delete') {\n        this.loadPosts();\n      }\n    });\n  }\n\n  addPost = post => {\n    this.setState(prevState => {\n      const updatedPosts = [...prevState.posts];\n      if (prevState.postPage === 1) {\n        if (prevState.posts.length >= 2) {\n          updatedPosts.pop();\n        }\n        updatedPosts.unshift(post);\n      }\n      return {\n        posts: updatedPosts,\n        totalPosts: prevState.totalPosts + 1\n      };\n    });\n  };\n\n  updatePost = post => {\n    this.setState(prevState => {\n      const updatedPosts = [...prevState.posts];\n      const updatedPostIndex = updatedPosts.findIndex(p => p._id === post._id);\n      if (updatedPostIndex > -1) {\n        updatedPosts[updatedPostIndex] = post;\n      }\n      return {\n        posts: updatedPosts\n      };\n    });\n  };\n\n  loadPosts = direction => {\n    if (direction) {\n      this.setState({ postsLoading: true, posts: [] });\n    }\n    let page = this.state.postPage;\n    if (direction === 'next') {\n      page++;\n      this.setState({ postPage: page });\n    }\n    if (direction === 'previous') {\n      page--;\n      this.setState({ postPage: page });\n    }\n    fetch('https://photography-spot-share.herokuapp.com/feed/all-posts', {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Failed to fetch posts.');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        if (this.state.status === ''){\n          this.setState({\n            posts: resData.posts.map(post => {\n              return {\n                ...post,\n                imagePath: post.imageUrl\n              };\n            }),\n            totalPosts: resData.totalItems,\n            postsLoading: false\n          });\n        } else{\n          const posts = resData.posts.map(post => {\n            return {\n              ...post,\n              imagePath: post.imageUrl\n            };\n          });\n          const result = [];\n          const searchString = this.state.status;\n          for (var i = 0; i < posts.length; i++){\n            const post = posts[i];\n            if (post.title.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.content.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.location.text.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.location.place_name.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.ISO.toString().toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.shutter_speed.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.aperture.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.camera.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.lens.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.equipment.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.edit_soft.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n          }\n          this.setState({\n            posts: result,\n            totalPosts: result.length,\n            postsLoading: false\n          })\n        }\n      })\n      .then(res => {\n        const posts = this.state.posts;\n        var regions = {};\n        posts.forEach(post => {\n            const len = post.location.context.length;\n            const regionKey = post.location.context[len - 2].text;\n            if (Object.keys(regions).includes(regionKey)){\n                regions[regionKey].push(post);\n            } else {\n                regions[regionKey] = [post];\n            }\n        });\n        var regionRatings = [];\n        const regionKeys = Object.keys(regions);\n        regionKeys.forEach(region => {\n            const regionPosts = regions[region];\n            const regionName = region;\n            var sum = 0;\n            var num = 0;\n            regionPosts.forEach(post => {\n                num = num + post.rating_num;\n                sum = sum + (post.rating_num) * (post.rating);\n            });\n            var avgRating;\n            if (num !== 0){\n                avgRating = sum/num;\n            }else{\n                avgRating = 0;\n            }\n            const len = regionPosts[0].location.context.length;\n            const country = regionPosts[0].location.context[len - 1].text;\n            const result = {\n                region: regionName,\n                country: country,\n                avgRating: avgRating\n            }\n            regionRatings.push(result);\n        });\n        this.setState({\n            regionRatings: regionRatings\n        })\n    })\n      .catch(this.catchError);\n  };\n\n  statusUpdateHandler = event => {\n    if (event !== undefined){\n      event.preventDefault();\n    };\n    fetch('https://photography-spot-share.herokuapp.com/auth/status', {\n      method: 'PATCH',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        status: this.state.status\n      })\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Can't update status!\");\n        }\n        return res.json();\n      })\n      .then(res => {\n        this.loadPosts();\n      })\n      .catch(this.catchError);\n  };\n\n  newPostHandler = () => {\n    this.setState({ isEditing: true });\n  };\n\n  startEditPostHandler = postId => {\n    this.setState(prevState => {\n      const loadedPost = { ...prevState.posts.find(p => p._id === postId) };\n\n      return {\n        isEditing: true,\n        editPost: loadedPost\n      };\n    });\n  };\n\n  cancelEditHandler = () => {\n    this.setState({ isEditing: false, editPost: null });\n  };\n\n  finishEditHandler = postData => {\n    this.setState({\n      editLoading: true\n    });\n    const formData = new FormData();\n    formData.append('title', postData.title);\n    formData.append('content', postData.content);\n    formData.append('image', postData.image);\n    formData.append('taken_date', postData.taken_date);\n    formData.append('location', JSON.stringify(postData.location));\n    formData.append('ISO', postData.ISO);\n    formData.append('shutter_speed', postData.shutter_speed);\n    formData.append('aperture', postData.aperture);\n    formData.append('camera', postData.camera);\n    formData.append('lens', postData.lens);\n    formData.append('equipment', postData.equipment);\n    formData.append('edit_soft', postData.edit_soft);\n    formData.append('user_rate', postData.user_rate);\n\n    let url = 'https://photography-spot-share.herokuapp.com/feed/posts';\n    let method = 'POST';\n    if (this.state.editPost) {\n      url = 'https://photography-spot-share.herokuapp.com/feed/post/' + this.state.editPost._id;\n      method = 'PUT';\n    }\n    fetch(url, {\n      method: method,\n      body: formData,\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Creating or editing a post failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState(prevState => {\n          return {\n            isEditing: false,\n            editPost: null,\n            editLoading: false\n          };\n        });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          isEditing: false,\n          editPost: null,\n          editLoading: false,\n          error: err\n        });\n      });\n  };\n\n  statusInputChangeHandler = (input, value) => {\n    this.setState({ status: value });\n  };\n\n  deletePostHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/feed/post/' + postId, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Deleting a post failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.loadPosts();\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ postsLoading: false });\n      });\n  };\n\n  bucketPostHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket/' + postId, {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Adding a post to bucket failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.loadPosts();\n        this.state.bucket.push(postId);\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ \n          postsLoading: false\n         });\n      });\n  };\n\n  bucketRemoveHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket/' + postId, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Deleting a post from bucket failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.loadPosts();\n        for (var i = 0; i < this.state.bucket.length; i++){\n          if (this.state.bucket[i] === postId){\n            this.state.bucket.splice(i, 1);\n          }\n        }\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ postsLoading: false });\n      });\n  };\n\n  errorHandler = () => {\n    this.setState({ error: null });\n  };\n\n  catchError = error => {\n    this.setState({ error: error });\n  };\n\n  startReviewHandler = postId => {\n    const userId = localStorage.getItem('userId');\n    fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n      method: 'GET',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching ratings failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        for (var i = 0; i < resData.ratings.length; i++){\n          if (resData.ratings[i].post === postId){\n            this.setState({\n              rating: resData.ratings[i].rating,\n              comment: resData.ratings[i].comment,\n              reviewIsValid: true,\n              ratingTouched: true,\n              commentTouched: true\n            });\n            break;\n          }\n        }\n      })\n      .then(res => {\n        this.setState({\n          reviewPost: postId\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  postCommentHandler = (value) => {\n    this.setState({\n      comment: value,\n      commentTouched: true,\n      reviewIsValid: this.state.ratingTouched\n    });\n  };\n  \n  postRatingChangeHandler = (value) => {\n    this.setState({\n      rating: value,\n      ratingTouched: true,\n      reviewIsValid: this.state.commentTouched\n    });\n  };\n\n  cancelReviewHandler = () => {\n    this.setState({\n      rating: 3,\n      ratingTouched: false,\n      commentTouched: false,\n      reviewIsValid: false,\n      reviewPost: false\n    });\n  };\n\n  acceptReviewHandler = async () => {\n    const userId = localStorage.getItem('userId');\n    this.setState({ postsLoading: true });\n    try{\n    const res = await fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        postId: this.state.reviewPost,\n        rating: this.state.rating,\n        comment: this.state.comment\n      })\n    })\n    if (res.status !== 200 && res.status !== 201) {\n      throw new Error('Adding a review failed!');\n    }\n    var newRatingId;\n    const res2 = await fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + this.props.token\n        }\n      })\n    if (res2.status !== 200 && res2.status !== 201) {\n        throw new Error('Fetching ratings failed!');\n    }\n    const resData = await res2.json();\n    console.log(resData);\n    for (var i = 0; i < resData.ratings.length; i++){\n      if (resData.ratings[i].post === this.state.reviewPost){\n        newRatingId = resData.ratings[i]._id;\n        console.log(newRatingId);\n        break;\n      }\n    }\n    const res3 = await fetch('https://photography-spot-share.herokuapp.com/feed/rating/' + this.state.reviewPost, {\n          method: 'PATCH',\n          headers: {\n            Authorization: 'Bearer ' + this.props.token,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId: userId,\n            ratingId: newRatingId\n          })\n        })\n    if (res3.status !== 200 && res3.status !== 201) {\n          throw new Error(\"Can't update review!\");\n    }\n    this.setState({\n      postsLoading: false,\n      rating: 3,\n      ratingTouched: false,\n      comment: '',\n      commentTouched: false,\n      reviewIsValid: false,\n      reviewPost: false\n    });\n    }catch (err){\n      console.log(err);\n      this.setState({ \n        postsLoading: false\n       });\n    }\n  }\n\n  clearSearchHandler = async () => {\n    await this.setState({\n      status: ''\n    });\n    this.statusUpdateHandler();\n  }\n\n  renderTopPostData = () => {\n    let posts_copy = JSON.parse(JSON.stringify(this.state.posts));\n    return posts_copy\n        .sort(function(a, b){return b.rating - a.rating;})\n        .splice(0, this.state.show_post_limit)\n        .map(post => (\n          <tr key={post._id} style={{borderLeft: \"5px solid #134f2d\"}}>\n            <td>{post.title}</td>\n            <td><img \n                  src={'https://photography-spot-share.herokuapp.com/' + post.imageUrl}\n                  alt={post.title}\n                  className='thumbnail'/></td>\n            <td>{post.location.text}</td>\n            <td>{this.ratingHelper(post.rating)}</td>\n            <td>{post.creator.name}</td>\n            <td>\n              <Link to={post._id}>\n                <Button mode=\"flat\">\n                View\n                </Button>\n              </Link>\n            </td>\n          </tr>\n        ))\n  }\n\n  ratingHelper = rating => {\n    if (rating === 0){\n      return 'None';\n    }else{\n      return rating;\n    }\n  }\n\n  renderTopRegionData = () => {\n    let regions_copy = JSON.parse(JSON.stringify(this.state.regionRatings));\n    return regions_copy\n        .sort(function(a, b){return b.avgRating - a.avgRating;})\n        .splice(0, this.state.show_post_limit_region)\n        .map(region => (\n          <tr key={region.region} style={{borderLeft: \"5px solid #134f2d\"}}>\n            <td>{region.region}</td>\n            <td>{region.country}</td>\n            <td>{region.avgRating}</td>\n            <td>\n              <Button \n                  mode=\"flat\" \n                  onClick={async () => {\n                    await this.setState({status: region.region});\n                    await this.statusUpdateHandler();\n                    this.setState({redirected: true});\n                  }}>\n                Search\n              </Button>\n            </td>\n          </tr>\n        ))\n  }\n  \nrender () {\n    if (this.state.posts.length === 0){\n        return <Loader />;\n    }\n    if (this.state.redirected){\n      return <Redirect to='/' />\n    }\n    return ([\n        (\n        <section className=\"feed__status\" key='search' style={{textAlign: \"center\"}}>\n            <form onSubmit={this.statusUpdateHandler}>\n              <Input\n                type=\"text\"\n                placeholder=\"search for keywords...\"\n                control=\"input\"\n                onChange={this.statusInputChangeHandler}\n                value={this.state.status}\n              />\n              <Button mode=\"flat\" type=\"submit\">\n                Search!\n              </Button>\n              <Button mode=\"flat\" onClick={this.clearSearchHandler}>\n                Clear\n              </Button>\n            </form>\n          </section>\n        ),\n        (<div key='title' style={{textAlign: 'center', paddingTop: '3rem'}}>\n            <h2>Top-rated Posts:</h2>\n        </div>), \n        (<div key='topratepost' style={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            paddingBottom: '2rem',\n            paddingLeft: '2rem',\n            paddingRight: '2rem',\n            textAlign: \"center\"}}>\n             <Table striped bordered hover>\n              <thead>\n                <tr>\n                  <th>Post</th>\n                  <th>Preview</th>\n                  <th>Location</th>\n                  <th>Public Rating</th>\n                  <th>Author</th>\n                  <th>View</th>\n                </tr>\n              </thead>\n                <tbody>\n                   {this.renderTopPostData()}\n                </tbody>\n             </Table>\n          </div>\n       ),\n            (\n            <div key='moreButton' style={{textAlign: 'center', padding: '1rem'}}>\n                <Button \n                    mode=\"flat\" \n                    onClick={() => {\n                        this.setState({\n                        show_post_limit: this.state.show_post_limit + 3\n                    })}}>\n                        More\n                </Button>\n            </div>\n          ),\n        (<div key='title-geo' style={{textAlign: 'center', paddingTop: '3rem'}}>\n            <h2>Top-rated Regions:</h2>\n            </div>),\n        (<div key='toprategeo' style={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          paddingBottom: '2rem',\n          paddingLeft: '2rem',\n          paddingRight: '2rem',\n          textAlign: \"center\"}}>\n           <Table striped bordered hover>\n            <thead>\n              <tr>\n                <th>Region</th>\n                <th>Country</th>\n                <th>Average Rating</th>\n                <th>Filter</th>\n              </tr>\n            </thead>\n              <tbody>\n                 {this.renderTopRegionData()}\n              </tbody>\n           </Table>\n        </div>\n     ),\n        (\n            <div key='moreButtonRegion' style={{textAlign: 'center', padding: '1rem'}}>\n                <Button \n                    mode=\"flat\" \n                    onClick={() => {\n                        this.setState({\n                            show_post_limit_region: this.state.show_post_limit_region + 3\n                    })}}>\n                        More\n                </Button>\n            </div>\n          )\n        ]);\n  }\n}\n\nexport default Feed;\n","import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { Card, Button, ButtonGroup } from 'react-bootstrap';\nimport './pin.css';\n\nclass pin extends Component {\n    state = {\n        cardReveal: false\n    };\n\n    Card = () => {\n        return (\n            <Card style={{ width: '10rem' }}>\n                <Card.Img\n                    variant=\"top\"\n                    src={'https://photography-spot-share.herokuapp.com/' + this.props.image}\n                    alt={this.props.title} />\n                <Card.Body>\n                    <Card.Title className='title'>{this.props.title}</Card.Title>\n                    <Card.Text className='location'>{this.props.location}</Card.Text>\n                    <ButtonGroup>\n                        <Link to={this.props.id}>\n                            <Button size=\"sm\" variant=\"outline-dark\">\n                                View\n                            </Button>\n                        </Link>\n                        <Button size=\"sm\" variant=\"outline-dark\" className='closeButton' onClick={() => {\n                           this.setState({\n                                cardReveal: false\n                            });\n                        }}>\n                            Close\n                        </Button>\n                    </ButtonGroup>\n                </Card.Body>\n            </Card>\n        )\n    };\n\n    render() {\n        return (\n            <div className=\"pin\">\n                <img\n                    src={\"cam_marker.png\"}\n                    alt='Spot'\n                    style={{ width: '30px', height: '100%' }}\n                    onClick={() => {\n                        this.setState({\n                            cardReveal: (!this.state.cardReveal)\n                        });\n                    }}\n                />\n                {this.state.cardReveal ? this.Card() : null}\n            </div>)\n    };\n};\n\nexport default pin;\n","import React, { Component } from 'react';\nimport openSocket from 'socket.io-client';\n\nimport Loader from '../../components/Loader/Loader';\nimport \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";\nimport ReactMapGL, {Marker} from \"react-map-gl\";\nimport Pin from '../../components/Pin/pin';\n\nconst MAPBOX_TOKEN = \"pk.eyJ1IjoieTI2MmhhbiIsImEiOiJjanozamU2bmkwMzJ5M2d0Nm84ZW5meHhzIn0.L1kW4Q7vNyX0fCJJEYI5PA\";\n\nclass Map extends Component {\n  state = {\n    isEditing: false,\n    spots: [],\n    postsLoading: true,\n    viewport: {\n          width: '800px',\n          height: '400px',\n          latitude: 44.161,\n          longitude: -98.464,\n          zoom: 2\n        }\n  };\n\n  componentDidMount() {\n      fetch('https://photography-spot-share.herokuapp.com/auth/bucket', {\n        headers: {\n          Authorization: 'Bearer ' + this.props.token\n        }\n      })\n        .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            throw new Error('Fetching bucket posts failed!');\n          }\n          return res.json();\n        })\n        .then(resData => {\n          this.setState({\n            bucket: resData.bucket\n          });\n        })\n        .catch(err => {\n          console.log(err);\n        });  \n    this.loadPosts();\n    const socket = openSocket('https://photography-spot-share.herokuapp.com');\n    socket.on('posts', data => {\n      if (data.action === 'update') {\n        this.updatePost(data.post);\n      } else if (data.action === 'delete') {\n        this.loadPosts();\n      }\n    });\n  }\n\n  loadPosts = () => {\n    fetch('https://photography-spot-share.herokuapp.com/feed/all-posts', {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Failed to fetch posts.');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        return {\n            ...resData,\n            posts: resData.posts.filter(\n                post => this.state.bucket.includes(post._id)\n              )\n        }\n    })\n      .then(resData => {\n        this.setState({\n        spots: resData.posts.map(post => {\n            return {\n              ...post,\n              imagePath: post.imageUrl\n            };\n          }),\n          postsLoading: false\n        });\n      })\n      .catch(this.catchError);\n  };\n\n  createMarkers = () => {\n    let markers = []\n    for (let i = 0; i < this.state.spots.length; i++){\n        markers.push(\n            <Marker \n                latitude={this.state.spots[i].location.center[1]} \n                longitude={this.state.spots[i].location.center[0]}\n                offsetLeft={-15}\n                offsetTop={-30}\n                key={i}>\n                <div>\n                <Pin \n                    key={i}\n                    title={this.state.spots[i].title}\n                    image={this.state.spots[i].imageUrl}\n                    location={this.state.spots[i].location.text}\n                    id={this.state.spots[i]._id}/>\n                </div>\n            </Marker>\n        );\n    }\n    return markers;\n  }\n\n  render() {\n    if (this.state.postsLoading){\n        return <Loader />\n    }\n    return (\n    <div style={{textAlign: 'center'}}>\n    <h2>Bucket List Locations:</h2>\n    <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        textAlign: 'center'\n      }}>\n        <ReactMapGL\n            {...this.state.viewport}\n            onViewportChange={(viewport) => this.setState({viewport})}\n            mapboxApiAccessToken={MAPBOX_TOKEN}\n            mapStyle='mapbox://styles/y262han/cjz3kx9a80fby1cr3d8oydttt'\n        >\n        {this.createMarkers()}\n        </ReactMapGL>\n      </div></div>\n    );\n  }\n}\n\nexport default Map;","import React, { Component, Fragment } from 'react';\nimport openSocket from 'socket.io-client';\n\nimport Post from '../../components/Feed/Post/Post';\nimport Button from '../../components/Button/Button';\nimport FeedEdit from '../../components/Feed/FeedEdit/FeedEdit';\nimport Input from '../../components/Form/Input/Input';\nimport Paginator from '../../components/Paginator/Paginator';\nimport Loader from '../../components/Loader/Loader';\nimport ErrorHandler from '../../components/ErrorHandler/ErrorHandler';\nimport './Bucket.css';\nimport ReviewForm from '../../components/Form/ReviewForm';\n\nclass Feed extends Component {\n  state = {\n    isEditing: false,\n    posts: [],\n    totalPosts: 0,\n    editPost: null,\n    status: '',\n    postPage: 1,\n    postsLoading: true,\n    editLoading: false,\n    bucket:[],\n    reviewPost: false,\n    rating: 3,\n    oldRating: 3,\n    comment:'',\n    ratingTouched: false,\n    commentTouched: false,\n    reviewIsValid: false\n  };\n\n  componentDidMount() {\n    fetch('https://photography-spot-share.herokuapp.com/auth/status', {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Failed to fetch user status.');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({ \n          status: resData.status });\n      })\n      .catch(this.catchError);\n    \n      fetch('https://photography-spot-share.herokuapp.com/auth/bucket', {\n        headers: {\n          Authorization: 'Bearer ' + this.props.token\n        }\n      })\n        .then(res => {\n          if (res.status !== 200 && res.status !== 201) {\n            throw new Error('Fetching bucket posts failed!');\n          }\n          return res.json();\n        })\n        .then(resData => {\n          this.setState({\n            bucket: resData.bucket\n          });\n        })\n        .catch(err => {\n          console.log(err);\n        });  \n    this.loadPosts();\n    const socket = openSocket('https://photography-spot-share.herokuapp.com');\n    socket.on('posts', data => {\n      if (data.action === 'create') {\n        this.addPost(data.post);\n      } else if (data.action === 'update') {\n        this.updatePost(data.post);\n      } else if (data.action === 'delete') {\n        this.loadPosts();\n      }\n    });\n  }\n\n  addPost = post => {\n    this.setState(prevState => {\n      const updatedPosts = [...prevState.posts];\n      if (prevState.postPage === 1) {\n        if (prevState.posts.length >= 2) {\n          updatedPosts.pop();\n        }\n        updatedPosts.unshift(post);\n      }\n      return {\n        posts: updatedPosts,\n        totalPosts: prevState.totalPosts + 1\n      };\n    });\n  };\n\n  updatePost = post => {\n    this.setState(prevState => {\n      const updatedPosts = [...prevState.posts];\n      const updatedPostIndex = updatedPosts.findIndex(p => p._id === post._id);\n      if (updatedPostIndex > -1) {\n        updatedPosts[updatedPostIndex] = post;\n      }\n      return {\n        posts: updatedPosts\n      };\n    });\n  };\n\n  loadPosts = direction => {\n    if (direction) {\n      this.setState({ postsLoading: true, posts: [] });\n    }\n    let page = this.state.postPage;\n    if (direction === 'next') {\n      page++;\n      this.setState({ postPage: page });\n    }\n    if (direction === 'previous') {\n      page--;\n      this.setState({ postPage: page });\n    }\n    fetch('https://photography-spot-share.herokuapp.com/feed/posts?page=' + page, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200) {\n          throw new Error('Failed to fetch posts.');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        return {\n            ...resData,\n            posts: resData.posts.filter(\n                post => this.state.bucket.includes(post._id)\n              )\n        }\n    })\n      .then(resData => {\n        if (this.state.status === ''){\n          this.setState({\n            posts: resData.posts.map(post => {\n              return {\n                ...post,\n                imagePath: post.imageUrl\n              };\n            }),\n            totalPosts: resData.totalItems,\n            postsLoading: false\n          });\n        }else{\n          const posts = resData.posts.map(post => {\n            return {\n              ...post,\n              imagePath: post.imageUrl\n            };\n          });\n          const result = [];\n          const searchString = this.state.status;\n          for (var i = 0; i < posts.length; i++){\n            const post = posts[i];\n            if (post.title.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.content.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.location.text.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.location.place_name.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.ISO.toString().toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.shutter_speed.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.aperture.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.camera.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.lens.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.equipment.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n            if (post.edit_soft.toLowerCase().search(searchString.toLowerCase()) !== -1){\n              result.push(post);\n              continue;\n            }\n          }\n          this.setState({\n            posts: result,\n            totalPosts: result.length,\n            postsLoading: false\n          })\n        }\n      })\n      .catch(this.catchError);\n  };\n\n  statusUpdateHandler = event => {\n    if (event !== undefined){\n      event.preventDefault();\n    };\n    fetch('https://photography-spot-share.herokuapp.com/auth/status', {\n      method: 'PATCH',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        status: this.state.status\n      })\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error(\"Can't update status!\");\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.loadPosts();\n      })\n      .catch(this.catchError);\n  };\n\n  newPostHandler = () => {\n    this.setState({ isEditing: true });\n  };\n\n  startEditPostHandler = postId => {\n    this.setState(prevState => {\n      const loadedPost = { ...prevState.posts.find(p => p._id === postId) };\n\n      return {\n        isEditing: true,\n        editPost: loadedPost\n      };\n    });\n  };\n\n  cancelEditHandler = () => {\n    this.setState({ isEditing: false, editPost: null });\n  };\n\n  bucketPostHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket/' + postId, {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Adding a post to bucket failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.loadPosts();\n        this.state.bucket.push(postId);\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ \n          postsLoading: false\n         });\n      });\n  };\n\n  bucketRemoveHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/bucket/' + postId, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Deleting a post from bucket failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.loadPosts();\n        for (var i = 0; i < this.state.bucket.length; i++){\n          if (this.state.bucket[i] === postId){\n            this.state.bucket.splice(i, 1);\n          }\n        }\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ postsLoading: false });\n      });\n  };\n\n  finishEditHandler = postData => {\n    this.setState({\n      editLoading: true\n    });\n    const formData = new FormData();\n    formData.append('title', postData.title);\n    formData.append('content', postData.content);\n    formData.append('image', postData.image);\n    formData.append('taken_date', postData.taken_date);\n    formData.append('location', JSON.stringify(postData.location));\n    formData.append('ISO', postData.ISO);\n    formData.append('shutter_speed', postData.shutter_speed);\n    formData.append('aperture', postData.aperture);\n    formData.append('camera', postData.camera);\n    formData.append('lens', postData.lens);\n    formData.append('equipment', postData.equipment);\n    formData.append('edit_soft', postData.edit_soft);\n    formData.append('user_rate', postData.user_rate);\n    \n    let url = 'https://photography-spot-share.herokuapp.com/feed/posts';\n    let method = 'POST';\n    if (this.state.editPost) {\n      url = 'https://photography-spot-share.herokuapp.com/feed/post/' + this.state.editPost._id;\n      method = 'PUT';\n    }\n\n    fetch(url, {\n      method: method,\n      body: formData,\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Creating or editing a post failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.setState(prevState => {\n          return {\n            isEditing: false,\n            editPost: null,\n            editLoading: false\n          };\n        });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          isEditing: false,\n          editPost: null,\n          editLoading: false,\n          error: err\n        });\n      });\n  };\n\n  statusInputChangeHandler = (input, value) => {\n    this.setState({ status: value });\n  };\n\n  deletePostHandler = postId => {\n    this.setState({ postsLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/feed/post/' + postId, {\n      method: 'DELETE',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Deleting a post failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData);\n        this.loadPosts();\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ postsLoading: false });\n      });\n  };\n\n  errorHandler = () => {\n    this.setState({ error: null });\n  };\n\n  catchError = error => {\n    this.setState({ error: error });\n  };\n\n\n  startReviewHandler = postId => {\n    const userId = localStorage.getItem('userId');\n    fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n      method: 'GET',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching ratings failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        for (var i = 0; i < resData.ratings.length; i++){\n          if (resData.ratings[i].post === postId){\n            this.setState({\n              rating: resData.ratings[i].rating,\n              oldRating: resData.ratings[i].rating,\n              comment: resData.ratings[i].comment,\n              reviewIsValid: true,\n              ratingTouched: true,\n              commentTouched: true\n            });\n            break;\n          }\n        }\n      })\n      .then(res => {\n        this.setState({\n          reviewPost: postId\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }\n\n  postCommentHandler = (value) => {\n    this.setState({\n      comment: value,\n      commentTouched: true,\n      reviewIsValid: this.state.ratingTouched\n    });\n  };\n  \n  postRatingChangeHandler = (value) => {\n    this.setState({\n      rating: value,\n      ratingTouched: true,\n      reviewIsValid: this.state.commentTouched\n    });\n  };\n\n  cancelReviewHandler = () => {\n    this.setState({\n      rating: 3,\n      ratingTouched: false,\n      commentTouched: false,\n      reviewIsValid: false,\n      reviewPost: false\n    });\n  };\n\n  acceptReviewHandler = async () => {\n    const userId = localStorage.getItem('userId');\n    this.setState({ postsLoading: true });\n    try{\n    const res = await fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n      method: 'POST',\n      headers: {\n        Authorization: 'Bearer ' + this.props.token,\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        postId: this.state.reviewPost,\n        rating: this.state.rating,\n        comment: this.state.comment\n      })\n    })\n    if (res.status !== 200 && res.status !== 201) {\n      throw new Error('Adding a review failed!');\n    }\n    const Rez = await res.json();\n    const new_rating = !Rez.old_rating;\n    var newRatingId;\n    const res2 = await fetch('https://photography-spot-share.herokuapp.com/auth/ratings/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + this.props.token\n        }\n      })\n    if (res2.status !== 200 && res2.status !== 201) {\n        throw new Error('Fetching ratings failed!');\n    }\n    const resData = await res2.json();\n    console.log(resData);\n    for (var i = 0; i < resData.ratings.length; i++){\n      if (resData.ratings[i].post === this.state.reviewPost){\n        newRatingId = resData.ratings[i]._id;\n        console.log(newRatingId);\n        break;\n      }\n    }\n    const res3 = await fetch('https://photography-spot-share.herokuapp.com/feed/rating/' + this.state.reviewPost, {\n          method: 'PATCH',\n          headers: {\n            Authorization: 'Bearer ' + this.props.token,\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId: userId,\n            ratingId: newRatingId,\n            oldRating: this.state.oldRating,\n            newRating: new_rating,\n            value: this.state.rating\n          })\n        })\n    if (res3.status !== 200 && res3.status !== 201) {\n          throw new Error(\"Can't update review!\");\n    }\n    this.setState({\n      postsLoading: false,\n      rating: 3,\n      ratingTouched: false,\n      comment: '',\n      commentTouched: false,\n      reviewIsValid: false,\n      reviewPost: false\n    });\n    }catch (err){\n      console.log(err);\n      this.setState({ \n        postsLoading: false\n       });\n    }\n  }\n\n  clearSearchHandler = async () => {\n    await this.setState({\n      status: ''\n    });\n    this.statusUpdateHandler();\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <ReviewForm\n          reviewIsValid={this.state.reviewIsValid}\n          cancelReviewHandler={this.cancelReviewHandler}\n          acceptReviewHandler={this.acceptReviewHandler}\n          postRatingChangeHandler={this.postRatingChangeHandler}\n          rating={this.state.rating}\n          postReviewEditing={this.state.reviewPost}\n          comment={this.state.comment}\n          postCommentHandler={this.postCommentHandler}\n        />\n        <ErrorHandler error={this.state.error} onHandle={this.errorHandler} />\n        <FeedEdit\n          editing={this.state.isEditing}\n          selectedPost={this.state.editPost}\n          loading={this.state.editLoading}\n          onCancelEdit={this.cancelEditHandler}\n          onFinishEdit={this.finishEditHandler}\n        />\n        <section className=\"feed__status\">\n          <form onSubmit={this.statusUpdateHandler}>\n            <Input\n              type=\"text\"\n              placeholder=\"search for keywords...\"\n              control=\"input\"\n              onChange={this.statusInputChangeHandler}\n              value={this.state.status}\n            />\n            <Button mode=\"flat\" type=\"submit\">\n              Search!\n            </Button>\n            <Button mode=\"flat\" onClick={this.clearSearchHandler}>\n              Clear\n            </Button>\n          </form>\n        </section>\n        <section className=\"feed\">\n          {this.state.postsLoading && (\n            <div style={{ textAlign: 'center', marginTop: '2 rem' }}>\n              <Loader />\n            </div>\n          )}\n          {this.state.posts.length <= 0 && !this.state.postsLoading ? (\n            <p style={{ textAlign: 'center' }}>No posts found.</p>\n          ) : null}\n          {!this.state.postsLoading && (\n            <Paginator\n              onPrevious={this.loadPosts.bind(this, 'previous')}\n              onNext={this.loadPosts.bind(this, 'next')}\n              lastPage={Math.ceil(this.state.totalPosts / 2)}\n              currentPage={this.state.postPage}\n            >\n              {this.state.posts.map(post => (\n                <Post\n                  key={post._id}\n                  id={post._id}\n                  author={post.creator}\n                  date={new Date(post.createdAt).toLocaleDateString('en-US')}\n                  title={post.title}\n                  image={post.imageUrl}\n                  content={post.content}\n                  taken_date={post.taken_date}\n                  location={post.location}\n                  ISO={post.ISO}\n                  shutter_speed={post.shutter_speed}\n                  aperture={post.aperture}\n                  camera={post.camera}\n                  lens={post.lens}\n                  equipment={post.equipment}\n                  edit_soft={post.edit_soft}\n                  user_rate={post.user_rate}\n                  onStartEdit={this.startEditPostHandler.bind(this, post._id)}\n                  onDelete={this.deletePostHandler.bind(this, post._id)}\n                  onBucket={this.bucketPostHandler.bind(this, post._id)}\n                  offBucket={this.bucketRemoveHandler.bind(this, post._id)}\n                  userBucket={this.state.bucket}\n                  token={this.props.token}\n                  startReview={this.startReviewHandler.bind(this, post._id)}\n                />\n              ))}\n            </Paginator>\n          )}\n        </section>\n      </Fragment>\n    );\n  }\n}\n\nexport default Feed;\n","import \"mapbox-gl/dist/mapbox-gl.css\";\nimport \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";\nimport React, { Component } from \"react\";\nimport ReactMapGL from \"react-map-gl\";\nimport Modalmodal from '../Modal/Modal';\n\nconst MAPBOX_TOKEN = \"pk.eyJ1IjoieTI2MmhhbiIsImEiOiJjanozamU2bmkwMzJ5M2d0Nm84ZW5meHhzIn0.L1kW4Q7vNyX0fCJJEYI5PA\";\n\nclass Mapp extends Component {\n    state = {\n        viewport: {\n          width: 650,\n          height: 350,\n          latitude: this.props.value[1],\n          longitude: this.props.value[0],\n          zoom: 8\n        }\n      };\n      render() {\n        return this.props.viewMap ? (\n          <Modalmodal\n              title=\"View Location\"\n              acceptEnabled={true}\n              onCancelModal={this.props.cancelViewMap}\n              onAcceptModal={this.props.cancelViewMap}\n              isLoading={false}>\n              <ReactMapGL\n                {...this.state.viewport}\n                onViewportChange={(viewport) => this.setState({viewport})}\n                mapboxApiAccessToken={MAPBOX_TOKEN}\n                mapStyle='mapbox://styles/y262han/cjz3kx9a80fby1cr3d8oydttt'\n                width='450px'\n                height='400px'\n              />\n          </Modalmodal>\n        ) : null\n      }\n    }\n\nexport default Mapp;","import React from 'react';\nimport {Toast} from 'react-bootstrap';\n \nconst Toastt = props => {\n    const [showB, setShowB] = React.useState(true);\n    const toggleShowB = () => setShowB(!showB);\n    return (\n        <Toast onClose={toggleShowB} show={showB} animation={false}>\n            <Toast.Header>\n            <strong className=\"mr-auto\">{props.user}</strong>\n            <small>rating: {props.rating}</small>\n            </Toast.Header>\n            <Toast.Body>{props.comment}</Toast.Body>\n        </Toast> )\n}\n \nexport default Toastt;","import React, { Component } from 'react';\n\nimport './SinglePost.css';\nimport { Container, ProgressBar, Table, Image} from 'react-bootstrap';\nimport Mapp from '../../../components/View-map/view-map';\nimport Loader from '../../../components/Loader/Loader';\nimport Button from '../../../components/Button/Button';\nimport Toast from '../../../components/Toast/Toast';\n\nclass SinglePost extends Component {\n  state = {\n    title: '',\n    author: '',\n    date: '',\n    image: '',\n    content: '',\n    taken_date: '',\n    location: '',\n    ISO: '',\n    shutter_speed: '',\n    aperture: '',\n    camera: '',\n    lens: '',\n    equipment: '',\n    edit_soft: '',\n    user_rate: '',\n    loading: 'true',\n    public_rate: [{rating: 5}],\n    loadComment: 1,\n    btnTitle: 'Load More',\n    viewMap: false\n  };\n\n  async componentWillMount() {\n    const postId = this.props.match.params.postId;\n    try{\n    const res = await fetch('https://photography-spot-share.herokuapp.com/feed/post/' + postId, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n    if (res.status !== 200) {\n      throw new Error('Failed to fetch status');\n    }\n    const resData = await res.json();\n    this.setState({\n      title: resData.post.title,\n      author: resData.post.creator.name,\n      image: 'https://photography-spot-share.herokuapp.com/' + resData.post.imageUrl,\n      date: new Date(resData.post.createdAt).toLocaleDateString('en-US'),\n      content: resData.post.content,\n      taken_date: resData.post.taken_date,\n      location: resData.post.location,\n      ISO: resData.post.ISO,\n      shutter_speed: resData.post.shutter_speed,\n      aperture: resData.post.aperture,\n      camera: resData.post.camera,\n      lens: resData.post.lens,\n      equipment: resData.post.equipment,\n      edit_soft: resData.post.edit_soft,\n      user_rate: resData.post.user_rate,\n      loading: 'false'\n    });\n    const res2 = await fetch('https://photography-spot-share.herokuapp.com/feed/rating/' + postId, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n    if (res2.status !== 200) {\n      throw new Error('Failed to fetch status');\n    }\n    const resData2 = await res2.json();\n    this.setState({\n      public_rate: resData2.ratings\n    })\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  progressBarColorHandler = () => {\n    if (this.state.user_rate > 3){\n      return \"success\"\n    }else if (this.state.user_rate > 1){\n      return \"warning\"\n    }else{\n      return \"danger\"\n    }\n  }\n\n  getRateAverage = () => {\n    const ratings = this.state.public_rate;\n    var sum = 0;\n    var num = 0;\n    for (var i = 0; i < ratings.length; i++){\n      sum += ratings[i].rating;\n      num += 1;\n    }\n    const result = sum/num;\n    if (Number.isNaN(result)){\n      return ['None', 'None', 'None']\n    }else{\n      return [result * 20, (result + '/ 5'), result];\n    }\n  }\n\n  getAllCommentsHandler = async () => {\n    if (this.state.btnTitle === 'Load More'){\n      await this.setState({\n        btnTitle: 'Collapse',\n        loadComment: this.state.public_rate.length\n      });\n    } else{\n      await this.setState({\n        btnTitle: 'Load More',\n        loadComment: 1\n      });\n    }\n    return;\n  };\n\n  render() {\n    if (this.state.loading === 'true'){\n      return <Loader />\n    }\n    let rating_copy = JSON.parse(JSON.stringify(this.state.public_rate));\n    let public_rate_data = this.getRateAverage();\n    return ([(\n      <section className=\"single-post\" key='mainSinglePosts'>\n        <Mapp\n          viewMap={this.state.viewMap}\n          text={this.state.location.text}\n          value={this.state.location.center}\n          cancelViewMap={() => {this.setState({viewMap: false})}}\n        />\n        <h1>{this.state.title}</h1>\n        <Container className=\"Container\">\n            <h2 className=\"single-post-center\">\n              Created by {this.state.author} on {this.state.date}\n            </h2>\n            <h2 className=\"single-post-center\">Shot at {this.state.location.text} on {this.state.taken_date}</h2>\n        </Container>\n        <hr className=\"hr\"></hr>\n        <div style={{padding: '1rem', maxHeight: '40rem'}}>\n          <Image src={this.state.image} fluid style={{maxHeight: '35rem'}}/>\n        </div>\n        <div className=\"single-post__info padding\">\n          <p>{this.state.content}</p>\n          <hr className=\"hr\"></hr>\n          <Table striped bordered hover>\n            <thead>\n              <tr>\n                <th>Parameters</th>\n                <th>Value</th>\n                <th>Equipments</th>\n                <th>Name</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>ISO</td>\n                <td>{this.state.ISO}</td>\n                <td>Camera</td>\n                <td>{this.state.camera}</td>\n              </tr>\n              <tr>\n                <td>Shutter Speed</td>\n                <td>{this.state.shutter_speed}</td>\n                <td>Lens</td>\n                <td>{this.state.lens}</td>\n              </tr>\n              <tr>\n                <td>Aperture</td>\n                <td>{this.state.aperture}</td>\n                <td>Other Equips</td>\n                <td>{this.state.equipment}</td>\n              </tr>\n              <tr>\n                <td></td>\n                <td></td>\n                <td>Post-Editing Softwares</td>\n                <td>{this.state.edit_soft}</td>\n              </tr>\n              <tr>\n                <td>Author Rating</td>\n                <td>{this.state.user_rate}</td>\n                <td colSpan=\"2\">\n                  <ProgressBar \n                    animated striped variant={this.progressBarColorHandler()} \n                    now={this.state.user_rate/5*100} \n                    label={this.state.user_rate + ' / 5'}\n                  />\n                </td>\n              </tr>\n              <tr>\n                <td>Public Rating</td>\n                <td>{public_rate_data[2]}</td>\n                <td colSpan=\"2\">\n                  <ProgressBar \n                    animated striped variant={this.progressBarColorHandler()} \n                    label={public_rate_data[1]}\n                    now={public_rate_data[0]} \n                  />\n                </td>\n              </tr>\n            </tbody>\n          </Table>\n        </div>\n        <div style={{height: \"30px\"}}></div>\n        <Button mode='flat' onClick={() => {this.setState({viewMap: true})}}>View Map</Button>\n        <div style={{height: \"30px\"}}></div>\n      </section>),\n      ...rating_copy\n        .sort(function(a, b){return b.rating - a.rating})\n        .splice(0, Math.min(this.state.public_rate.length, this.state.loadComment))\n        .map(rate => (\n      <div style={{display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    paddingBottom: '2rem'}}\n            key={rate.user + \"'sComment\"}>\n        <Toast\n          user={rate.user}\n          rating={rate.rating}\n          comment={rate.comment}/>\n      </div>\n    )),\n    (<div style={{paddingBottom: '2rem', paddingLeft: '2rem', textAlign: 'center'}}\n          key='LoadAllButton'>\n      <Button mode=\"flat\" onClick={this.getAllCommentsHandler}>\n        {this.state.btnTitle}\n      </Button>\n    </div>)\n    ]);\n  }\n}\n\nexport default SinglePost;\n","import React from 'react';\n\nimport './Auth.css';\n\nconst auth = props => <section className=\"auth-form\">{props.children}</section>;\n\nexport default auth;\n","import React, { Component } from 'react';\n\nimport Input from '../../components/Form/Input/Input';\nimport Button from '../../components/Button/Button';\nimport { required, length, email } from '../../util/validators';\nimport Auth from './Auth';\nimport { Form, Carousel} from 'react-bootstrap';\nimport './Auth.css';\n\nclass Login extends Component {\n  state = {\n    loginForm: {\n      email: {\n        value: '',\n        valid: false,\n        touched: false,\n        validators: [required, email]\n      },\n      password: {\n        value: '',\n        valid: false,\n        touched: false,\n        validators: [required, length({ min: 5 })]\n      },\n      formIsValid: false\n    }\n  };\n\n  inputChangeHandler = (input, value) => {\n    this.setState(prevState => {\n      let isValid = true;\n      for (const validator of prevState.loginForm[input].validators) {\n        isValid = isValid && validator(value);\n      }\n      const updatedForm = {\n        ...prevState.loginForm,\n        [input]: {\n          ...prevState.loginForm[input],\n          valid: isValid,\n          value: value\n        }\n      };\n      let formIsValid = true;\n      for (const inputName in updatedForm) {\n        formIsValid = formIsValid && updatedForm[inputName].valid;\n      }\n      return {\n        loginForm: updatedForm,\n        formIsValid: formIsValid\n      };\n    });\n  };\n\n  inputBlurHandler = input => {\n    this.setState(prevState => {\n      return {\n        loginForm: {\n          ...prevState.loginForm,\n          [input]: {\n            ...prevState.loginForm[input],\n            touched: true\n          }\n        }\n      };\n    });\n  };\n\n  render() {\n    return (\n      <div>\n      <Carousel style={{paddingBottom: '2rem'}} slide={true}>\n          <Carousel.Item>\n            <img\n              className=\"d-block w-100\"\n              src=\"Norway.jpg\"\n              alt=\"Iceland\"\n            />\n            <Carousel.Caption>\n              <h1>Welcome to SpotShare</h1>\n              <p style={{fontSize: '120%'}}>Showcase your breathtaking landscape photos</p>\n            </Carousel.Caption>\n          </Carousel.Item>\n          <Carousel.Item>\n            <img\n              className=\"d-block w-100\"\n              src=\"Aletsch Glacier.jpg\"\n              alt=\"Norway\"\n            />\n            <Carousel.Caption>\n              <h1>Welcome to SpotShare</h1>\n              <p style={{fontSize: '120%'}}>Share your favourate locations with others</p>\n            </Carousel.Caption>\n          </Carousel.Item>\n          <Carousel.Item>\n            <img\n              className=\"d-block w-100\"\n              src=\"French Polynesia.jpg\"\n              alt=\"Switzerland\"\n            />\n            <Carousel.Caption>\n              <h1>Welcome to SpotShare</h1>\n              <p style={{fontSize: '120%'}}>Map your own bucket list for photo trips</p>\n            </Carousel.Caption>\n          </Carousel.Item>\n        </Carousel>\n        <div style={{paddingBottom: '2rem'}}>\n        <Auth>\n        <Form\n          onSubmit={e =>\n            this.props.onLogin(e, {\n              email: this.state.loginForm.email.value,\n              password: this.state.loginForm.password.value\n            })\n          }\n        >\n          <div className=\"login_input\">\n            <Input\n              id=\"email\"\n              label=\"Email\"\n              type=\"email\"\n              control=\"input\"\n              onChange={this.inputChangeHandler}\n              onBlur={this.inputBlurHandler.bind(this, 'email')}\n              value={this.state.loginForm['email'].value}\n              valid={this.state.loginForm['email'].valid}\n              touched={this.state.loginForm['email'].touched}\n              placeholder = \"username@example.ca\"\n              className=\"login_input\"\n            />\n          </div>\n          <div className=\"login_input\">\n            <Input\n              id=\"password\"\n              label=\"Password\"\n              type=\"password\"\n              control=\"input\"\n              onChange={this.inputChangeHandler}\n              onBlur={this.inputBlurHandler.bind(this, 'password')}\n              value={this.state.loginForm['password'].value}\n              valid={this.state.loginForm['password'].valid}\n              touched={this.state.loginForm['password'].touched}\n            />\n          </div>\n          <div className=\"login_input\">\n            <Button  design=\"raised\" type=\"submit\" loading={this.props.loading}>\n              Login\n            </Button>\n          </div>\n          \n        </Form>\n      </Auth>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default Login;\n","import React, { Component } from 'react';\n\nimport Input from '../../components/Form/Input/Input';\nimport Button from '../../components/Button/Button';\nimport { required, length, email } from '../../util/validators';\nimport Auth from './Auth';\nimport './Auth.css';\nimport { Form, Carousel} from 'react-bootstrap';\n\nclass Signup extends Component {\n  state = {\n    signupForm: {\n      email: {\n        value: '',\n        valid: false,\n        touched: false,\n        validators: [required, email]\n      },\n      password: {\n        value: '',\n        valid: false,\n        touched: false,\n        validators: [required, length({ min: 5 })]\n      },\n      name: {\n        value: '',\n        valid: false,\n        touched: false,\n        validators: [required]\n      },\n      formIsValid: false\n    }\n  };\n\n  inputChangeHandler = (input, value) => {\n    this.setState(prevState => {\n      let isValid = true;\n      for (const validator of prevState.signupForm[input].validators) {\n        isValid = isValid && validator(value);\n      }\n      const updatedForm = {\n        ...prevState.signupForm,\n        [input]: {\n          ...prevState.signupForm[input],\n          valid: isValid,\n          value: value\n        }\n      };\n      let formIsValid = true;\n      for (const inputName in updatedForm) {\n        formIsValid = formIsValid && updatedForm[inputName].valid;\n      }\n      return {\n        signupForm: updatedForm,\n        formIsValid: formIsValid\n      };\n    });\n  };\n\n  inputBlurHandler = input => {\n    this.setState(prevState => {\n      return {\n        signupForm: {\n          ...prevState.signupForm,\n          [input]: {\n            ...prevState.signupForm[input],\n            touched: true\n          }\n        }\n      };\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <Carousel style={{paddingBottom: '2rem'}}>\n          <Carousel.Item>\n            <img\n              className=\"d-block w-100\"\n              src=\"Norway.jpg\"\n              alt=\"Iceland\"\n            />\n            <Carousel.Caption>\n              <h1>Welcome to SpotShare</h1>\n              <p style={{fontSize: '120%'}}>Showcase your breathtaking landscape photos</p>\n            </Carousel.Caption>\n          </Carousel.Item>\n          <Carousel.Item>\n            <img\n              className=\"d-block w-100\"\n              src=\"Aletsch Glacier.jpg\"\n              alt=\"Norway\"\n            />\n            <Carousel.Caption>\n              <h1>Welcome to SpotShare</h1>\n              <p style={{fontSize: '120%'}}>Share your favourate locations with others</p>\n            </Carousel.Caption>\n          </Carousel.Item>\n          <Carousel.Item>\n            <img\n              className=\"d-block w-100\"\n              src=\"French Polynesia.jpg\"\n              alt=\"Switzerland\"\n            />\n            <Carousel.Caption>\n              <h1>Welcome to SpotShare</h1>\n              <p style={{fontSize: '120%'}}>Map your own bucket list for photo trips</p>\n            </Carousel.Caption>\n          </Carousel.Item>\n        </Carousel>\n      <div style={{paddingBottom: '2rem'}}>\n      <Auth>\n        <Form onSubmit={e => this.props.onSignup(e, this.state)}>\n        <div className=\"login_input\">\n          <Input\n            id=\"email\"\n            label=\"Email\"\n            type=\"email\"\n            control=\"input\"\n            onChange={this.inputChangeHandler}\n            onBlur={this.inputBlurHandler.bind(this, 'email')}\n            value={this.state.signupForm['email'].value}\n            valid={this.state.signupForm['email'].valid}\n            touched={this.state.signupForm['email'].touched}\n            placeholder=\"username@example.ca\"\n          />\n          <Form.Text className=\"text-muted\">\n              We'll never share your email with anyone else.\n          </Form.Text>\n        </div>\n        <div className=\"login_input\">\n          <Input\n            id=\"name\"\n            label=\"Full Name\"\n            type=\"text\"\n            control=\"input\"\n            onChange={this.inputChangeHandler}\n            onBlur={this.inputBlurHandler.bind(this, 'name')}\n            value={this.state.signupForm['name'].value}\n            valid={this.state.signupForm['name'].valid}\n            touched={this.state.signupForm['name'].touched}\n            placeholder=\"John Smith\"\n          />\n        </div>\n        <div className=\"login_input\">\n          <Input\n            id=\"password\"\n            label=\"Password\"\n            type=\"password\"\n            control=\"input\"\n            onChange={this.inputChangeHandler}\n            onBlur={this.inputBlurHandler.bind(this, 'password')}\n            value={this.state.signupForm['password'].value}\n            valid={this.state.signupForm['password'].valid}\n            touched={this.state.signupForm['password'].touched}\n          />\n        </div>\n        <div className=\"login_input\">\n          <Button design=\"raised\" type=\"submit\" loading={this.props.loading}>\n            Signup\n          </Button>\n          </div>\n        </Form>\n      </Auth>\n      </div>\n      </div>\n    );\n  }\n}\n\nexport default Signup;\n","import React, { Component, Fragment } from 'react';\nimport { Route, Switch, Redirect, withRouter } from 'react-router-dom';\n\nimport Layout from './components/Layout/Layout';\nimport Backdrop from './components/Backdrop/Backdrop';\nimport Toolbar from './components/Toolbar/Toolbar';\nimport MainNavigation from './components/Navigation/MainNavigation/MainNavigation';\nimport MobileNavigation from './components/Navigation/MobileNavigation/MobileNavigation';\nimport ErrorHandler from './components/ErrorHandler/ErrorHandler';\nimport FeedPage from './pages/Feed/Feed';\nimport Profile from './pages/Profile/Profile';\nimport Rankings from './pages/Ranking/Ranking';\nimport Map from './pages/Map/Map';\nimport Bucket from './pages/Bucket/Bucket';\nimport SinglePostPage from './pages/Feed/SinglePost/SinglePost';\nimport LoginPage from './pages/Auth/Login';\nimport SignupPage from './pages/Auth/Signup';\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    showBackdrop: false,\n    showMobileNav: false,\n    isAuth: false,\n    token: null,\n    userId: null,\n    authLoading: false,\n    error: null,\n    navState: null\n  };\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    const expiryDate = localStorage.getItem('expiryDate');\n    if (!token || !expiryDate) {\n      return;\n    }\n    if (new Date(expiryDate) <= new Date()) {\n      this.logoutHandler();\n      return;\n    }\n    const userId = localStorage.getItem('userId');\n    const remainingMilliseconds =\n      new Date(expiryDate).getTime() - new Date().getTime();\n    this.setState({ isAuth: true, token: token, userId: userId });\n    this.setAutoLogout(remainingMilliseconds);\n  }\n\n  mobileNavHandler = isOpen => {\n    this.setState({ showMobileNav: isOpen, showBackdrop: isOpen });\n  };\n\n  backdropClickHandler = () => {\n    this.setState({ showBackdrop: false, showMobileNav: false, error: null });\n  };\n\n  logoutHandler = async () => {\n    try {\n      const res = await fetch('https://photography-spot-share.herokuapp.com/auth/status', {\n        method: 'PATCH',\n        headers: {\n          Authorization: 'Bearer ' + localStorage.getItem('token'),\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          status: ''\n        })\n      })\n      if (res.status !== 200 && res.status !== 201) {\n        throw new Error(\"Can't update status!\");\n      }\n      this.setState({ isAuth: false, token: null, navState: null });\n      localStorage.clear();\n      window.location.reload();\n    }catch(err){\n      console.log(err)\n    }\n  };\n\n  loginHandler = (event, authData) => {\n    event.preventDefault();\n    localStorage.clear();\n    this.setState({ authLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/login', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: authData.email,\n        password: authData.password\n      })\n    })\n      .then(res => {\n        if (res.status === 422) {\n          throw new Error('Validation failed.');\n        }\n        if (res.status !== 200 && res.status !== 201) {\n          console.log('Error!');\n          throw new Error('Could not authenticate you!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        localStorage.setItem('token', resData.token);\n        localStorage.setItem('userId', resData.userId);\n        this.setState({\n          isAuth: true,\n          token: resData.token,\n          authLoading: false,\n          userId: resData.userId\n        });\n        const remainingMilliseconds = 60 * 60 * 1000;\n        const expiryDate = new Date(\n          new Date().getTime() + remainingMilliseconds\n        );\n        localStorage.setItem('expiryDate', expiryDate.toISOString());\n        this.setAutoLogout(remainingMilliseconds);\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          isAuth: false,\n          authLoading: false,\n          error: err\n        });\n      });\n  };\n\n  signupHandler = (event, authData) => {\n    event.preventDefault();\n    this.setState({ authLoading: true });\n    fetch('https://photography-spot-share.herokuapp.com/auth/signup', {\n      method: 'PUT',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: authData.signupForm.email.value,\n        password: authData.signupForm.password.value,\n        name: authData.signupForm.name.value\n      })\n    })\n      .then(res => {\n        if (res.status === 422) {\n          throw new Error(\n            \"Validation failed. Make sure the email address isn't used yet!\"\n          );\n        }\n        if (res.status !== 200 && res.status !== 201) {\n          console.log('Error!');\n          throw new Error('Creating a user failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({ isAuth: false, authLoading: false });\n        this.props.history.replace('/');\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({\n          isAuth: false,\n          authLoading: false,\n          error: err\n        });\n      });\n  };\n\n  setAutoLogout = milliseconds => {\n    setTimeout(() => {\n      this.logoutHandler();\n    }, milliseconds);\n  };\n\n  errorHandler = () => {\n    this.setState({ error: null });\n  };\n\n  render() {\n    let routes = (\n      <Switch>\n        <Route\n          path=\"/\"\n          exact\n          render={props => (\n            <LoginPage\n              {...props}\n              onLogin={this.loginHandler}\n              loading={this.state.authLoading}\n            />\n          )}\n        />\n        <Route\n          path=\"/signup\"\n          exact\n          render={props => (\n            <SignupPage\n              {...props}\n              onSignup={this.signupHandler}\n              loading={this.state.authLoading}\n            />\n          )}\n        />\n          )}\n        />\n        <Redirect to=\"/\" />\n      </Switch>\n    );\n    if (this.state.isAuth) {\n      routes = (\n        <Switch>\n          <Route\n            path=\"/posts\"\n            exact\n            render={props => (\n              <Profile userId={this.state.userId} token={this.state.token} />\n            )}\n          />\n          <Route\n            path=\"/my-bucket\"\n            exact\n            render={props => (\n              <Bucket userId={this.state.userId} token={this.state.token} />\n            )}\n          />\n          <Route\n            path=\"/my-map\"\n            exact\n            render={props => (\n              <Map userId={this.state.userId} token={this.state.token} />\n            )}\n          />\n          <Route\n            path=\"/rankings\"\n            exact\n            render={props => (\n              <Rankings userId={this.state.userId} token={this.state.token} />\n            )}\n          />\n          <Route\n            path=\"/\"\n            exact\n            render={props => (\n              <FeedPage userId={this.state.userId} token={this.state.token} />\n            )}\n          />\n          <Route\n            path=\"/:postId\"\n            render={props => (\n              <SinglePostPage\n                {...props}\n                userId={this.state.userId}\n                token={this.state.token}\n              />\n            )}\n          />\n          <Redirect to=\"/\" />\n        </Switch>\n      );\n    }\n    return (\n      <Fragment>\n        {this.state.showBackdrop && (\n          <Backdrop onClick={this.backdropClickHandler} />\n        )}\n        <ErrorHandler error={this.state.error} onHandle={this.errorHandler} />\n        <Layout\n          header={\n            <Toolbar>\n              <MainNavigation\n                onOpenMobileNav={this.mobileNavHandler.bind(this, true)}\n                onLogout={this.logoutHandler}\n                isAuth={this.state.isAuth}\n                isLoading={this.state.authLoading}\n                userId={this.state.userId}\n                token={this.state.token}\n                state={this.state.navState}\n              />\n            </Toolbar>\n          }\n          mobileNav={\n            <MobileNavigation\n              open={this.state.showMobileNav}\n              mobile\n              onChooseItem={this.mobileNavHandler.bind(this, false)}\n              onLogout={this.logoutHandler}\n              isAuth={this.state.isAuth}\n              isLoading={this.state.authLoading}\n              userId={this.state.userId}\n              token={this.state.token}\n            />\n          }\n        />\n        {routes}\n      </Fragment>\n    );\n  }\n}\n\nexport default withRouter(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <BrowserRouter>\n    <App />\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\n"],"sourceRoot":""}