{"ast":null,"code":"import _regeneratorRuntime from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/SHAWN/Downloads/SpotShare/src/pages/Feed/SinglePost/SinglePost.js\";\nimport React, { Component } from 'react';\nimport Image from '../../../components/Image/Image';\nimport './SinglePost.css';\nimport { Container, Row, Col, ProgressBar, Toast } from 'react-bootstrap';\nimport Mapp from '../../../components/View-map/view-map';\nimport Loader from '../../../components/Loader/Loader';\n\nvar SinglePost =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SinglePost, _Component);\n\n  function SinglePost() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SinglePost);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SinglePost)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      title: '',\n      author: '',\n      date: '',\n      image: '',\n      content: '',\n      taken_date: '',\n      location: '',\n      ISO: '',\n      shutter_speed: '',\n      aperture: '',\n      camera: '',\n      lens: '',\n      equipment: '',\n      edit_soft: '',\n      user_rate: '',\n      loading: 'true',\n      public_rate: [{\n        rating: 5\n      }]\n    };\n\n    _this.progressBarColorHandler = function () {\n      if (_this.state.user_rate > 3) {\n        return \"success\";\n      } else if (_this.state.user_rate > 1) {\n        return \"warning\";\n      } else {\n        return \"danger\";\n      }\n    };\n\n    _this.getRateAverage = function () {\n      var ratings = _this.state.public_rate;\n      var sum = 0;\n      var num = 0;\n\n      for (var i = 0; i < ratings.length; i++) {\n        sum += ratings[i].rating;\n        num += 1;\n      }\n\n      return sum / num;\n    };\n\n    return _this;\n  }\n\n  _createClass(SinglePost, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var postId, res, resData, res2, resData2;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                postId = this.props.match.params.postId;\n                _context.prev = 1;\n                _context.next = 4;\n                return fetch('http://localhost:8080/feed/post/' + postId, {\n                  headers: {\n                    Authorization: 'Bearer ' + this.props.token\n                  }\n                });\n\n              case 4:\n                res = _context.sent;\n\n                if (!(res.status !== 200)) {\n                  _context.next = 7;\n                  break;\n                }\n\n                throw new Error('Failed to fetch status');\n\n              case 7:\n                _context.next = 9;\n                return res.json();\n\n              case 9:\n                resData = _context.sent;\n                this.setState({\n                  title: resData.post.title,\n                  author: resData.post.creator.name,\n                  image: 'http://localhost:8080/' + resData.post.imageUrl,\n                  date: new Date(resData.post.createdAt).toLocaleDateString('en-US'),\n                  content: resData.post.content,\n                  taken_date: resData.post.taken_date,\n                  location: resData.post.location,\n                  ISO: resData.post.ISO,\n                  shutter_speed: resData.post.shutter_speed,\n                  aperture: resData.post.aperture,\n                  camera: resData.post.camera,\n                  lens: resData.post.lens,\n                  equipment: resData.post.equipment,\n                  edit_soft: resData.post.edit_soft,\n                  user_rate: resData.post.user_rate,\n                  loading: 'false'\n                });\n                _context.next = 13;\n                return fetch('http://localhost:8080/feed/rating/' + postId, {\n                  headers: {\n                    Authorization: 'Bearer ' + this.props.token\n                  }\n                });\n\n              case 13:\n                res2 = _context.sent;\n\n                if (!(res2.status !== 200)) {\n                  _context.next = 16;\n                  break;\n                }\n\n                throw new Error('Failed to fetch status');\n\n              case 16:\n                _context.next = 18;\n                return res2.json();\n\n              case 18:\n                resData2 = _context.sent;\n                this.setState({\n                  public_rate: resData2.ratings\n                });\n                _context.next = 25;\n                break;\n\n              case 22:\n                _context.prev = 22;\n                _context.t0 = _context[\"catch\"](1);\n                console.log(_context.t0);\n\n              case 25:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 22]]);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loading === 'true') {\n        return React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"section\", {\n        className: \"single-post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, this.state.title), React.createElement(Container, {\n        className: \"Container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single-post-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Created by \", this.state.author, \" on \", this.state.date), React.createElement(\"h2\", {\n        className: \"single-post-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, \"Shot at \", this.state.location.text, \" on \", this.state.taken_date)), React.createElement(\"hr\", {\n        className: \"hr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"single-post__image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Image, {\n        contain: true,\n        imageUrl: this.state.image,\n        className: \"the_image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"single-post__info padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, this.state.content), React.createElement(\"hr\", {\n        className: \"hr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }), React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"ISO: \", this.state.ISO)), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Camera: \", this.state.camera))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Shutter Speed: \", this.state.shutter_speed)), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Lens: \", this.state.lens))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Aperture: \", this.state.aperture)), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Equipments: \", this.state.equipment))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, \"Author Rating: \", this.state.user_rate)), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Post-Editing Softwares Used: \", this.state.edit_soft)))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Author Rating: \")), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(ProgressBar, {\n        animated: true,\n        striped: true,\n        variant: this.progressBarColorHandler(),\n        now: this.state.user_rate / 5 * 100,\n        label: this.state.user_rate + ' / 5',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Public Rating: \")), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(ProgressBar, {\n        animated: true,\n        striped: true,\n        variant: this.progressBarColorHandler(),\n        now: this.getRateAverage() / 5 * 100,\n        label: this.getRateAverage() + ' / 5',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        style: {\n          height: \"100px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"map-div\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(Mapp, {\n        text: this.state.location.text,\n        value: this.state.location.center,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      })), React.createElement(Toast, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(Toast.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        className: \"mr-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, \"Bootstrap\"), React.createElement(\"small\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, \"11 mins ago\")), React.createElement(Toast.Body, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, \"Hello, world! This is a toast message.\")));\n    }\n  }]);\n\n  return SinglePost;\n}(Component);\n\nexport default SinglePost;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/SpotShare/src/pages/Feed/SinglePost/SinglePost.js"],"names":["React","Component","Image","Container","Row","Col","ProgressBar","Toast","Mapp","Loader","SinglePost","state","title","author","date","image","content","taken_date","location","ISO","shutter_speed","aperture","camera","lens","equipment","edit_soft","user_rate","loading","public_rate","rating","progressBarColorHandler","getRateAverage","ratings","sum","num","i","length","postId","props","match","params","fetch","headers","Authorization","token","res","status","Error","json","resData","setState","post","creator","name","imageUrl","Date","createdAt","toLocaleDateString","res2","resData2","console","log","text","height","display","alignItems","justifyContent","center"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,KAAP,MAAkB,iCAAlB;AACA,OAAO,kBAAP;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,WAA9B,EAA2CC,KAA3C,QAAuD,iBAAvD;AACA,OAAOC,IAAP,MAAiB,uCAAjB;AACA,OAAOC,MAAP,MAAmB,mCAAnB;;IAGMC,U;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,MAAM,EAAE,EAFF;AAGNC,MAAAA,IAAI,EAAE,EAHA;AAINC,MAAAA,KAAK,EAAE,EAJD;AAKNC,MAAAA,OAAO,EAAE,EALH;AAMNC,MAAAA,UAAU,EAAE,EANN;AAONC,MAAAA,QAAQ,EAAE,EAPJ;AAQNC,MAAAA,GAAG,EAAE,EARC;AASNC,MAAAA,aAAa,EAAE,EATT;AAUNC,MAAAA,QAAQ,EAAE,EAVJ;AAWNC,MAAAA,MAAM,EAAE,EAXF;AAYNC,MAAAA,IAAI,EAAE,EAZA;AAaNC,MAAAA,SAAS,EAAE,EAbL;AAcNC,MAAAA,SAAS,EAAE,EAdL;AAeNC,MAAAA,SAAS,EAAE,EAfL;AAgBNC,MAAAA,OAAO,EAAE,MAhBH;AAiBNC,MAAAA,WAAW,EAAE,CAAC;AAACC,QAAAA,MAAM,EAAE;AAAT,OAAD;AAjBP,K;;UAmERC,uB,GAA0B,YAAM;AAC9B,UAAI,MAAKnB,KAAL,CAAWe,SAAX,GAAuB,CAA3B,EAA6B;AAC3B,eAAO,SAAP;AACD,OAFD,MAEM,IAAI,MAAKf,KAAL,CAAWe,SAAX,GAAuB,CAA3B,EAA6B;AACjC,eAAO,SAAP;AACD,OAFK,MAED;AACH,eAAO,QAAP;AACD;AACF,K;;UAEDK,c,GAAiB,YAAM;AACrB,UAAMC,OAAO,GAAG,MAAKrB,KAAL,CAAWiB,WAA3B;AACA,UAAIK,GAAG,GAAG,CAAV;AACA,UAAIC,GAAG,GAAG,CAAV;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,OAAO,CAACI,MAA5B,EAAoCD,CAAC,EAArC,EAAwC;AACtCF,QAAAA,GAAG,IAAID,OAAO,CAACG,CAAD,CAAP,CAAWN,MAAlB;AACAK,QAAAA,GAAG,IAAI,CAAP;AACD;;AACD,aAAOD,GAAG,GAACC,GAAX;AACD,K;;;;;;;;;;;;;;;;AAjEOG,gBAAAA,M,GAAS,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,M;;;uBAErBI,KAAK,CAAC,qCAAqCJ,MAAtC,EAA8C;AACnEK,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,aAAa,EAAE,YAAY,KAAKL,KAAL,CAAWM;AAD/B;AAD0D,iBAA9C,C;;;AAAjBC,gBAAAA,G;;sBAKFA,GAAG,CAACC,MAAJ,KAAe,G;;;;;sBACX,IAAIC,KAAJ,CAAU,wBAAV,C;;;;uBAEcF,GAAG,CAACG,IAAJ,E;;;AAAhBC,gBAAAA,O;AACN,qBAAKC,QAAL,CAAc;AACZtC,kBAAAA,KAAK,EAAEqC,OAAO,CAACE,IAAR,CAAavC,KADR;AAEZC,kBAAAA,MAAM,EAAEoC,OAAO,CAACE,IAAR,CAAaC,OAAb,CAAqBC,IAFjB;AAGZtC,kBAAAA,KAAK,EAAE,2BAA2BkC,OAAO,CAACE,IAAR,CAAaG,QAHnC;AAIZxC,kBAAAA,IAAI,EAAE,IAAIyC,IAAJ,CAASN,OAAO,CAACE,IAAR,CAAaK,SAAtB,EAAiCC,kBAAjC,CAAoD,OAApD,CAJM;AAKZzC,kBAAAA,OAAO,EAAEiC,OAAO,CAACE,IAAR,CAAanC,OALV;AAMZC,kBAAAA,UAAU,EAAEgC,OAAO,CAACE,IAAR,CAAalC,UANb;AAOZC,kBAAAA,QAAQ,EAAE+B,OAAO,CAACE,IAAR,CAAajC,QAPX;AAQZC,kBAAAA,GAAG,EAAE8B,OAAO,CAACE,IAAR,CAAahC,GARN;AASZC,kBAAAA,aAAa,EAAE6B,OAAO,CAACE,IAAR,CAAa/B,aAThB;AAUZC,kBAAAA,QAAQ,EAAE4B,OAAO,CAACE,IAAR,CAAa9B,QAVX;AAWZC,kBAAAA,MAAM,EAAE2B,OAAO,CAACE,IAAR,CAAa7B,MAXT;AAYZC,kBAAAA,IAAI,EAAE0B,OAAO,CAACE,IAAR,CAAa5B,IAZP;AAaZC,kBAAAA,SAAS,EAAEyB,OAAO,CAACE,IAAR,CAAa3B,SAbZ;AAcZC,kBAAAA,SAAS,EAAEwB,OAAO,CAACE,IAAR,CAAa1B,SAdZ;AAeZC,kBAAAA,SAAS,EAAEuB,OAAO,CAACE,IAAR,CAAazB,SAfZ;AAgBZC,kBAAAA,OAAO,EAAE;AAhBG,iBAAd;;uBAkBmBc,KAAK,CAAC,uCAAuCJ,MAAxC,EAAgD;AACtEK,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,aAAa,EAAE,YAAY,KAAKL,KAAL,CAAWM;AAD/B;AAD6D,iBAAhD,C;;;AAAlBc,gBAAAA,I;;sBAKFA,IAAI,CAACZ,MAAL,KAAgB,G;;;;;sBACZ,IAAIC,KAAJ,CAAU,wBAAV,C;;;;uBAEeW,IAAI,CAACV,IAAL,E;;;AAAjBW,gBAAAA,Q;AACN,qBAAKT,QAAL,CAAc;AACZtB,kBAAAA,WAAW,EAAE+B,QAAQ,CAAC3B;AADV,iBAAd;;;;;;;AAIE4B,gBAAAA,OAAO,CAACC,GAAR;;;;;;;;;;;;;;;;;;6BAyBK;AACP,UAAI,KAAKlD,KAAL,CAAWgB,OAAX,KAAuB,MAA3B,EAAkC;AAChC,eAAO,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;AACD,aACE;AAAS,QAAA,SAAS,EAAC,aAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,KAAKhB,KAAL,CAAWC,KAAhB,CADF,EAEE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACc,KAAKD,KAAL,CAAWE,MADzB,UACqC,KAAKF,KAAL,CAAWG,IADhD,CADJ,EAII;AAAI,QAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA4C,KAAKH,KAAL,CAAWO,QAAX,CAAoB4C,IAAhE,UAA0E,KAAKnD,KAAL,CAAWM,UAArF,CAJJ,CAFF,EAQE;AAAI,QAAA,SAAS,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,EASE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AAAO,QAAA,OAAO,MAAd;AAAe,QAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWI,KAApC;AAA2C,QAAA,SAAS,EAAC,WAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CATF,EAYE;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,KAAKJ,KAAL,CAAWK,OAAf,CADF,EAEE;AAAI,QAAA,SAAS,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA4C,KAAKL,KAAL,CAAWQ,GAAvD,CAAL,CADF,EAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA+C,KAAKR,KAAL,CAAWW,MAA1D,CAAL,CAFF,CADF,EAKE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAsD,KAAKX,KAAL,CAAWS,aAAjE,CAAL,CADF,EAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA6C,KAAKT,KAAL,CAAWY,IAAxD,CAAL,CAFF,CALF,EASE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAiD,KAAKZ,KAAL,CAAWU,QAA5D,CAAL,CADF,EAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAmD,KAAKV,KAAL,CAAWa,SAA9D,CAAL,CAFF,CATF,EAaE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAsD,KAAKb,KAAL,CAAWe,SAAjE,CAAL,CADF,EAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAAoE,KAAKf,KAAL,CAAWc,SAA/E,CAAL,CAFF,CAbF,CAHF,EAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CADF,EAIE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AACE,QAAA,QAAQ,MADV;AACW,QAAA,OAAO,MADlB;AACmB,QAAA,OAAO,EAAE,KAAKK,uBAAL,EAD5B;AAEE,QAAA,GAAG,EAAE,KAAKnB,KAAL,CAAWe,SAAX,GAAqB,CAArB,GAAuB,GAF9B;AAGE,QAAA,KAAK,EAAE,KAAKf,KAAL,CAAWe,SAAX,GAAuB,MAHhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,CADF,CArBF,EAmCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CADF,EAIE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AACE,QAAA,QAAQ,MADV;AACW,QAAA,OAAO,MADlB;AACmB,QAAA,OAAO,EAAE,KAAKI,uBAAL,EAD5B;AAEE,QAAA,GAAG,EAAG,KAAKC,cAAL,EAAD,GAAwB,CAAxB,GAA4B,GAFnC;AAGE,QAAA,KAAK,EAAE,KAAKA,cAAL,KAAwB,MAHjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,CADF,CAnCF,CAZF,EA8DE;AAAK,QAAA,KAAK,EAAE;AAACgC,UAAAA,MAAM,EAAE;AAAT,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA9DF,EA+DE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAyB,QAAA,KAAK,EAAE;AAC1BC,UAAAA,OAAO,EAAE,MADiB;AAE1BC,UAAAA,UAAU,EAAE,QAFc;AAG1BC,UAAAA,cAAc,EAAE;AAHU,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE,oBAAC,IAAD;AACE,QAAA,IAAI,EAAE,KAAKvD,KAAL,CAAWO,QAAX,CAAoB4C,IAD5B;AAEE,QAAA,KAAK,EAAE,KAAKnD,KAAL,CAAWO,QAAX,CAAoBiD,MAF7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CA/DF,EA0EE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAQ,QAAA,SAAS,EAAC,SAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAFF,CADF,EAKE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDALF,CA1EF,CADF;AAoFD;;;;EAjLsBlE,S;;AAoLzB,eAAeS,UAAf","sourcesContent":["import React, { Component } from 'react';\n\nimport Image from '../../../components/Image/Image';\nimport './SinglePost.css';\nimport { Container, Row, Col, ProgressBar, Toast} from 'react-bootstrap';\nimport Mapp from '../../../components/View-map/view-map';\nimport Loader from '../../../components/Loader/Loader';\n\n\nclass SinglePost extends Component {\n  state = {\n    title: '',\n    author: '',\n    date: '',\n    image: '',\n    content: '',\n    taken_date: '',\n    location: '',\n    ISO: '',\n    shutter_speed: '',\n    aperture: '',\n    camera: '',\n    lens: '',\n    equipment: '',\n    edit_soft: '',\n    user_rate: '',\n    loading: 'true',\n    public_rate: [{rating: 5}]\n  };\n\n  async componentWillMount() {\n    const postId = this.props.match.params.postId;\n    try{\n    const res = await fetch('http://localhost:8080/feed/post/' + postId, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n    if (res.status !== 200) {\n      throw new Error('Failed to fetch status');\n    }\n    const resData = await res.json();\n    this.setState({\n      title: resData.post.title,\n      author: resData.post.creator.name,\n      image: 'http://localhost:8080/' + resData.post.imageUrl,\n      date: new Date(resData.post.createdAt).toLocaleDateString('en-US'),\n      content: resData.post.content,\n      taken_date: resData.post.taken_date,\n      location: resData.post.location,\n      ISO: resData.post.ISO,\n      shutter_speed: resData.post.shutter_speed,\n      aperture: resData.post.aperture,\n      camera: resData.post.camera,\n      lens: resData.post.lens,\n      equipment: resData.post.equipment,\n      edit_soft: resData.post.edit_soft,\n      user_rate: resData.post.user_rate,\n      loading: 'false'\n    });\n    const res2 = await fetch('http://localhost:8080/feed/rating/' + postId, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n    if (res2.status !== 200) {\n      throw new Error('Failed to fetch status');\n    }\n    const resData2 = await res2.json();\n    this.setState({\n      public_rate: resData2.ratings\n    })\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  progressBarColorHandler = () => {\n    if (this.state.user_rate > 3){\n      return \"success\"\n    }else if (this.state.user_rate > 1){\n      return \"warning\"\n    }else{\n      return \"danger\"\n    }\n  }\n\n  getRateAverage = () => {\n    const ratings = this.state.public_rate;\n    var sum = 0;\n    var num = 0;\n    for (var i = 0; i < ratings.length; i++){\n      sum += ratings[i].rating;\n      num += 1;\n    }\n    return sum/num;\n  }\n\n  render() {\n    if (this.state.loading === 'true'){\n      return <Loader />\n    }\n    return (\n      <section className=\"single-post\">\n        <h1>{this.state.title}</h1>\n        <Container className=\"Container\">\n            <h2 className=\"single-post-center\">\n              Created by {this.state.author} on {this.state.date}\n            </h2>\n            <h2 className=\"single-post-center\">Shot at {this.state.location.text} on {this.state.taken_date}</h2>\n        </Container>\n        <hr className=\"hr\"></hr>\n        <div className=\"single-post__image\">\n          <Image contain imageUrl={this.state.image} className=\"the_image\"/>\n        </div>\n        <div className=\"single-post__info padding\">\n          <p>{this.state.content}</p>\n          <hr className=\"hr\"></hr>\n          <Container>\n            <Row>\n              <Col><h2 className=\"single_post_normal_h2\">ISO: {this.state.ISO}</h2></Col>\n              <Col><h2 className=\"single_post_normal_h2\">Camera: {this.state.camera}</h2></Col>\n            </Row>\n            <Row>\n              <Col><h2 className=\"single_post_normal_h2\">Shutter Speed: {this.state.shutter_speed}</h2></Col>\n              <Col><h2 className=\"single_post_normal_h2\">Lens: {this.state.lens}</h2></Col>\n            </Row>\n            <Row>\n              <Col><h2 className=\"single_post_normal_h2\">Aperture: {this.state.aperture}</h2></Col>\n              <Col><h2 className=\"single_post_normal_h2\">Equipments: {this.state.equipment}</h2></Col>\n            </Row>\n            <Row>\n              <Col><h2 className=\"single_post_normal_h2\">Author Rating: {this.state.user_rate}</h2></Col>\n              <Col><h2 className=\"single_post_normal_h2\">Post-Editing Softwares Used: {this.state.edit_soft}</h2></Col>\n            </Row>\n          </Container>\n          <div>\n            <Row>\n              <Col xs={2}>\n                <h2 className=\"single_post_normal_h2\">Author Rating: </h2>\n              </Col>\n              <Col>\n                <ProgressBar \n                  animated striped variant={this.progressBarColorHandler()} \n                  now={this.state.user_rate/5*100} \n                  label={this.state.user_rate + ' / 5'}\n                />\n              </Col>\n            </Row>\n          </div>\n          <div>\n            <Row>\n              <Col xs={2}>\n                <h2 className=\"single_post_normal_h2\">Public Rating: </h2>\n              </Col>\n              <Col>\n                <ProgressBar \n                  animated striped variant={this.progressBarColorHandler()} \n                  now={(this.getRateAverage())/5 * 100} \n                  label={this.getRateAverage() + ' / 5'}\n                />\n              </Col>\n            </Row>\n          </div>\n        </div>\n        <div style={{height: \"100px\"}}></div>\n        <div className=\"map-div\" style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }}>\n          <Mapp\n            text={this.state.location.text}\n            value={this.state.location.center}\n          />\n        </div>\n\n        <Toast>\n          <Toast.Header>\n            <strong className=\"mr-auto\">Bootstrap</strong>\n            <small>11 mins ago</small>\n          </Toast.Header>\n          <Toast.Body>Hello, world! This is a toast message.</Toast.Body>\n        </Toast>\n      </section>\n    );\n  }\n}\n\nexport default SinglePost;\n"]},"metadata":{},"sourceType":"module"}