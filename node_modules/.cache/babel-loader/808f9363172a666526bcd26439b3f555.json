{"ast":null,"code":"import _toConsumableArray from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/SHAWN/Downloads/SpotShare/src/components/Navigation/NavigationItems/NavigationItems.js\";\nimport React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { Dropdown } from 'react-bootstrap';\nimport './NavigationItems.css';\nvar navItems = [{\n  id: 'feed',\n  text: 'Feed',\n  link: '/',\n  auth: true\n}, {\n  id: 'my-profile',\n  text: 'Profile',\n  link: '/posts',\n  auth: true\n}, {\n  id: 'my-bucket',\n  text: 'Bucket',\n  link: '/my-bucket',\n  auth: true\n}, {\n  id: 'my-map',\n  text: 'Map',\n  link: '/my-map',\n  auth: true\n}, {\n  id: 'rankings',\n  text: 'Rank',\n  link: '/rankings',\n  auth: true\n}, {\n  id: 'login',\n  text: 'Login',\n  link: '/',\n  auth: false\n}, {\n  id: 'signup',\n  text: 'Signup',\n  link: '/signup',\n  auth: false\n}];\n\nvar navigationItems =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(navigationItems, _Component);\n\n  function navigationItems() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, navigationItems);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(navigationItems)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = _this.props.state;\n\n    _this.getUserName = function () {\n      var userId = localStorage.getItem('userId');\n      var token = localStorage.getItem('token');\n      fetch('http://localhost:8080/auth/user/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      }).then(function (res) {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching user name failed!');\n        }\n\n        return res.json();\n      }).then(function (resData) {\n        _this.setState({\n          name: resData.userObj.name\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(navigationItems, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var userId = localStorage.getItem('userId');\n      var token = localStorage.getItem('token');\n\n      if (userId && token) {\n        this.setState({\n          loaded: true,\n          name: this.getUserName()\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      // if (this.props.isAuth && (!this.state)){\n      //   this.componentDidMount();\n      // }\n      return [].concat(_toConsumableArray(navItems.filter(function (item) {\n        return item.auth === _this2.props.isAuth;\n      }).map(function (item) {\n        return React.createElement(\"li\", {\n          key: item.id,\n          className: ['navigation-item', _this2.props.mobile ? 'mobile' : ''].join(' '),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(NavLink, {\n          to: item.link,\n          exact: true,\n          onClick: _this2.props.onChoose,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, item.text));\n      })), [this.props.isAuth && this.state && this.state.name && React.createElement(\"li\", {\n        className: \"navigation-item\",\n        key: \"logout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Dropdown.Toggle, {\n        variant: \"Warning\",\n        id: \"dropdown-basic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"Hello \", this.state.name, \"!\"), React.createElement(Dropdown.Menu, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(Dropdown.Item, {\n        style: {\n          color: \"purple\"\n        },\n        onClick: this.props.onLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, \"Logout\"))))]);\n    }\n  }]);\n\n  return navigationItems;\n}(Component);\n\nexport default navigationItems;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/SpotShare/src/components/Navigation/NavigationItems/NavigationItems.js"],"names":["React","Component","NavLink","Dropdown","navItems","id","text","link","auth","navigationItems","state","props","getUserName","userId","localStorage","getItem","token","fetch","method","headers","Authorization","then","res","status","Error","json","resData","setState","name","userObj","catch","err","console","log","loaded","filter","item","isAuth","map","mobile","join","onChoose","color","onLogout"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { NavLink } from 'react-router-dom';\nimport {Dropdown} from 'react-bootstrap';\n\nimport './NavigationItems.css';\n\nconst navItems = [\n  { id: 'feed', text: 'Feed', link: '/', auth: true },\n  { id: 'my-profile', text: 'Profile', link: '/posts', auth: true},\n  { id: 'my-bucket', text: 'Bucket', link: '/my-bucket', auth: true},\n  { id: 'my-map', text: 'Map', link: '/my-map', auth: true},\n  { id: 'rankings', text: 'Rank', link: '/rankings', auth: true},\n  { id: 'login', text: 'Login', link: '/', auth: false},\n  { id: 'signup', text: 'Signup', link: '/signup', auth: false}\n];\n\n\nclass navigationItems extends Component {\n  state = this.props.state;\n\n  getUserName = () => {\n    let userId = localStorage.getItem('userId');\n    let token = localStorage.getItem('token');\n    fetch('http://localhost:8080/auth/user/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching user name failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        this.setState({\n          name: resData.userObj.name\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n    }\n    \n  componentDidMount() {\n    const userId = localStorage.getItem('userId');\n    const token = localStorage.getItem('token');\n    if (userId && token){\n      this.setState({\n        loaded: true,\n        name:  this.getUserName()\n      })\n    }\n  }\n  \n  render () {\n    // if (this.props.isAuth && (!this.state)){\n    //   this.componentDidMount();\n    // }\n    return ([\n        ...navItems.filter(item => item.auth === this.props.isAuth).map(item => (\n          <li\n            key={item.id}\n            className={['navigation-item', this.props.mobile ? 'mobile' : ''].join(' ')}\n          >\n            <NavLink to={item.link} exact onClick={this.props.onChoose}>\n              {item.text}\n            </NavLink>\n          </li>\n        )),\n        this.props.isAuth && this.state && this.state.name && (\n          <li className=\"navigation-item\" key=\"logout\">\n            <Dropdown>\n              <Dropdown.Toggle variant=\"Warning\" id=\"dropdown-basic\">\n                Hello {this.state.name}!\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                <Dropdown.Item \n                  style={{color: \"purple\"}} \n                  onClick={this.props.onLogout}>\n                  Logout\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n          </li>\n        )]);\n  }\n}\n\nexport default navigationItems;\n"]},"metadata":{},"sourceType":"module"}