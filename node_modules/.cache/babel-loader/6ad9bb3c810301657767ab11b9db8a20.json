{"ast":null,"code":"import _toConsumableArray from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/SHAWN/Downloads/SpotShare/src/components/Navigation/NavigationItems/NavigationItems.js\";\nimport React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { Dropdown } from 'react-bootstrap';\nimport './NavigationItems.css';\nvar navItems = [{\n  id: 'feed',\n  text: 'Feed',\n  link: '/',\n  auth: true\n}, {\n  id: 'my-profile',\n  text: 'My Profile',\n  link: '/posts',\n  auth: true\n}, {\n  id: 'my-bucket',\n  text: 'My Bucket',\n  link: '/my-bucket',\n  auth: true\n}, {\n  id: 'my-map',\n  text: 'My Map',\n  link: '/my-map',\n  auth: true\n}, {\n  id: 'login',\n  text: 'Login',\n  link: '/',\n  auth: false\n}, {\n  id: 'signup',\n  text: 'Signup',\n  link: '/signup',\n  auth: false\n}];\n\nvar navigationItems =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(navigationItems, _Component);\n\n  function navigationItems() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, navigationItems);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(navigationItems)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.getUserName = function () {\n      var userId = localStorage.getItem('userId');\n      var token = localStorage.getItem('token');\n      fetch('http://localhost:8080/auth/user/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      }).then(function (res) {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching user name failed!');\n        }\n\n        return res.json();\n      }).then(function (resData) {\n        console.log(resData.userObj.name);\n\n        _this.setState({\n          name: resData.userObj.name\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(navigationItems, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var userId = localStorage.getItem('userId');\n      var token = localStorage.getItem('token');\n\n      if (userId && token) {\n        this.setState({\n          loaded: true,\n          name: this.getUserName()\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var userId = localStorage.getItem('userId');\n      var token = localStorage.getItem('token');\n      console.log(this.state.name);\n      return [].concat(_toConsumableArray(navItems.filter(function (item) {\n        return item.auth === _this2.props.isAuth;\n      }).map(function (item) {\n        return React.createElement(\"li\", {\n          key: item.id,\n          className: ['navigation-item', _this2.props.mobile ? 'mobile' : ''].join(' '),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(NavLink, {\n          to: item.link,\n          exact: true,\n          onClick: _this2.props.onChoose,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, item.text));\n      })), [this.props.isAuth && this.state && this.state.name && React.createElement(\"li\", {\n        className: \"navigation-item\",\n        key: \"logout\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(Dropdown, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(Dropdown.Toggle, {\n        variant: \"Warning\",\n        id: \"dropdown-basic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, this.state.name), React.createElement(Dropdown.Menu, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(Dropdown.Item, {\n        style: {\n          color: \"purple\"\n        },\n        onClick: this.props.onLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Logout\"))))]);\n    }\n  }]);\n\n  return navigationItems;\n}(Component);\n\nexport default navigationItems;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/SpotShare/src/components/Navigation/NavigationItems/NavigationItems.js"],"names":["React","Component","NavLink","Dropdown","navItems","id","text","link","auth","navigationItems","getUserName","userId","localStorage","getItem","token","fetch","method","headers","Authorization","then","res","status","Error","json","resData","console","log","userObj","name","setState","catch","err","loaded","state","filter","item","props","isAuth","map","mobile","join","onChoose","color","onLogout"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { NavLink } from 'react-router-dom';\nimport {Dropdown} from 'react-bootstrap';\n\nimport './NavigationItems.css';\n\nconst navItems = [\n  { id: 'feed', text: 'Feed', link: '/', auth: true },\n  { id: 'my-profile', text: 'My Profile', link: '/posts', auth: true},\n  { id: 'my-bucket', text: 'My Bucket', link: '/my-bucket', auth: true},\n  { id: 'my-map', text: 'My Map', link: '/my-map', auth: true},\n  { id: 'login', text: 'Login', link: '/', auth: false },\n  { id: 'signup', text: 'Signup', link: '/signup', auth: false }\n];\n\n\nclass navigationItems extends Component {\n\n  getUserName = () => {\n    const userId = localStorage.getItem('userId');\n    const token = localStorage.getItem('token');\n    fetch('http://localhost:8080/auth/user/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching user name failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData.userObj.name);\n        this.setState({\n          name: resData.userObj.name\n        });\n      })\n      .catch(err => {\n        console.log(err);\n      });\n    }\n    \n  componentDidMount() {\n    const userId = localStorage.getItem('userId');\n    const token = localStorage.getItem('token');\n    if (userId && token){\n      this.setState({\n        loaded: true,\n        name:  this.getUserName()\n      })\n    }\n  }\n  \n  render () {\n    const userId = localStorage.getItem('userId');\n    const token = localStorage.getItem('token');\n    console.log(this.state.name);\n    return ([\n        ...navItems.filter(item => item.auth === this.props.isAuth).map(item => (\n          <li\n            key={item.id}\n            className={['navigation-item', this.props.mobile ? 'mobile' : ''].join(' ')}\n          >\n            <NavLink to={item.link} exact onClick={this.props.onChoose}>\n              {item.text}\n            </NavLink>\n          </li>\n        )),\n        this.props.isAuth && this.state && this.state.name && (\n          <li className=\"navigation-item\" key=\"logout\">\n            <Dropdown>\n              <Dropdown.Toggle variant=\"Warning\" id=\"dropdown-basic\">\n                {this.state.name}\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                <Dropdown.Item \n                  style={{color: \"purple\"}} \n                  onClick={this.props.onLogout}>\n                  Logout\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n          </li>\n        )]);\n  }\n}\n\nexport default navigationItems;\n"]},"metadata":{},"sourceType":"module"}