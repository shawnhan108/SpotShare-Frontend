{"ast":null,"code":"import _regeneratorRuntime from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/SHAWN/Downloads/SpotShare/src/components/Navigation/NavigationItems/NavigationItems.js\";\nimport React, { Component } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { Dropdown } from 'react-bootstrap';\nimport './NavigationItems.css';\nvar navItems = [{\n  id: 'feed',\n  text: 'Feed',\n  link: '/',\n  auth: true\n}, {\n  id: 'my-profile',\n  text: 'My Profile',\n  link: '/posts',\n  auth: true\n}, {\n  id: 'my-bucket',\n  text: 'My Bucket',\n  link: '/my-bucket',\n  auth: true\n}, {\n  id: 'my-map',\n  text: 'My Map',\n  link: '/my-map',\n  auth: true\n}, {\n  id: 'login',\n  text: 'Login',\n  link: '/',\n  auth: false\n}, {\n  id: 'signup',\n  text: 'Signup',\n  link: '/signup',\n  auth: false\n}];\n\nvar navigationItems =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(navigationItems, _Component);\n\n  function navigationItems() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, navigationItems);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(navigationItems)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loaded: false,\n      isAuth: _this.props.isAuth\n    };\n\n    _this.getUserName = function () {\n      var userId = localStorage.getItem('userId');\n      var token = localStorage.getItem('token');\n      fetch('http://localhost:8080/auth/user/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      }).then(function (res) {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching user name failed!');\n        }\n\n        return res.json();\n      }).then(function (resData) {\n        console.log(resData.userObj.name);\n        return resData.userObj.name;\n      }).catch(function (err) {\n        console.log(err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(navigationItems, [{\n    key: \"render\",\n    // componentDidMount() {\n    //   if (Myid && Mytoken){\n    //     console.log('in in')\n    //     this.setState({\n    //       loaded: true,\n    //       name:  this.getUserName(Myid, Mytoken)\n    //     })\n    //   }\n    // }\n    value: function () {\n      var _render = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var userId, token, name;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                userId = localStorage.getItem('userId');\n                token = localStorage.getItem('token');\n                _context.next = 4;\n                return this.getUserName();\n\n              case 4:\n                name = _context.sent;\n                console.log(name);\n                return _context.abrupt(\"return\", [].concat(_toConsumableArray(navItems.filter(function (item) {\n                  return item.auth === _this2.props.isAuth;\n                }).map(function (item) {\n                  return React.createElement(\"li\", {\n                    key: item.id,\n                    className: ['navigation-item', _this2.props.mobile ? 'mobile' : ''].join(' '),\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 66\n                    },\n                    __self: this\n                  }, React.createElement(NavLink, {\n                    to: item.link,\n                    exact: true,\n                    onClick: _this2.props.onChoose,\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 70\n                    },\n                    __self: this\n                  }, item.text));\n                })), [this.props.isAuth && userId && token && React.createElement(\"li\", {\n                  className: \"navigation-item\",\n                  key: \"logout\",\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 76\n                  },\n                  __self: this\n                }, React.createElement(Dropdown, {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 77\n                  },\n                  __self: this\n                }, React.createElement(Dropdown.Toggle, {\n                  variant: \"Warning\",\n                  id: \"dropdown-basic\",\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 78\n                  },\n                  __self: this\n                }, name), React.createElement(Dropdown.Menu, {\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 81\n                  },\n                  __self: this\n                }, React.createElement(Dropdown.Item, {\n                  style: {\n                    color: \"purple\"\n                  },\n                  onClick: this.props.onLogout,\n                  __source: {\n                    fileName: _jsxFileName,\n                    lineNumber: 82\n                  },\n                  __self: this\n                }, \"Logout\"))))]));\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function render() {\n        return _render.apply(this, arguments);\n      }\n\n      return render;\n    }()\n  }]);\n\n  return navigationItems;\n}(Component);\n\nexport default navigationItems;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/SpotShare/src/components/Navigation/NavigationItems/NavigationItems.js"],"names":["React","Component","NavLink","Dropdown","navItems","id","text","link","auth","navigationItems","state","loaded","isAuth","props","getUserName","userId","localStorage","getItem","token","fetch","method","headers","Authorization","then","res","status","Error","json","resData","console","log","userObj","name","catch","err","filter","item","map","mobile","join","onChoose","color","onLogout"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { NavLink } from 'react-router-dom';\nimport {Dropdown} from 'react-bootstrap';\n\nimport './NavigationItems.css';\n\nconst navItems = [\n  { id: 'feed', text: 'Feed', link: '/', auth: true },\n  { id: 'my-profile', text: 'My Profile', link: '/posts', auth: true},\n  { id: 'my-bucket', text: 'My Bucket', link: '/my-bucket', auth: true},\n  { id: 'my-map', text: 'My Map', link: '/my-map', auth: true},\n  { id: 'login', text: 'Login', link: '/', auth: false },\n  { id: 'signup', text: 'Signup', link: '/signup', auth: false }\n];\n\n\nclass navigationItems extends Component {\n  \n  state = {\n    loaded: false,\n    isAuth: this.props.isAuth\n  }\n\n  getUserName = () => {\n    const userId = localStorage.getItem('userId');\n    const token = localStorage.getItem('token');\n    fetch('http://localhost:8080/auth/user/' + userId, {\n        method: 'GET',\n        headers: {\n          Authorization: 'Bearer ' + token\n        }\n      })\n      .then(res => {\n        if (res.status !== 200 && res.status !== 201) {\n          throw new Error('Fetching user name failed!');\n        }\n        return res.json();\n      })\n      .then(resData => {\n        console.log(resData.userObj.name);\n        return resData.userObj.name;\n      })\n      .catch(err => {\n        console.log(err);\n      });\n    }\n    \n  // componentDidMount() {\n    \n  //   if (Myid && Mytoken){\n  //     console.log('in in')\n  //     this.setState({\n  //       loaded: true,\n  //       name:  this.getUserName(Myid, Mytoken)\n  //     })\n  //   }\n  // }\n  \n  async render () {\n    const userId = localStorage.getItem('userId');\n    const token = localStorage.getItem('token');\n    const name = await this.getUserName();\n    console.log(name);\n    return ([\n        ...navItems.filter(item => item.auth === this.props.isAuth).map(item => (\n          <li\n            key={item.id}\n            className={['navigation-item', this.props.mobile ? 'mobile' : ''].join(' ')}\n          >\n            <NavLink to={item.link} exact onClick={this.props.onChoose}>\n              {item.text}\n            </NavLink>\n          </li>\n        )),\n        this.props.isAuth && userId && token && (\n          <li className=\"navigation-item\" key=\"logout\">\n            <Dropdown>\n              <Dropdown.Toggle variant=\"Warning\" id=\"dropdown-basic\">\n                {name}\n              </Dropdown.Toggle>\n              <Dropdown.Menu>\n                <Dropdown.Item \n                  style={{color: \"purple\"}} \n                  onClick={this.props.onLogout}>\n                  Logout\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n          </li>\n        )]);\n  }\n}\n\nexport default navigationItems;\n"]},"metadata":{},"sourceType":"module"}