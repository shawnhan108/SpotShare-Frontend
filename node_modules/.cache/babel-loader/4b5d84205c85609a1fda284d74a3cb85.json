{"ast":null,"code":"import _regeneratorRuntime from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/SHAWN/Downloads/SpotShare/src/components/Feed/Post/Post.js\";\nimport React, { Component } from 'react';\nimport Button from '../../Button/Button';\nimport './Post.css';\nimport { Container, Row } from 'react-bootstrap';\nimport Loader from '../../Loader/Loader';\n\nvar post =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(post, _Component);\n\n  function post() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, post);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(post)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      bucketNum: 0,\n      postInBucket: false,\n      btnTitle: 'Bucket!',\n      loading: 'true'\n    };\n\n    _this.bucketHandler = function () {\n      if (!_this.state.postInBucket) {\n        _this.setState({\n          postInBucket: true,\n          btnTitle: 'Unbucket!'\n        });\n\n        return _this.props.onBucket();\n      } else {\n        _this.setState({\n          postInBucket: false,\n          btnTitle: 'Bucket!'\n        });\n\n        return _this.props.offBucket();\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(post, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                res = fetch('http://localhost:8080/feed/bucket-num/' + this.props.id, {\n                  headers: {\n                    Authorization: 'Bearer ' + this.props.token\n                  }\n                });\n                console.log(res);\n\n                if (!(res.status !== 200 && res.status !== 201)) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new Error('Fetching bucket number failed!');\n\n              case 5:\n                resData = res.json();\n                console.log(resData);\n                this.setState({\n                  bucketNum: resData.bucketNum\n                });\n\n                if (this.props.userBucket.includes(this.props.id)) {\n                  this.setState({\n                    postInBucket: true,\n                    btnTitle: 'Unbucket!(' + resData.bucketNum + ')'\n                  });\n                } else {\n                  this.setState({\n                    postInBucket: false,\n                    btnTitle: 'Bucket!(' + resData.bucketNum + ')'\n                  });\n                }\n\n                this.setState({\n                  loading: 'false'\n                });\n                _context.next = 15;\n                break;\n\n              case 12:\n                _context.prev = 12;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n\n              case 15:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 12]]);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loading === 'true') {\n        return React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        });\n      }\n\n      ;\n      return React.createElement(\"article\", {\n        className: \"post\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(\"header\", {\n        className: \"post__header\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"post__title text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, this.props.title), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), React.createElement(\"h3\", {\n        className: \"post__infos\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, \"Posted by \", this.props.author, \" on \", this.props.date, \" ||  Shot at \", this.props.location.text, \" on \", this.props.taken_date)), React.createElement(\"div\", {\n        className: \"post__image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"post_img\",\n        src: 'http://localhost:8080/' + this.props.image,\n        alt: this.props.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      })), React.createElement(Container, {\n        className: \"text-center buttonbar\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"button-pad pull-right\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(Button, {\n        mode: \"flat\",\n        link: this.props.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"View\")), React.createElement(\"div\", {\n        className: \"button-pad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }, React.createElement(Button, {\n        mode: \"flat\",\n        onClick: this.props.onStartEdit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93\n        },\n        __self: this\n      }, \"Edit\")), React.createElement(\"div\", {\n        className: \"button-pad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, React.createElement(Button, {\n        mode: \"flat\",\n        design: \"danger\",\n        colorChange: \"colorChange\",\n        onClick: this.bucketHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98\n        },\n        __self: this\n      }, this.state.btnTitle)), React.createElement(\"div\", {\n        className: \"button-pad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102\n        },\n        __self: this\n      }, React.createElement(Button, {\n        mode: \"flat\",\n        design: \"danger\",\n        onClick: this.props.onDelete,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, \"Delete\")))));\n    }\n  }]);\n\n  return post;\n}(Component);\n\nexport default post;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/SpotShare/src/components/Feed/Post/Post.js"],"names":["React","Component","Button","Container","Row","Loader","post","state","bucketNum","postInBucket","btnTitle","loading","bucketHandler","setState","props","onBucket","offBucket","res","fetch","id","headers","Authorization","token","console","log","status","Error","resData","json","userBucket","includes","title","author","date","location","text","taken_date","image","onStartEdit","onDelete"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport Button from '../../Button/Button';\nimport './Post.css';\nimport { Container, Row } from 'react-bootstrap';\nimport Loader from '../../Loader/Loader';\n\nclass post extends Component {\n  state = {\n    bucketNum: 0,\n    postInBucket: false,\n    btnTitle: 'Bucket!',\n    loading: 'true'\n  };\n\n  bucketHandler = () => {\n    if (!this.state.postInBucket) {\n      this.setState({\n        postInBucket: true,\n        btnTitle: 'Unbucket!'\n      });\n      return this.props.onBucket();\n    }\n    else {\n      this.setState({\n        postInBucket: false,\n        btnTitle: 'Bucket!'\n      });\n      return this.props.offBucket();\n    }\n  }\n\n  async componentDidMount() {\n    try {\n      res = fetch('http://localhost:8080/feed/bucket-num/' + this.props.id, {\n        headers: {\n          Authorization: 'Bearer ' + this.props.token\n        }\n      })\n      console.log(res);\n      if (res.status !== 200 && res.status !== 201) {\n        throw new Error('Fetching bucket number failed!');\n      }\n      resData = res.json();\n      console.log(resData);\n        this.setState({\n          bucketNum: resData.bucketNum\n        });\n      if (this.props.userBucket.includes(this.props.id)) {\n          this.setState({\n            postInBucket: true,\n            btnTitle: 'Unbucket!(' + resData.bucketNum + ')'\n          });\n        }\n      else {\n          this.setState({\n            postInBucket: false,\n            btnTitle: 'Bucket!(' + resData.bucketNum + ')'\n          });\n        }\n        this.setState({\n          loading: 'false'\n        });\n    } catch (err) {\n      console.log(err);\n    }  \n  }\n\n  render() {\n    if (this.state.loading === 'true') {\n      return <Loader />\n    };\n    return (\n      <article className=\"post\">\n        <header className=\"post__header\">\n          <h1 className=\"post__title text-center\">{this.props.title}</h1>\n          <hr></hr>\n          <h3 className=\"post__infos\">\n            Posted by {this.props.author} on {this.props.date} ||  Shot at {this.props.location.text} on {this.props.taken_date}\n          </h3>\n        </header>\n        <div className=\"post__image\">\n          <img className=\"post_img\" src={'http://localhost:8080/' + this.props.image} alt={this.props.title} />\n        </div>\n        <Container className=\"text-center buttonbar\">\n          <Row className=\"text-center\">\n            <div className=\"button-pad pull-right\">\n              <Button mode=\"flat\" link={this.props.id}>\n                View\n        </Button>\n            </div>\n            <div className=\"button-pad\">\n              <Button mode=\"flat\" onClick={this.props.onStartEdit}>\n                Edit\n        </Button>\n            </div>\n            <div className=\"button-pad\">\n              <Button mode=\"flat\" design=\"danger\" colorChange=\"colorChange\" onClick={this.bucketHandler}>\n                {this.state.btnTitle}\n              </Button>\n            </div>\n            <div className=\"button-pad\">\n              <Button mode=\"flat\" design=\"danger\" onClick={this.props.onDelete}>\n                Delete\n        </Button>\n            </div>\n          </Row>\n        </Container>\n      </article>\n    )\n  }\n}\n\nexport default post;\n"]},"metadata":{},"sourceType":"module"}