{"ast":null,"code":"import _toConsumableArray from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/SHAWN/Downloads/SpotShare/src/pages/Feed/SinglePost/SinglePost.js\";\nimport React, { Component } from 'react';\nimport Image from '../../../components/Image/Image';\nimport './SinglePost.css';\nimport { Container, ProgressBar, Table } from 'react-bootstrap';\nimport Mapp from '../../../components/View-map/view-map';\nimport Loader from '../../../components/Loader/Loader';\nimport Button from '../../../components/Button/Button';\nimport Toast from '../../../components/Toast/Toast';\n\nvar SinglePost =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SinglePost, _Component);\n\n  function SinglePost() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SinglePost);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SinglePost)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      title: '',\n      author: '',\n      date: '',\n      image: '',\n      content: '',\n      taken_date: '',\n      location: '',\n      ISO: '',\n      shutter_speed: '',\n      aperture: '',\n      camera: '',\n      lens: '',\n      equipment: '',\n      edit_soft: '',\n      user_rate: '',\n      loading: 'true',\n      public_rate: [{\n        rating: 5\n      }],\n      loadComment: 1,\n      btnTitle: 'Load More',\n      viewMap: false\n    };\n\n    _this.progressBarColorHandler = function () {\n      if (_this.state.user_rate > 3) {\n        return \"success\";\n      } else if (_this.state.user_rate > 1) {\n        return \"warning\";\n      } else {\n        return \"danger\";\n      }\n    };\n\n    _this.getRateAverage = function () {\n      var ratings = _this.state.public_rate;\n      var sum = 0;\n      var num = 0;\n\n      for (var i = 0; i < ratings.length; i++) {\n        sum += ratings[i].rating;\n        num += 1;\n      }\n\n      var result = sum / num;\n\n      if (Number.isNaN(result)) {\n        return ['None', 'None', 'None'];\n      } else {\n        return [result * 20, result + '/ 5', result];\n      }\n    };\n\n    _this.getAllCommentsHandler =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(_this.state.btnTitle === 'Load More')) {\n                _context.next = 5;\n                break;\n              }\n\n              _context.next = 3;\n              return _this.setState({\n                btnTitle: 'Collapse',\n                loadComment: _this.state.public_rate.length\n              });\n\n            case 3:\n              _context.next = 7;\n              break;\n\n            case 5:\n              _context.next = 7;\n              return _this.setState({\n                btnTitle: 'Load More',\n                loadComment: 1\n              });\n\n            case 7:\n              return _context.abrupt(\"return\");\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _this;\n  }\n\n  _createClass(SinglePost, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var postId, res, resData, res2, resData2;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                postId = this.props.match.params.postId;\n                _context2.prev = 1;\n                _context2.next = 4;\n                return fetch('http://localhost:8080/feed/post/' + postId, {\n                  headers: {\n                    Authorization: 'Bearer ' + this.props.token\n                  }\n                });\n\n              case 4:\n                res = _context2.sent;\n\n                if (!(res.status !== 200)) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw new Error('Failed to fetch status');\n\n              case 7:\n                _context2.next = 9;\n                return res.json();\n\n              case 9:\n                resData = _context2.sent;\n                this.setState({\n                  title: resData.post.title,\n                  author: resData.post.creator.name,\n                  image: 'http://localhost:8080/' + resData.post.imageUrl,\n                  date: new Date(resData.post.createdAt).toLocaleDateString('en-US'),\n                  content: resData.post.content,\n                  taken_date: resData.post.taken_date,\n                  location: resData.post.location,\n                  ISO: resData.post.ISO,\n                  shutter_speed: resData.post.shutter_speed,\n                  aperture: resData.post.aperture,\n                  camera: resData.post.camera,\n                  lens: resData.post.lens,\n                  equipment: resData.post.equipment,\n                  edit_soft: resData.post.edit_soft,\n                  user_rate: resData.post.user_rate,\n                  loading: 'false'\n                });\n                _context2.next = 13;\n                return fetch('http://localhost:8080/feed/rating/' + postId, {\n                  headers: {\n                    Authorization: 'Bearer ' + this.props.token\n                  }\n                });\n\n              case 13:\n                res2 = _context2.sent;\n\n                if (!(res2.status !== 200)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                throw new Error('Failed to fetch status');\n\n              case 16:\n                _context2.next = 18;\n                return res2.json();\n\n              case 18:\n                resData2 = _context2.sent;\n                this.setState({\n                  public_rate: resData2.ratings\n                });\n                _context2.next = 25;\n                break;\n\n              case 22:\n                _context2.prev = 22;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log(_context2.t0);\n\n              case 25:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 22]]);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      if (this.state.loading === 'true') {\n        return React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        });\n      }\n\n      var rating_copy = JSON.parse(JSON.stringify(this.state.public_rate));\n      var public_rate_data = this.getRateAverage();\n      return [React.createElement(\"section\", {\n        className: \"single-post\",\n        key: \"mainSinglePosts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(Mapp, {\n        viewMap: this.state.viewMap,\n        text: this.state.location.text,\n        value: this.state.location.center,\n        cancelViewMap: function cancelViewMap() {\n          _this2.setState({\n            viewMap: false\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, this.state.title), React.createElement(Container, {\n        className: \"Container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single-post-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Created by \", this.state.author, \" on \", this.state.date), React.createElement(\"h2\", {\n        className: \"single-post-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, \"Shot at \", this.state.location.text, \" on \", this.state.taken_date)), React.createElement(\"hr\", {\n        className: \"hr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"single-post__image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(Image, {\n        imageUrl: this.state.image,\n        className: \"the_image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"single-post__info padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.content), React.createElement(\"hr\", {\n        className: \"hr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }), React.createElement(Table, {\n        striped: true,\n        bordered: true,\n        hover: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, \"Parameters\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Value\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, \"Equipments\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Name\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"ISO\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, this.state.ISO), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Camera\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, this.state.camera)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Shutter Speed\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, this.state.shutter_speed), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, \"Lens\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, this.state.lens)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, \"Aperture\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, this.state.aperture), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, \"Other Equips\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, this.state.equipment)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Post-Editing Softwares\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, this.state.edit_soft)), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Author Rating\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, this.state.user_rate), React.createElement(\"td\", {\n        colSpan: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, React.createElement(ProgressBar, {\n        animated: true,\n        striped: true,\n        variant: this.progressBarColorHandler(),\n        now: this.state.user_rate / 5 * 100,\n        label: this.state.user_rate + ' / 5',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }))), React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, \"Public Rating\"), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, public_rate_data[2]), React.createElement(\"td\", {\n        colSpan: \"2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(ProgressBar, {\n        animated: true,\n        striped: true,\n        variant: this.progressBarColorHandler(),\n        label: public_rate_data[1],\n        now: public_rate_data[0],\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })))))), React.createElement(\"div\", {\n        style: {\n          height: \"30px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), React.createElement(Button, {\n        mode: \"flat\",\n        onClick: function onClick() {\n          _this2.setState({\n            viewMap: true\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, \"View Map\"), React.createElement(\"div\", {\n        style: {\n          height: \"30px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }))].concat(_toConsumableArray(rating_copy.sort(function (a, b) {\n        return b.rating - a.rating;\n      }).splice(0, Math.min(this.state.public_rate.length, this.state.loadComment)).map(function (rate) {\n        return React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            paddingBottom: '2rem'\n          },\n          key: rate.user + \"'sComment\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, React.createElement(Toast, {\n          user: rate.user,\n          rating: rate.rating,\n          comment: rate.comment,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }));\n      })), [React.createElement(\"div\", {\n        style: {\n          paddingBottom: '2rem',\n          paddingLeft: '2rem',\n          textAlign: 'center'\n        },\n        key: \"LoadAllButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229\n        },\n        __self: this\n      }, React.createElement(Button, {\n        mode: \"flat\",\n        onClick: this.getAllCommentsHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, this.state.btnTitle))]);\n    }\n  }]);\n\n  return SinglePost;\n}(Component);\n\nexport default SinglePost;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/SpotShare/src/pages/Feed/SinglePost/SinglePost.js"],"names":["React","Component","Image","Container","ProgressBar","Table","Mapp","Loader","Button","Toast","SinglePost","state","title","author","date","image","content","taken_date","location","ISO","shutter_speed","aperture","camera","lens","equipment","edit_soft","user_rate","loading","public_rate","rating","loadComment","btnTitle","viewMap","progressBarColorHandler","getRateAverage","ratings","sum","num","i","length","result","Number","isNaN","getAllCommentsHandler","setState","postId","props","match","params","fetch","headers","Authorization","token","res","status","Error","json","resData","post","creator","name","imageUrl","Date","createdAt","toLocaleDateString","res2","resData2","console","log","rating_copy","JSON","parse","stringify","public_rate_data","text","center","height","sort","a","b","splice","Math","min","map","rate","display","alignItems","justifyContent","paddingBottom","user","comment","paddingLeft","textAlign"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport Image from '../../../components/Image/Image';\nimport './SinglePost.css';\nimport { Container, ProgressBar, Table} from 'react-bootstrap';\nimport Mapp from '../../../components/View-map/view-map';\nimport Loader from '../../../components/Loader/Loader';\nimport Button from '../../../components/Button/Button';\nimport Toast from '../../../components/Toast/Toast';\n\nclass SinglePost extends Component {\n  state = {\n    title: '',\n    author: '',\n    date: '',\n    image: '',\n    content: '',\n    taken_date: '',\n    location: '',\n    ISO: '',\n    shutter_speed: '',\n    aperture: '',\n    camera: '',\n    lens: '',\n    equipment: '',\n    edit_soft: '',\n    user_rate: '',\n    loading: 'true',\n    public_rate: [{rating: 5}],\n    loadComment: 1,\n    btnTitle: 'Load More',\n    viewMap: false\n  };\n\n  async componentWillMount() {\n    const postId = this.props.match.params.postId;\n    try{\n    const res = await fetch('http://localhost:8080/feed/post/' + postId, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n    if (res.status !== 200) {\n      throw new Error('Failed to fetch status');\n    }\n    const resData = await res.json();\n    this.setState({\n      title: resData.post.title,\n      author: resData.post.creator.name,\n      image: 'http://localhost:8080/' + resData.post.imageUrl,\n      date: new Date(resData.post.createdAt).toLocaleDateString('en-US'),\n      content: resData.post.content,\n      taken_date: resData.post.taken_date,\n      location: resData.post.location,\n      ISO: resData.post.ISO,\n      shutter_speed: resData.post.shutter_speed,\n      aperture: resData.post.aperture,\n      camera: resData.post.camera,\n      lens: resData.post.lens,\n      equipment: resData.post.equipment,\n      edit_soft: resData.post.edit_soft,\n      user_rate: resData.post.user_rate,\n      loading: 'false'\n    });\n    const res2 = await fetch('http://localhost:8080/feed/rating/' + postId, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n    if (res2.status !== 200) {\n      throw new Error('Failed to fetch status');\n    }\n    const resData2 = await res2.json();\n    this.setState({\n      public_rate: resData2.ratings\n    })\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  progressBarColorHandler = () => {\n    if (this.state.user_rate > 3){\n      return \"success\"\n    }else if (this.state.user_rate > 1){\n      return \"warning\"\n    }else{\n      return \"danger\"\n    }\n  }\n\n  getRateAverage = () => {\n    const ratings = this.state.public_rate;\n    var sum = 0;\n    var num = 0;\n    for (var i = 0; i < ratings.length; i++){\n      sum += ratings[i].rating;\n      num += 1;\n    }\n    const result = sum/num;\n    if (Number.isNaN(result)){\n      return ['None', 'None', 'None']\n    }else{\n      return [result * 20, (result + '/ 5'), result];\n    }\n  }\n\n  getAllCommentsHandler = async () => {\n    if (this.state.btnTitle === 'Load More'){\n      await this.setState({\n        btnTitle: 'Collapse',\n        loadComment: this.state.public_rate.length\n      });\n    } else{\n      await this.setState({\n        btnTitle: 'Load More',\n        loadComment: 1\n      });\n    }\n    return;\n  };\n\n  render() {\n    if (this.state.loading === 'true'){\n      return <Loader />\n    }\n    let rating_copy = JSON.parse(JSON.stringify(this.state.public_rate));\n    let public_rate_data = this.getRateAverage();\n    return ([(\n      <section className=\"single-post\" key='mainSinglePosts'>\n        <Mapp\n          viewMap={this.state.viewMap}\n          text={this.state.location.text}\n          value={this.state.location.center}\n          cancelViewMap={() => {this.setState({viewMap: false})}}\n        />\n        <h1>{this.state.title}</h1>\n        <Container className=\"Container\">\n            <h2 className=\"single-post-center\">\n              Created by {this.state.author} on {this.state.date}\n            </h2>\n            <h2 className=\"single-post-center\">Shot at {this.state.location.text} on {this.state.taken_date}</h2>\n        </Container>\n        <hr className=\"hr\"></hr>\n        <div className=\"single-post__image\">\n          <Image  imageUrl={this.state.image} className=\"the_image\"/>\n        </div>\n        <div className=\"single-post__info padding\">\n          <p>{this.state.content}</p>\n          <hr className=\"hr\"></hr>\n          <Table striped bordered hover>\n            <thead>\n              <tr>\n                <th>Parameters</th>\n                <th>Value</th>\n                <th>Equipments</th>\n                <th>Name</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr>\n                <td>ISO</td>\n                <td>{this.state.ISO}</td>\n                <td>Camera</td>\n                <td>{this.state.camera}</td>\n              </tr>\n              <tr>\n                <td>Shutter Speed</td>\n                <td>{this.state.shutter_speed}</td>\n                <td>Lens</td>\n                <td>{this.state.lens}</td>\n              </tr>\n              <tr>\n                <td>Aperture</td>\n                <td>{this.state.aperture}</td>\n                <td>Other Equips</td>\n                <td>{this.state.equipment}</td>\n              </tr>\n              <tr>\n                <td></td>\n                <td></td>\n                <td>Post-Editing Softwares</td>\n                <td>{this.state.edit_soft}</td>\n              </tr>\n              <tr>\n                <td>Author Rating</td>\n                <td>{this.state.user_rate}</td>\n                <td colSpan=\"2\">\n                  <ProgressBar \n                    animated striped variant={this.progressBarColorHandler()} \n                    now={this.state.user_rate/5*100} \n                    label={this.state.user_rate + ' / 5'}\n                  />\n                </td>\n              </tr>\n              <tr>\n                <td>Public Rating</td>\n                <td>{public_rate_data[2]}</td>\n                <td colSpan=\"2\">\n                  <ProgressBar \n                    animated striped variant={this.progressBarColorHandler()} \n                    label={public_rate_data[1]}\n                    now={public_rate_data[0]} \n                  />\n                </td>\n              </tr>\n            </tbody>\n          </Table>\n        </div>\n        <div style={{height: \"30px\"}}></div>\n        <Button mode='flat' onClick={() => {this.setState({viewMap: true})}}>View Map</Button>\n        <div style={{height: \"30px\"}}></div>\n      </section>),\n      ...rating_copy\n        .sort(function(a, b){return b.rating - a.rating})\n        .splice(0, Math.min(this.state.public_rate.length, this.state.loadComment))\n        .map(rate => (\n      <div style={{display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    paddingBottom: '2rem'}}\n            key={rate.user + \"'sComment\"}>\n        <Toast\n          user={rate.user}\n          rating={rate.rating}\n          comment={rate.comment}/>\n      </div>\n    )),\n    (<div style={{paddingBottom: '2rem', paddingLeft: '2rem', textAlign: 'center'}}\n          key='LoadAllButton'>\n      <Button mode=\"flat\" onClick={this.getAllCommentsHandler}>\n        {this.state.btnTitle}\n      </Button>\n    </div>)\n    ]);\n  }\n}\n\nexport default SinglePost;\n"]},"metadata":{},"sourceType":"module"}