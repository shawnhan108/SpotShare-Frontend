{"ast":null,"code":"import _toConsumableArray from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _regeneratorRuntime from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/SHAWN/Downloads/SpotShare/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/SHAWN/Downloads/SpotShare/src/pages/Feed/SinglePost/SinglePost.js\";\nimport React, { Component } from 'react';\nimport Image from '../../../components/Image/Image';\nimport './SinglePost.css';\nimport { Container, Row, Col, ProgressBar, Toast } from 'react-bootstrap';\nimport Mapp from '../../../components/View-map/view-map';\nimport Loader from '../../../components/Loader/Loader';\nimport Button from '../../../components/Button/Button';\n\nvar SinglePost =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SinglePost, _Component);\n\n  function SinglePost() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SinglePost);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SinglePost)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      title: '',\n      author: '',\n      date: '',\n      image: '',\n      content: '',\n      taken_date: '',\n      location: '',\n      ISO: '',\n      shutter_speed: '',\n      aperture: '',\n      camera: '',\n      lens: '',\n      equipment: '',\n      edit_soft: '',\n      user_rate: '',\n      loading: 'true',\n      public_rate: [{\n        rating: 5\n      }],\n      public_rate_backup: [{\n        rating: 5\n      }],\n      loadComment: 1\n    };\n\n    _this.progressBarColorHandler = function () {\n      if (_this.state.user_rate > 3) {\n        return \"success\";\n      } else if (_this.state.user_rate > 1) {\n        return \"warning\";\n      } else {\n        return \"danger\";\n      }\n    };\n\n    _this.getRateAverage = function () {\n      var ratings = _this.state.public_rate;\n      var sum = 0;\n      var num = 0;\n\n      for (var i = 0; i < ratings.length; i++) {\n        sum += ratings[i].rating;\n        num += 1;\n      }\n\n      return sum / num;\n    };\n\n    _this.getAllCommentsHandler =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log('in');\n              console.log(_this.state.public_rate_backup.length);\n              _context.next = 4;\n              return _this.setState({\n                loadComment: _this.state.public_rate_backup.length,\n                public_rate: _this.state.public_rate_backup\n              });\n\n            case 4:\n              return _context.abrupt(\"return\");\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _this;\n  }\n\n  _createClass(SinglePost, [{\n    key: \"componentWillMount\",\n    value: function () {\n      var _componentWillMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var postId, res, resData, res2, resData2;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                postId = this.props.match.params.postId;\n                _context2.prev = 1;\n                _context2.next = 4;\n                return fetch('http://localhost:8080/feed/post/' + postId, {\n                  headers: {\n                    Authorization: 'Bearer ' + this.props.token\n                  }\n                });\n\n              case 4:\n                res = _context2.sent;\n\n                if (!(res.status !== 200)) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                throw new Error('Failed to fetch status');\n\n              case 7:\n                _context2.next = 9;\n                return res.json();\n\n              case 9:\n                resData = _context2.sent;\n                this.setState({\n                  title: resData.post.title,\n                  author: resData.post.creator.name,\n                  image: 'http://localhost:8080/' + resData.post.imageUrl,\n                  date: new Date(resData.post.createdAt).toLocaleDateString('en-US'),\n                  content: resData.post.content,\n                  taken_date: resData.post.taken_date,\n                  location: resData.post.location,\n                  ISO: resData.post.ISO,\n                  shutter_speed: resData.post.shutter_speed,\n                  aperture: resData.post.aperture,\n                  camera: resData.post.camera,\n                  lens: resData.post.lens,\n                  equipment: resData.post.equipment,\n                  edit_soft: resData.post.edit_soft,\n                  user_rate: resData.post.user_rate,\n                  loading: 'false'\n                });\n                _context2.next = 13;\n                return fetch('http://localhost:8080/feed/rating/' + postId, {\n                  headers: {\n                    Authorization: 'Bearer ' + this.props.token\n                  }\n                });\n\n              case 13:\n                res2 = _context2.sent;\n\n                if (!(res2.status !== 200)) {\n                  _context2.next = 16;\n                  break;\n                }\n\n                throw new Error('Failed to fetch status');\n\n              case 16:\n                _context2.next = 18;\n                return res2.json();\n\n              case 18:\n                resData2 = _context2.sent;\n                this.setState({\n                  public_rate: resData2.ratings,\n                  public_rate_backup: resData2.ratings\n                });\n                _context2.next = 25;\n                break;\n\n              case 22:\n                _context2.prev = 22;\n                _context2.t0 = _context2[\"catch\"](1);\n                console.log(_context2.t0);\n\n              case 25:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 22]]);\n      }));\n\n      function componentWillMount() {\n        return _componentWillMount.apply(this, arguments);\n      }\n\n      return componentWillMount;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loading === 'true') {\n        return React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        });\n      }\n\n      console.log(this.state.public_rate);\n      console.log(this.state.public_rate_backup);\n      console.log(this.state.public_rate_backup.length);\n      console.log(this.state.loadComment);\n      return [React.createElement(\"section\", {\n        className: \"single-post\",\n        key: \"mainSinglePosts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, this.state.title), React.createElement(Container, {\n        className: \"Container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single-post-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, \"Created by \", this.state.author, \" on \", this.state.date), React.createElement(\"h2\", {\n        className: \"single-post-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, \"Shot at \", this.state.location.text, \" on \", this.state.taken_date)), React.createElement(\"hr\", {\n        className: \"hr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"single-post__image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, React.createElement(Image, {\n        contain: true,\n        imageUrl: this.state.image,\n        className: \"the_image\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"single-post__info padding\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, this.state.content), React.createElement(\"hr\", {\n        className: \"hr\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }), React.createElement(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"ISO: \", this.state.ISO)), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Camera: \", this.state.camera))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Shutter Speed: \", this.state.shutter_speed)), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"Lens: \", this.state.lens))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Aperture: \", this.state.aperture)), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, \"Equipments: \", this.state.equipment))), React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Author Rating: \", this.state.user_rate)), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Post-Editing Softwares Used: \", this.state.edit_soft)))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, \"Author Rating: \")), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, React.createElement(ProgressBar, {\n        animated: true,\n        striped: true,\n        variant: this.progressBarColorHandler(),\n        now: this.state.user_rate / 5 * 100,\n        label: this.state.user_rate + ' / 5',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      })))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"single_post_normal_h2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, \"Public Rating: \")), React.createElement(Col, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(ProgressBar, {\n        animated: true,\n        striped: true,\n        variant: this.progressBarColorHandler(),\n        now: this.getRateAverage() / 5 * 100,\n        label: this.getRateAverage() + ' / 5',\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }))))), React.createElement(\"div\", {\n        style: {\n          height: \"100px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"map-div\",\n        style: {\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Mapp, {\n        text: this.state.location.text,\n        value: this.state.location.center,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        style: {\n          height: '100px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }))].concat(_toConsumableArray(this.state.public_rate.sort(function (a, b) {\n        return b.rating - a.rating;\n      }) //.splice(0, Math.min(this.state.public_rate.length, this.state.loadComment))\n      .map(function (rate) {\n        return React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            paddingBottom: '2rem'\n          },\n          key: rate.user + \"'sComment\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, React.createElement(Toast, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        }, React.createElement(Toast.Header, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 207\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          className: \"mr-auto\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 208\n          },\n          __self: this\n        }, rate.user), React.createElement(\"small\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        }, \"rating: \", rate.rating)), React.createElement(Toast.Body, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211\n          },\n          __self: this\n        }, rate.comment)));\n      })), [React.createElement(\"div\", {\n        style: {\n          paddingBottom: '2rem',\n          paddingLeft: '2rem',\n          textAlign: 'center'\n        },\n        key: \"LoadAllButton\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, React.createElement(Button, {\n        mode: \"flat\",\n        onClick: this.getAllCommentsHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, \"Load all\"))]);\n    }\n  }]);\n\n  return SinglePost;\n}(Component);\n\nexport default SinglePost;","map":{"version":3,"sources":["/Users/SHAWN/Downloads/SpotShare/src/pages/Feed/SinglePost/SinglePost.js"],"names":["React","Component","Image","Container","Row","Col","ProgressBar","Toast","Mapp","Loader","Button","SinglePost","state","title","author","date","image","content","taken_date","location","ISO","shutter_speed","aperture","camera","lens","equipment","edit_soft","user_rate","loading","public_rate","rating","public_rate_backup","loadComment","progressBarColorHandler","getRateAverage","ratings","sum","num","i","length","getAllCommentsHandler","console","log","setState","postId","props","match","params","fetch","headers","Authorization","token","res","status","Error","json","resData","post","creator","name","imageUrl","Date","createdAt","toLocaleDateString","res2","resData2","text","height","display","alignItems","justifyContent","center","sort","a","b","map","rate","paddingBottom","user","comment","paddingLeft","textAlign"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AAEA,OAAOC,KAAP,MAAkB,iCAAlB;AACA,OAAO,kBAAP;AACA,SAASC,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BC,WAA9B,EAA2CC,KAA3C,QAAuD,iBAAvD;AACA,OAAOC,IAAP,MAAiB,uCAAjB;AACA,OAAOC,MAAP,MAAmB,mCAAnB;AACA,OAAOC,MAAP,MAAmB,mCAAnB;;IAGMC,U;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,KAAK,EAAE,EADD;AAENC,MAAAA,MAAM,EAAE,EAFF;AAGNC,MAAAA,IAAI,EAAE,EAHA;AAINC,MAAAA,KAAK,EAAE,EAJD;AAKNC,MAAAA,OAAO,EAAE,EALH;AAMNC,MAAAA,UAAU,EAAE,EANN;AAONC,MAAAA,QAAQ,EAAE,EAPJ;AAQNC,MAAAA,GAAG,EAAE,EARC;AASNC,MAAAA,aAAa,EAAE,EATT;AAUNC,MAAAA,QAAQ,EAAE,EAVJ;AAWNC,MAAAA,MAAM,EAAE,EAXF;AAYNC,MAAAA,IAAI,EAAE,EAZA;AAaNC,MAAAA,SAAS,EAAE,EAbL;AAcNC,MAAAA,SAAS,EAAE,EAdL;AAeNC,MAAAA,SAAS,EAAE,EAfL;AAgBNC,MAAAA,OAAO,EAAE,MAhBH;AAiBNC,MAAAA,WAAW,EAAE,CAAC;AAACC,QAAAA,MAAM,EAAE;AAAT,OAAD,CAjBP;AAkBNC,MAAAA,kBAAkB,EAAE,CAAC;AAACD,QAAAA,MAAM,EAAE;AAAT,OAAD,CAlBd;AAmBNE,MAAAA,WAAW,EAAE;AAnBP,K;;UAsERC,uB,GAA0B,YAAM;AAC9B,UAAI,MAAKrB,KAAL,CAAWe,SAAX,GAAuB,CAA3B,EAA6B;AAC3B,eAAO,SAAP;AACD,OAFD,MAEM,IAAI,MAAKf,KAAL,CAAWe,SAAX,GAAuB,CAA3B,EAA6B;AACjC,eAAO,SAAP;AACD,OAFK,MAED;AACH,eAAO,QAAP;AACD;AACF,K;;UAEDO,c,GAAiB,YAAM;AACrB,UAAMC,OAAO,GAAG,MAAKvB,KAAL,CAAWiB,WAA3B;AACA,UAAIO,GAAG,GAAG,CAAV;AACA,UAAIC,GAAG,GAAG,CAAV;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,OAAO,CAACI,MAA5B,EAAoCD,CAAC,EAArC,EAAwC;AACtCF,QAAAA,GAAG,IAAID,OAAO,CAACG,CAAD,CAAP,CAAWR,MAAlB;AACAO,QAAAA,GAAG,IAAI,CAAP;AACD;;AACD,aAAOD,GAAG,GAACC,GAAX;AACD,K;;UAEDG,qB;;;;6BAAwB;AAAA;AAAA;AAAA;AAAA;AACtBC,cAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACAD,cAAAA,OAAO,CAACC,GAAR,CAAY,MAAK9B,KAAL,CAAWmB,kBAAX,CAA8BQ,MAA1C;AAFsB;AAAA,qBAGhB,MAAKI,QAAL,CAAc;AAClBX,gBAAAA,WAAW,EAAE,MAAKpB,KAAL,CAAWmB,kBAAX,CAA8BQ,MADzB;AAElBV,gBAAAA,WAAW,EAAE,MAAKjB,KAAL,CAAWmB;AAFN,eAAd,CAHgB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;;;;;;;;;;;;;;;AApEhBa,gBAAAA,M,GAAS,KAAKC,KAAL,CAAWC,KAAX,CAAiBC,MAAjB,CAAwBH,M;;;uBAErBI,KAAK,CAAC,qCAAqCJ,MAAtC,EAA8C;AACnEK,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,aAAa,EAAE,YAAY,KAAKL,KAAL,CAAWM;AAD/B;AAD0D,iBAA9C,C;;;AAAjBC,gBAAAA,G;;sBAKFA,GAAG,CAACC,MAAJ,KAAe,G;;;;;sBACX,IAAIC,KAAJ,CAAU,wBAAV,C;;;;uBAEcF,GAAG,CAACG,IAAJ,E;;;AAAhBC,gBAAAA,O;AACN,qBAAKb,QAAL,CAAc;AACZ9B,kBAAAA,KAAK,EAAE2C,OAAO,CAACC,IAAR,CAAa5C,KADR;AAEZC,kBAAAA,MAAM,EAAE0C,OAAO,CAACC,IAAR,CAAaC,OAAb,CAAqBC,IAFjB;AAGZ3C,kBAAAA,KAAK,EAAE,2BAA2BwC,OAAO,CAACC,IAAR,CAAaG,QAHnC;AAIZ7C,kBAAAA,IAAI,EAAE,IAAI8C,IAAJ,CAASL,OAAO,CAACC,IAAR,CAAaK,SAAtB,EAAiCC,kBAAjC,CAAoD,OAApD,CAJM;AAKZ9C,kBAAAA,OAAO,EAAEuC,OAAO,CAACC,IAAR,CAAaxC,OALV;AAMZC,kBAAAA,UAAU,EAAEsC,OAAO,CAACC,IAAR,CAAavC,UANb;AAOZC,kBAAAA,QAAQ,EAAEqC,OAAO,CAACC,IAAR,CAAatC,QAPX;AAQZC,kBAAAA,GAAG,EAAEoC,OAAO,CAACC,IAAR,CAAarC,GARN;AASZC,kBAAAA,aAAa,EAAEmC,OAAO,CAACC,IAAR,CAAapC,aAThB;AAUZC,kBAAAA,QAAQ,EAAEkC,OAAO,CAACC,IAAR,CAAanC,QAVX;AAWZC,kBAAAA,MAAM,EAAEiC,OAAO,CAACC,IAAR,CAAalC,MAXT;AAYZC,kBAAAA,IAAI,EAAEgC,OAAO,CAACC,IAAR,CAAajC,IAZP;AAaZC,kBAAAA,SAAS,EAAE+B,OAAO,CAACC,IAAR,CAAahC,SAbZ;AAcZC,kBAAAA,SAAS,EAAE8B,OAAO,CAACC,IAAR,CAAa/B,SAdZ;AAeZC,kBAAAA,SAAS,EAAE6B,OAAO,CAACC,IAAR,CAAa9B,SAfZ;AAgBZC,kBAAAA,OAAO,EAAE;AAhBG,iBAAd;;uBAkBmBoB,KAAK,CAAC,uCAAuCJ,MAAxC,EAAgD;AACtEK,kBAAAA,OAAO,EAAE;AACPC,oBAAAA,aAAa,EAAE,YAAY,KAAKL,KAAL,CAAWM;AAD/B;AAD6D,iBAAhD,C;;;AAAlBa,gBAAAA,I;;sBAKFA,IAAI,CAACX,MAAL,KAAgB,G;;;;;sBACZ,IAAIC,KAAJ,CAAU,wBAAV,C;;;;uBAEeU,IAAI,CAACT,IAAL,E;;;AAAjBU,gBAAAA,Q;AACN,qBAAKtB,QAAL,CAAc;AACZd,kBAAAA,WAAW,EAAEoC,QAAQ,CAAC9B,OADV;AAEZJ,kBAAAA,kBAAkB,EAAEkC,QAAQ,CAAC9B;AAFjB,iBAAd;;;;;;;AAKEM,gBAAAA,OAAO,CAACC,GAAR;;;;;;;;;;;;;;;;;;6BAmCK;AACP,UAAI,KAAK9B,KAAL,CAAWgB,OAAX,KAAuB,MAA3B,EAAkC;AAChC,eAAO,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AACD;;AACDa,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWiB,WAAvB;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWmB,kBAAvB;AACAU,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWmB,kBAAX,CAA8BQ,MAA1C;AACAE,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAK9B,KAAL,CAAWoB,WAAvB;AACA,cACE;AAAS,QAAA,SAAS,EAAC,aAAnB;AAAiC,QAAA,GAAG,EAAC,iBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,KAAKpB,KAAL,CAAWC,KAAhB,CADF,EAEE,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAC,WAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAI,QAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACc,KAAKD,KAAL,CAAWE,MADzB,UACqC,KAAKF,KAAL,CAAWG,IADhD,CADJ,EAII;AAAI,QAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA4C,KAAKH,KAAL,CAAWO,QAAX,CAAoB+C,IAAhE,UAA0E,KAAKtD,KAAL,CAAWM,UAArF,CAJJ,CAFF,EAQE;AAAI,QAAA,SAAS,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QARF,EASE;AAAK,QAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,KAAD;AAAO,QAAA,OAAO,MAAd;AAAe,QAAA,QAAQ,EAAE,KAAKN,KAAL,CAAWI,KAApC;AAA2C,QAAA,SAAS,EAAC,WAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CATF,EAYE;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAI,KAAKJ,KAAL,CAAWK,OAAf,CADF,EAEE;AAAI,QAAA,SAAS,EAAC,IAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFF,EAGE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAA4C,KAAKL,KAAL,CAAWQ,GAAvD,CAAL,CADF,EAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAA+C,KAAKR,KAAL,CAAWW,MAA1D,CAAL,CAFF,CADF,EAKE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAsD,KAAKX,KAAL,CAAWS,aAAjE,CAAL,CADF,EAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA6C,KAAKT,KAAL,CAAWY,IAAxD,CAAL,CAFF,CALF,EASE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAiD,KAAKZ,KAAL,CAAWU,QAA5D,CAAL,CADF,EAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAmD,KAAKV,KAAL,CAAWa,SAA9D,CAAL,CAFF,CATF,EAaE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAsD,KAAKb,KAAL,CAAWe,SAAjE,CAAL,CADF,EAEE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0CAAoE,KAAKf,KAAL,CAAWc,SAA/E,CAAL,CAFF,CAbF,CAHF,EAqBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CADF,EAIE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AACE,QAAA,QAAQ,MADV;AACW,QAAA,OAAO,MADlB;AACmB,QAAA,OAAO,EAAE,KAAKO,uBAAL,EAD5B;AAEE,QAAA,GAAG,EAAE,KAAKrB,KAAL,CAAWe,SAAX,GAAqB,CAArB,GAAuB,GAF9B;AAGE,QAAA,KAAK,EAAE,KAAKf,KAAL,CAAWe,SAAX,GAAuB,MAHhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,CADF,CArBF,EAmCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAI,QAAA,SAAS,EAAC,uBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADF,CADF,EAIE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AACE,QAAA,QAAQ,MADV;AACW,QAAA,OAAO,MADlB;AACmB,QAAA,OAAO,EAAE,KAAKM,uBAAL,EAD5B;AAEE,QAAA,GAAG,EAAG,KAAKC,cAAL,EAAD,GAAwB,CAAxB,GAA4B,GAFnC;AAGE,QAAA,KAAK,EAAE,KAAKA,cAAL,KAAwB,MAHjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,CADF,CAnCF,CAZF,EA8DE;AAAK,QAAA,KAAK,EAAE;AAACiC,UAAAA,MAAM,EAAE;AAAT,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA9DF,EA+DE;AAAK,QAAA,SAAS,EAAC,SAAf;AAAyB,QAAA,KAAK,EAAE;AAC1BC,UAAAA,OAAO,EAAE,MADiB;AAE1BC,UAAAA,UAAU,EAAE,QAFc;AAG1BC,UAAAA,cAAc,EAAE;AAHU,SAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAKE,oBAAC,IAAD;AACE,QAAA,IAAI,EAAE,KAAK1D,KAAL,CAAWO,QAAX,CAAoB+C,IAD5B;AAEE,QAAA,KAAK,EAAE,KAAKtD,KAAL,CAAWO,QAAX,CAAoBoD,MAF7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CA/DF,EAyEE;AAAK,QAAA,KAAK,EAAE;AAACJ,UAAAA,MAAM,EAAE;AAAT,SAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAzEF,CADF,4BA4EG,KAAKvD,KAAL,CAAWiB,WAAX,CACE2C,IADF,CACO,UAASC,CAAT,EAAYC,CAAZ,EAAc;AAAC,eAAOA,CAAC,CAAC5C,MAAF,GAAW2C,CAAC,CAAC3C,MAApB;AAA2B,OADjD,EAEC;AAFD,OAGE6C,GAHF,CAGM,UAAAC,IAAI;AAAA,eACX;AAAK,UAAA,KAAK,EAAE;AAACR,YAAAA,OAAO,EAAE,MAAV;AACEC,YAAAA,UAAU,EAAE,QADd;AAEEC,YAAAA,cAAc,EAAE,QAFlB;AAGEO,YAAAA,aAAa,EAAE;AAHjB,WAAZ;AAIM,UAAA,GAAG,EAAED,IAAI,CAACE,IAAL,GAAY,WAJvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAKE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAQ,UAAA,SAAS,EAAC,SAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA6BF,IAAI,CAACE,IAAlC,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAgBF,IAAI,CAAC9C,MAArB,CAFF,CADF,EAKE,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAa8C,IAAI,CAACG,OAAlB,CALF,CALF,CADW;AAAA,OAHV,CA5EH,IA8FC;AAAK,QAAA,KAAK,EAAE;AAACF,UAAAA,aAAa,EAAE,MAAhB;AAAwBG,UAAAA,WAAW,EAAE,MAArC;AAA6CC,UAAAA,SAAS,EAAE;AAAxD,SAAZ;AACK,QAAA,GAAG,EAAC,eADT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEC,oBAAC,MAAD;AAAQ,QAAA,IAAI,EAAC,MAAb;AAAoB,QAAA,OAAO,EAAE,KAAKzC,qBAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFD,CA9FD;AAqGD;;;;EAnNsBvC,S;;AAsNzB,eAAeU,UAAf","sourcesContent":["import React, { Component } from 'react';\n\nimport Image from '../../../components/Image/Image';\nimport './SinglePost.css';\nimport { Container, Row, Col, ProgressBar, Toast} from 'react-bootstrap';\nimport Mapp from '../../../components/View-map/view-map';\nimport Loader from '../../../components/Loader/Loader';\nimport Button from '../../../components/Button/Button';\n\n\nclass SinglePost extends Component {\n  state = {\n    title: '',\n    author: '',\n    date: '',\n    image: '',\n    content: '',\n    taken_date: '',\n    location: '',\n    ISO: '',\n    shutter_speed: '',\n    aperture: '',\n    camera: '',\n    lens: '',\n    equipment: '',\n    edit_soft: '',\n    user_rate: '',\n    loading: 'true',\n    public_rate: [{rating: 5}],\n    public_rate_backup: [{rating: 5}],\n    loadComment: 1\n  };\n\n  async componentWillMount() {\n    const postId = this.props.match.params.postId;\n    try{\n    const res = await fetch('http://localhost:8080/feed/post/' + postId, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n    if (res.status !== 200) {\n      throw new Error('Failed to fetch status');\n    }\n    const resData = await res.json();\n    this.setState({\n      title: resData.post.title,\n      author: resData.post.creator.name,\n      image: 'http://localhost:8080/' + resData.post.imageUrl,\n      date: new Date(resData.post.createdAt).toLocaleDateString('en-US'),\n      content: resData.post.content,\n      taken_date: resData.post.taken_date,\n      location: resData.post.location,\n      ISO: resData.post.ISO,\n      shutter_speed: resData.post.shutter_speed,\n      aperture: resData.post.aperture,\n      camera: resData.post.camera,\n      lens: resData.post.lens,\n      equipment: resData.post.equipment,\n      edit_soft: resData.post.edit_soft,\n      user_rate: resData.post.user_rate,\n      loading: 'false'\n    });\n    const res2 = await fetch('http://localhost:8080/feed/rating/' + postId, {\n      headers: {\n        Authorization: 'Bearer ' + this.props.token\n      }\n    })\n    if (res2.status !== 200) {\n      throw new Error('Failed to fetch status');\n    }\n    const resData2 = await res2.json();\n    this.setState({\n      public_rate: resData2.ratings,\n      public_rate_backup: resData2.ratings\n    })\n    }catch(err){\n      console.log(err);\n    }\n  }\n\n  progressBarColorHandler = () => {\n    if (this.state.user_rate > 3){\n      return \"success\"\n    }else if (this.state.user_rate > 1){\n      return \"warning\"\n    }else{\n      return \"danger\"\n    }\n  }\n\n  getRateAverage = () => {\n    const ratings = this.state.public_rate;\n    var sum = 0;\n    var num = 0;\n    for (var i = 0; i < ratings.length; i++){\n      sum += ratings[i].rating;\n      num += 1;\n    }\n    return sum/num;\n  }\n\n  getAllCommentsHandler = async () => {\n    console.log('in');\n    console.log(this.state.public_rate_backup.length);\n    await this.setState({\n      loadComment: this.state.public_rate_backup.length,\n      public_rate: this.state.public_rate_backup\n    });\n    return;\n  };\n\n  render() {\n    if (this.state.loading === 'true'){\n      return <Loader />\n    }\n    console.log(this.state.public_rate);\n    console.log(this.state.public_rate_backup);\n    console.log(this.state.public_rate_backup.length);\n    console.log(this.state.loadComment);\n    return ([(\n      <section className=\"single-post\" key='mainSinglePosts'>\n        <h1>{this.state.title}</h1>\n        <Container className=\"Container\">\n            <h2 className=\"single-post-center\">\n              Created by {this.state.author} on {this.state.date}\n            </h2>\n            <h2 className=\"single-post-center\">Shot at {this.state.location.text} on {this.state.taken_date}</h2>\n        </Container>\n        <hr className=\"hr\"></hr>\n        <div className=\"single-post__image\">\n          <Image contain imageUrl={this.state.image} className=\"the_image\"/>\n        </div>\n        <div className=\"single-post__info padding\">\n          <p>{this.state.content}</p>\n          <hr className=\"hr\"></hr>\n          <Container>\n            <Row>\n              <Col><h2 className=\"single_post_normal_h2\">ISO: {this.state.ISO}</h2></Col>\n              <Col><h2 className=\"single_post_normal_h2\">Camera: {this.state.camera}</h2></Col>\n            </Row>\n            <Row>\n              <Col><h2 className=\"single_post_normal_h2\">Shutter Speed: {this.state.shutter_speed}</h2></Col>\n              <Col><h2 className=\"single_post_normal_h2\">Lens: {this.state.lens}</h2></Col>\n            </Row>\n            <Row>\n              <Col><h2 className=\"single_post_normal_h2\">Aperture: {this.state.aperture}</h2></Col>\n              <Col><h2 className=\"single_post_normal_h2\">Equipments: {this.state.equipment}</h2></Col>\n            </Row>\n            <Row>\n              <Col><h2 className=\"single_post_normal_h2\">Author Rating: {this.state.user_rate}</h2></Col>\n              <Col><h2 className=\"single_post_normal_h2\">Post-Editing Softwares Used: {this.state.edit_soft}</h2></Col>\n            </Row>\n          </Container>\n          <div>\n            <Row>\n              <Col xs={2}>\n                <h2 className=\"single_post_normal_h2\">Author Rating: </h2>\n              </Col>\n              <Col>\n                <ProgressBar \n                  animated striped variant={this.progressBarColorHandler()} \n                  now={this.state.user_rate/5*100} \n                  label={this.state.user_rate + ' / 5'}\n                />\n              </Col>\n            </Row>\n          </div>\n          <div>\n            <Row>\n              <Col xs={2}>\n                <h2 className=\"single_post_normal_h2\">Public Rating: </h2>\n              </Col>\n              <Col>\n                <ProgressBar \n                  animated striped variant={this.progressBarColorHandler()} \n                  now={(this.getRateAverage())/5 * 100} \n                  label={this.getRateAverage() + ' / 5'}\n                />\n              </Col>\n            </Row>\n          </div>\n        </div>\n        <div style={{height: \"100px\"}}></div>\n        <div className=\"map-div\" style={{\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n            }}>\n          <Mapp\n            text={this.state.location.text}\n            value={this.state.location.center}\n          />\n        </div>\n        <div style={{height: '100px'}}/>\n      </section>),\n    ...this.state.public_rate\n        .sort(function(a, b){return b.rating - a.rating})\n        //.splice(0, Math.min(this.state.public_rate.length, this.state.loadComment))\n        .map(rate => (\n      <div style={{display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    paddingBottom: '2rem'}}\n            key={rate.user + \"'sComment\"}>\n        <Toast>\n          <Toast.Header>\n            <strong className=\"mr-auto\">{rate.user}</strong>\n            <small>rating: {rate.rating}</small>\n          </Toast.Header>\n          <Toast.Body>{rate.comment}</Toast.Body>\n        </Toast>\n      </div>\n    )),\n    (<div style={{paddingBottom: '2rem', paddingLeft: '2rem', textAlign: 'center'}}\n          key='LoadAllButton'>\n      <Button mode=\"flat\" onClick={this.getAllCommentsHandler}>\n        Load all\n      </Button>\n    </div>)\n    ]);\n  }\n}\n\nexport default SinglePost;\n"]},"metadata":{},"sourceType":"module"}